{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anupp\\\\Downloads\\\\fleet-billing-app\\\\fleet-billing-app\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { collection, query, where, getDocs, getDoc, updateDoc, deleteDoc, doc, addDoc } from \"firebase/firestore\";\nimport { auth, db } from \"./firebase\";\nimport Auth from \"./components/Auth\";\nimport ManualEntryForm from \"./components/ManualEntryForm\";\nimport UploadForm from \"./components/UploadForm\";\nimport \"./App.css\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport * as XLSX from \"xlsx\";\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nconst finalColumnOrder = [\"indentNumber\", \"date\", \"deliveryDate\", \"months\", \"origin\", \"destination\", \"customer\", \"customerType\", \"vehicleNo\", \"vendor\", \"salesRate\", \"buyRate\", \"createdAt\", \"createdBy\", \"versionDate\", \"isCurrent\", \"updateDescription\", \"expiredAt\",\n// Customer Master\n\"customerMaster.toBeAdvance\", \"customerMaster.advanceReceived\", \"customerMaster.advDeviation\", \"customerMaster.advanceRecDate\", \"customerMaster.validatedAdvanceUTRDescription\", \"customerMaster.validatedAdvanceAmount\", \"customerMaster.balance\", \"customerMaster.processingCharges\", \"customerMaster.inwardMisCharges\", \"customerMaster.outwardMisCharges\", \"customerMaster.balanceReceived\", \"customerMaster.remainingBalance\", \"customerMaster.balanceRecDate\", \"customerMaster.validatedBalanceUTR\", \"customerMaster.validatedBalanceUTRAmount\",\n// Vendor Master\n\"vendorMaster.vendorOutwardPayment\", \"vendorMaster.paidAmount\", \"vendorMaster.balancePending\", \"vendorMaster.vendorRemark\",\n// POD Master\n\"podMaster.podVendorDate\", \"podMaster.podSendToCustomerDate\", \"podMaster.docNo\", \"podMaster.podCustomerRec\", \"podMaster.today\", \"podMaster.balanceOverdueDays\", \"podMaster.toBeCollectedAmount\"];\nconst columnLabels = {\n  indentNumber: \"Indent Number\",\n  date: \"Placement Date\",\n  deliveryDate: \"Delivery Date\",\n  months: \"Month\",\n  origin: \"Origin\",\n  destination: \"Destination\",\n  customer: \"Customer\",\n  customerType: \"Customer Type\",\n  vehicleNo: \"Vehicle Number\",\n  vendor: \"Vendor\",\n  salesRate: \"Sales Rate\",\n  buyRate: \"Buy Rate\",\n  createdAt: \"Created At\",\n  createdBy: \"Created By\",\n  versionDate: \"Version Date\",\n  isCurrent: \"Is Current\",\n  updateDescription: \"Update Description\",\n  expiredAt: \"Expired At\",\n  // Customer Master\n  \"customerMaster.toBeAdvance\": \"Customer Master -> To be Advance (Sales)\",\n  \"customerMaster.advanceReceived\": \"Customer Master -> Advance / Payment Received\",\n  \"customerMaster.advDeviation\": \"Customer Master -> Adv Deviation (as on Date)\",\n  \"customerMaster.advanceRecDate\": \"Customer Master -> Advance Rec Date\",\n  \"customerMaster.validatedAdvanceUTRDescription\": \"Customer Master -> Validated-Advance UTR Description\",\n  \"customerMaster.validatedAdvanceAmount\": \"Customer Master -> Validated UTR - Advance Amount\",\n  \"customerMaster.balance\": \"Customer Master -> Balance\",\n  \"customerMaster.processingCharges\": \"Customer Master -> Processing Charges\",\n  \"customerMaster.inwardMisCharges\": \"Customer Master -> Inward-Mis Charges\",\n  \"customerMaster.outwardMisCharges\": \"Customer Master -> Outward-Mis Charges\",\n  \"customerMaster.balanceReceived\": \"Customer Master -> Bal Received\",\n  \"customerMaster.remainingBalance\": \"Customer Master -> Remaining Balance\",\n  \"customerMaster.balanceRecDate\": \"Customer Master -> Balance Rec Date\",\n  \"customerMaster.validatedBalanceUTR\": \"Customer Master -> Validated-Balance UTR\",\n  \"customerMaster.validatedBalanceUTRAmount\": \"Customer Master -> Validate Balance UTR-Amount\",\n  // Vendor Master\n  \"vendorMaster.vendorOutwardPayment\": \"Vendor Master -> Outward Payment\",\n  \"vendorMaster.paidAmount\": \"Vendor Master -> Paid Amount\",\n  \"vendorMaster.balancePending\": \"Vendor Master -> Balance Pending\",\n  \"vendorMaster.vendorRemark\": \"Vendor Master -> Vendor Remark\",\n  // POD Master\n  \"podMaster.podVendorDate\": \"POD Master -> POD Vendor-Date\",\n  \"podMaster.podSendToCustomerDate\": \"POD Master -> POD-Send to Customer Date\",\n  \"podMaster.docNo\": \"POD Master -> Doc No\",\n  \"podMaster.podCustomerRec\": \"POD Master -> POD-Customer Rec\",\n  \"podMaster.today\": \"POD Master -> Today\",\n  \"podMaster.balanceOverdueDays\": \"POD Master -> Balance Overdue Days\",\n  \"podMaster.toBeCollectedAmount\": \"POD Master -> To be Collected Amount\"\n};\nconst flattenObject = (obj, prefix = \"\") => {\n  let result = {};\n  for (const key in obj) {\n    const value = obj[key];\n    const fullKey = prefix ? `${prefix}.${key}` : key;\n    if (value && typeof value === \"object\" && !value.seconds) {\n      Object.assign(result, flattenObject(value, fullKey));\n    } else {\n      result[fullKey] = value;\n    }\n  }\n  return result;\n};\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [authLoading, setAuthLoading] = useState(true);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [searchField, setSearchField] = useState(\"indentNumber\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [originalRecords, setOriginalRecords] = useState({});\n  const [isSearching, setIsSearching] = useState(false);\n  const [isExporting, setIsExporting] = useState(false);\n  const [searchAttempted, setSearchAttempted] = useState(false);\n  const [activeOnly, setActiveOnly] = useState(false);\n  const [includeCustomer, setIncludeCustomer] = useState(false);\n  const [includeVendor, setIncludeVendor] = useState(false);\n  const [includePOD, setIncludePOD] = useState(false);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => {\n      setUser(currentUser);\n      setAuthLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleExportToExcel = () => {\n    if (history.length === 0) {\n      toast.info(\"❌ No history data to export.\");\n      return;\n    }\n\n    // Define columns to include\n    const fixedCols = finalColumnOrder.slice(0, 17); // First 17 are fixed\n    const customerCols = finalColumnOrder.slice(17, 32);\n    const vendorCols = finalColumnOrder.slice(32, 36);\n    const podCols = finalColumnOrder.slice(36);\n    const selectedCols = [...fixedCols, ...(includeCustomer ? customerCols : []), ...(includeVendor ? vendorCols : []), ...(includePOD ? podCols : [])];\n    const exportData = history.map(row => {\n      const flatRow = {};\n      selectedCols.forEach(col => {\n        const val = row[col];\n        flatRow[col] = (val === null || val === void 0 ? void 0 : val.seconds) ? new Date(val.seconds * 1000).toLocaleString() : val !== null && val !== void 0 ? val : \"\";\n      });\n      return flatRow;\n    });\n    const worksheet = XLSX.utils.json_to_sheet(exportData);\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Filtered Export\");\n    const fileName = `FilteredExport_${new Date().toISOString().split(\"T\")[0]}.xlsx`;\n    XLSX.writeFile(workbook, fileName);\n  };\n  const handleSearch = async () => {\n    setIsSearching(true);\n    try {\n      const fleetRef = collection(db, \"fleet_records\");\n      let q;\n      if (searchField === \"Date\") {\n        const fromDate = new Date(startDate);\n        const toDate = new Date(endDate + \"T23:59:59\");\n        if (fromDate > toDate) {\n          toast.warn(\"⚠️ 'From' date cannot be after 'To' date.\");\n          setIsSearching(false);\n          return;\n        }\n        q = query(fleetRef, ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []), where(\"createdAt\", \">=\", fromDate), where(\"createdAt\", \"<=\", toDate));\n      } else if (searchKey) {\n        const key = searchField === \"indentNumber\" ? Number(searchKey) : searchKey;\n        q = query(fleetRef, where(searchField, \"==\", key), ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []));\n      } else {\n        toast.warn(\"🔍 Please enter a search value.\");\n        setIsSearching(false);\n        return;\n      }\n      setSearchAttempted(true);\n      const snapshot = await getDocs(q);\n      const allVersions = [];\n      const currentOnly = [];\n      snapshot.forEach(docSnap => {\n        const rawData = {\n          id: docSnap.id,\n          ...docSnap.data()\n        };\n        const row = flattenObject(rawData);\n        allVersions.push(row);\n        if (row.isCurrent) currentOnly.push(row);\n      });\n      allVersions.sort((a, b) => {\n        if (a.isCurrent && !b.isCurrent) return -1;\n        if (!a.isCurrent && b.isCurrent) return 1;\n        return b.indentNumber - a.indentNumber;\n      });\n\n      // ✅ Sort currentOnly also by indentNumber descending\n      currentOnly.sort((a, b) => b.indentNumber - a.indentNumber);\n      if (searchField === \"indentNumber\") {\n        setRecords(currentOnly);\n        setHistory(allVersions);\n      } else {\n        setRecords([]);\n        setHistory(allVersions);\n      }\n      if (snapshot.empty || allVersions.length === 0) {\n        toast.info(\"❌ No records found.\");\n      }\n    } catch (error) {\n      toast.error(\"❌ Search failed: \" + error.message);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const normalize = val => {\n    if (val === null || val === undefined) return \"\";\n    return typeof val === \"object\" && val.seconds ? new Date(val.seconds * 1000).toISOString() : String(val).trim();\n  };\n  const getChangedFields = (current, original) => {\n    const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\n    const changed = [];\n    const flatCurrent = flattenObject(current);\n    const flatOriginal = flattenObject(original);\n    for (const key in flatCurrent) {\n      if (ignored.includes(key)) continue;\n      const currVal = normalize(flatCurrent[key]);\n      const origVal = normalize(flatOriginal === null || flatOriginal === void 0 ? void 0 : flatOriginal[key]);\n      if (currVal !== origVal) changed.push(key);\n    }\n    return changed;\n  };\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\n  const handleUpdate = async row => {\n    try {\n      const {\n        id,\n        indentNumber,\n        ...updatedData\n      } = row;\n      const currentDocSnap = await getDocs(query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", indentNumber), where(\"isCurrent\", \"==\", true)));\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\n      const oldData = flattenObject((oldDoc === null || oldDoc === void 0 ? void 0 : oldDoc.data()) || {});\n      const cleanData = {};\n      const updateLog = [];\n      for (const key in updatedData) {\n        var _updatedData$key, _oldData$key;\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key)) continue;\n        const newVal = (_updatedData$key = updatedData[key]) !== null && _updatedData$key !== void 0 ? _updatedData$key : \"\";\n        const oldVal = (_oldData$key = oldData[key]) !== null && _oldData$key !== void 0 ? _oldData$key : \"\";\n        cleanData[key] = newVal;\n        if (String(newVal).trim() !== String(oldVal).trim()) {\n          updateLog.push(`Updated ${key}`);\n        }\n      }\n      if (updateLog.length === 0) {\n        toast.info(\"ℹ️ No changes to update.\");\n        return;\n      }\n      confirmAlert({\n        title: 'Confirm Update',\n        message: `Do you want to update changes: ${updateLog.join(\", \")}?`,\n        buttons: [{\n          label: 'Yes',\n          onClick: async () => {\n            const flattenedOld = flattenObject(oldDoc.data());\n            await updateDoc(doc(db, \"fleet_records\", id), {\n              ...flattenedOld,\n              isCurrent: false,\n              expiredAt: new Date(),\n              modifiedBy: user.email\n            });\n            const newVersion = {\n              ...cleanData,\n              indentNumber,\n              createdAt: new Date(),\n              createdBy: user.email,\n              isCurrent: true,\n              versionDate: new Date(),\n              updateDescription: updateLog.join(\", \")\n            };\n            await addDoc(collection(db, \"fleet_records\"), newVersion);\n            setSearchField(\"indentNumber\");\n            setSearchKey(String(indentNumber));\n            setSearchAttempted(true);\n            setActiveOnly(false);\n            toast.success(\"✅ Record updated.\");\n            setTimeout(() => {\n              handleSearch();\n            }, 500);\n          }\n        }, {\n          label: 'No'\n        }]\n      });\n      return;\n      await updateDoc(doc(db, \"fleet_records\", id), {\n        ...oldDoc.data(),\n        isCurrent: false,\n        expiredAt: new Date(),\n        modifiedBy: user.email\n      });\n      const newVersion = {\n        ...cleanData,\n        indentNumber,\n        createdAt: new Date(),\n        createdBy: user.email,\n        isCurrent: true,\n        versionDate: new Date(),\n        updateDescription: updateLog.join(\", \")\n      };\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\n      toast.success(\"✅ Record updated.\");\n      handleSearch();\n    } catch (error) {\n      toast.error(\"❌ Update failed: \" + error.message);\n    }\n  };\n  const handleDelete = async fleetNumberToDelete => {\n    try {\n      const q = query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", fleetNumberToDelete));\n      const snapshot = await getDocs(q);\n      if (snapshot.empty) {\n        toast.error(\"❌ No records found for deletion.\");\n        return;\n      }\n      confirmAlert({\n        title: 'Confirm Deletion',\n        message: `Delete all versions of Indent No. ${fleetNumberToDelete}?`,\n        buttons: [{\n          label: 'Yes',\n          onClick: async () => {\n            await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\n            setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\n            setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\n            toast.success(\"✅ Deleted all versions.\");\n          }\n        }, {\n          label: 'No'\n        }]\n      });\n      return;\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\n      setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\n      setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\n      toast.success(\"✅ Deleted all versions.\");\n    } catch (err) {\n      toast.error(\"❌ Delete failed: \" + err.message);\n    }\n  };\n  if (authLoading) return /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 27\n    }\n  }, \"Checking authentication...\");\n  if (!user) return /*#__PURE__*/React.createElement(Auth, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 19\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: \"100vw\",\n      overflowX: \"hidden\",\n      padding: \"40px 20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 9\n    }\n  }, \"Fleet Billing Dashboard\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"user-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 11\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/logo.png\",\n    alt: \"Logo\",\n    style: {\n      height: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      // ✅ Clear localStorage before logout\n      localStorage.removeItem(\"inProgressFleetNumber\");\n      localStorage.removeItem(\"docId\");\n      localStorage.removeItem(\"fixedFields\");\n      localStorage.removeItem(\"customerFields\");\n      localStorage.removeItem(\"vendorFields\");\n      localStorage.removeItem(\"podFields\");\n      signOut(auth);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }\n  }, \"Logout\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-start\",\n      gap: \"10px\",\n      marginBottom: \"10px\",\n      marginLeft: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"excel-upload\",\n    style: {\n      fontWeight: \"bold\",\n      color: \"#007bff\",\n      cursor: \"pointer\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 3\n    }\n  }, \"\\uD83D\\uDCE4 Upload Excel\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"excel-upload\",\n    type: \"file\",\n    accept: \".xlsx, .xls\",\n    style: {\n      display: \"none\"\n    },\n    onChange: e => {\n      const file = e.target.files[0];\n      if (file && /\\.(xlsx|xls)$/.test(file.name)) {\n        // ✅ Trigger UploadForm logic manually via custom handler\n        // You can lift handleFile from UploadForm and add it here\n        toast.success(\"📁 File ready for upload processing.\");\n      } else {\n        toast.error(\"❌ Please upload a valid Excel file (.xlsx or .xls)\");\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 3\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary\",\n    onClick: () => {\n      const sample = finalColumnOrder.reduce((obj, key) => {\n        obj[columnLabels[key] || key] = \"\"; // show proper label in Excel\n        return obj;\n      }, {});\n      const sheet = XLSX.utils.json_to_sheet([sample]);\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, sheet, \"Template\");\n      XLSX.writeFile(wb, \"FleetUploadTemplate.xlsx\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 3\n    }\n  }, \"\\u2B07\\uFE0F Download Template\")), /*#__PURE__*/React.createElement(ManualEntryForm, {\n    onAddRow: (row, addToHistory) => {\n      setRecords([row]);\n      if (addToHistory) setHistory([row]);\n\n      // ✅ Store latest indentNumber to maintain search context\n      setSearchField(\"indentNumber\");\n      setSearchKey(String(row.indentNumber));\n      setSearchAttempted(true);\n      setActiveOnly(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 7\n    }\n  }, \"Search Existing Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      gap: \"10px\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      gap: \"10px\",\n      flexWrap: \"wrap\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: searchField,\n    onChange: e => {\n      setSearchField(e.target.value);\n      setSearchKey(\"\");\n      setStartDate(\"\");\n      setEndDate(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"indentNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 7\n    }\n  }, \"Indent Number\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Broker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 7\n    }\n  }, \"Broker\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 7\n    }\n  }, \"Date\")), searchField === \"Date\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 9\n    }\n  }, \"From:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: startDate,\n    onChange: e => setStartDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 9\n    }\n  }, \"To:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: endDate,\n    onChange: e => setEndDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 9\n    }\n  })) : /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: searchKey,\n    onChange: e => setSearchKey(e.target.value),\n    placeholder: \"Search key\",\n    style: {\n      flex: 1,\n      width: \"250px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      fontSize: \"14px\",\n      marginBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: activeOnly,\n    onChange: e => setActiveOnly(e.target.checked),\n    style: {\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 7\n    }\n  }), \"Show only active\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: handleSearch,\n    disabled: isSearching,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 3\n    }\n  }, isSearching ? \"Searching...\" : \"Search\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 1\n    }\n  }), searchField === \"indentNumber\" && records.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 11\n    }\n  }, \"Editable Current Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 581,\n      columnNumber: 17\n    }\n  }, finalColumnOrder.map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 583,\n      columnNumber: 21\n    }\n  }, columnLabels[col] || col)), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 585,\n      columnNumber: 19\n    }\n  }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 15\n    }\n  }, records.map((row, rowIndex) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: rowIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 19\n    }\n  }, finalColumnOrder.map((col, j) => {\n    var _row$col, _row$col2;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: j,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: typeof row[col] === \"object\" && ((_row$col = row[col]) === null || _row$col === void 0 ? void 0 : _row$col.seconds) ? col === \"date\" ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\") : new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col2 = row[col]) !== null && _row$col2 !== void 0 ? _row$col2 : \"\"),\n      onChange: e => {\n        const updated = [...records];\n        updated[rowIndex][col] = e.target.value;\n        setRecords(updated);\n      },\n      readOnly: [\"indentNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col),\n      style: {\n        width: \"140px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 25\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"save\",\n    onClick: () => handleUpdate(row),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 23\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete\",\n    onClick: () => handleDelete(row.indentNumber),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 23\n    }\n  }, \"Delete\")))))))), history.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 3\n    }\n  }, \"\\uD83D\\uDD0D Full Version History\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      gap: \"20px\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: includeCustomer,\n    onChange: e => setIncludeCustomer(e.target.checked),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 5\n    }\n  }), \"Include Customer\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 640,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: includeVendor,\n    onChange: e => setIncludeVendor(e.target.checked),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 641,\n      columnNumber: 5\n    }\n  }), \"Include Vendor\"), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: includePOD,\n    onChange: e => setIncludePOD(e.target.checked),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 5\n    }\n  }), \"Include POD\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleExportToExcel,\n    disabled: history.length === 0,\n    className: \"export-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 3\n    }\n  }, \"\\u2B07\\uFE0F Export Selected\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 655,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 15\n    }\n  }, finalColumnOrder.map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    className: \"tight-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 19\n    }\n  }, columnLabels[col] || col)))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 13\n    }\n  }, [...history].sort((a, b) => {\n    var _a$expiredAt, _b$expiredAt;\n    if (a.isCurrent) return -1;\n    if (b.isCurrent) return 1;\n    const aTime = ((_a$expiredAt = a.expiredAt) === null || _a$expiredAt === void 0 ? void 0 : _a$expiredAt.seconds) || 0;\n    const bTime = ((_b$expiredAt = b.expiredAt) === null || _b$expiredAt === void 0 ? void 0 : _b$expiredAt.seconds) || 0;\n    return bTime - aTime;\n  }).map((row, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 19\n    }\n  }, finalColumnOrder.map((col, j) => {\n    var _row$col3, _row$col4;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: j,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 23\n      }\n    }, typeof row[col] === \"object\" && ((_row$col3 = row[col]) === null || _row$col3 === void 0 ? void 0 : _row$col3.seconds) ? col === \"date\" ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\") : new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col4 = row[col]) !== null && _row$col4 !== void 0 ? _row$col4 : \"\"));\n  }))))))), searchAttempted && !isSearching && records.length === 0 && history.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\",\n      color: \"#888\",\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 9\n    }\n  }, \"No records to display.\"), /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"30px\",\n      color: \"#666\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 7\n    }\n  }, \"\\xA9 2025 Fleet Billing System\"));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","onAuthStateChanged","signOut","collection","query","where","getDocs","getDoc","updateDoc","deleteDoc","doc","addDoc","auth","db","Auth","ManualEntryForm","UploadForm","toast","ToastContainer","XLSX","confirmAlert","finalColumnOrder","columnLabels","indentNumber","date","deliveryDate","months","origin","destination","customer","customerType","vehicleNo","vendor","salesRate","buyRate","createdAt","createdBy","versionDate","isCurrent","updateDescription","expiredAt","flattenObject","obj","prefix","result","key","value","fullKey","seconds","Object","assign","App","user","setUser","authLoading","setAuthLoading","records","setRecords","history","setHistory","searchKey","setSearchKey","searchField","setSearchField","startDate","setStartDate","endDate","setEndDate","originalRecords","setOriginalRecords","isSearching","setIsSearching","isExporting","setIsExporting","searchAttempted","setSearchAttempted","activeOnly","setActiveOnly","includeCustomer","setIncludeCustomer","includeVendor","setIncludeVendor","includePOD","setIncludePOD","unsubscribe","currentUser","handleExportToExcel","length","info","fixedCols","slice","customerCols","vendorCols","podCols","selectedCols","exportData","map","row","flatRow","forEach","col","val","Date","toLocaleString","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","fileName","toISOString","split","writeFile","handleSearch","fleetRef","q","fromDate","toDate","warn","Number","snapshot","allVersions","currentOnly","docSnap","rawData","id","data","push","sort","a","b","empty","error","message","normalize","undefined","String","trim","getChangedFields","current","original","ignored","changed","flatCurrent","flatOriginal","includes","currVal","origVal","hasMeaningfulChanges","curr","orig","handleUpdate","updatedData","currentDocSnap","oldDoc","docs","find","oldData","cleanData","updateLog","_updatedData$key","_oldData$key","newVal","oldVal","title","join","buttons","label","onClick","flattenedOld","modifiedBy","email","newVersion","success","setTimeout","handleDelete","fleetNumberToDelete","Promise","all","prev","filter","r","err","createElement","style","textAlign","__self","__source","_jsxFileName","lineNumber","columnNumber","maxWidth","overflowX","padding","className","display","alignItems","src","alt","height","localStorage","removeItem","justifyContent","gap","marginBottom","marginLeft","htmlFor","fontWeight","color","cursor","type","accept","onChange","e","file","target","files","test","name","sample","reduce","sheet","wb","onAddRow","addToHistory","flexWrap","width","Fragment","placeholder","flex","fontSize","checked","marginRight","disabled","rowIndex","j","_row$col","_row$col2","toLocaleDateString","updated","readOnly","_a$expiredAt","_b$expiredAt","aTime","bTime","i","_row$col3","_row$col4","marginTop","position","autoClose"],"sources":["C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  addDoc,\r\n} from \"firebase/firestore\";\r\nimport { auth, db } from \"./firebase\";\r\nimport Auth from \"./components/Auth\";\r\nimport ManualEntryForm from \"./components/ManualEntryForm\";\r\nimport UploadForm from \"./components/UploadForm\";\r\nimport \"./App.css\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { confirmAlert } from 'react-confirm-alert';\r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\n\r\n\r\nconst finalColumnOrder = [\r\n  \"indentNumber\", \"date\",\"deliveryDate\", \"months\", \"origin\", \"destination\", \"customer\", \"customerType\",\r\n  \"vehicleNo\", \"vendor\", \"salesRate\", \"buyRate\", \"createdAt\", \"createdBy\", \"versionDate\",\r\n  \"isCurrent\", \"updateDescription\", \"expiredAt\",\r\n  // Customer Master\r\n  \"customerMaster.toBeAdvance\", \"customerMaster.advanceReceived\", \"customerMaster.advDeviation\",\r\n  \"customerMaster.advanceRecDate\", \"customerMaster.validatedAdvanceUTRDescription\",\r\n  \"customerMaster.validatedAdvanceAmount\", \"customerMaster.balance\", \"customerMaster.processingCharges\",\r\n  \"customerMaster.inwardMisCharges\", \"customerMaster.outwardMisCharges\", \"customerMaster.balanceReceived\",\r\n  \"customerMaster.remainingBalance\", \"customerMaster.balanceRecDate\", \"customerMaster.validatedBalanceUTR\",\r\n  \"customerMaster.validatedBalanceUTRAmount\",\r\n  // Vendor Master\r\n  \"vendorMaster.vendorOutwardPayment\", \"vendorMaster.paidAmount\", \"vendorMaster.balancePending\",\r\n  \"vendorMaster.vendorRemark\",\r\n  // POD Master\r\n  \"podMaster.podVendorDate\", \"podMaster.podSendToCustomerDate\", \"podMaster.docNo\",\r\n  \"podMaster.podCustomerRec\", \"podMaster.today\", \"podMaster.balanceOverdueDays\",\r\n  \"podMaster.toBeCollectedAmount\"\r\n];\r\n\r\nconst columnLabels = {\r\n  indentNumber: \"Indent Number\",\r\n  date: \"Placement Date\",\r\n  deliveryDate: \"Delivery Date\",\r\n  months: \"Month\",\r\n  origin: \"Origin\",\r\n  destination: \"Destination\",\r\n  customer: \"Customer\",\r\n  customerType: \"Customer Type\",\r\n  vehicleNo: \"Vehicle Number\",\r\n  vendor: \"Vendor\",\r\n  salesRate: \"Sales Rate\",\r\n  buyRate: \"Buy Rate\",\r\n  createdAt: \"Created At\",\r\n  createdBy: \"Created By\",\r\n  versionDate: \"Version Date\",\r\n  isCurrent: \"Is Current\",\r\n  updateDescription: \"Update Description\",\r\n  expiredAt: \"Expired At\",\r\n\r\n  // Customer Master\r\n  \"customerMaster.toBeAdvance\": \"Customer Master -> To be Advance (Sales)\",\r\n  \"customerMaster.advanceReceived\": \"Customer Master -> Advance / Payment Received\",\r\n  \"customerMaster.advDeviation\": \"Customer Master -> Adv Deviation (as on Date)\",\r\n  \"customerMaster.advanceRecDate\": \"Customer Master -> Advance Rec Date\",\r\n  \"customerMaster.validatedAdvanceUTRDescription\": \"Customer Master -> Validated-Advance UTR Description\",\r\n  \"customerMaster.validatedAdvanceAmount\": \"Customer Master -> Validated UTR - Advance Amount\",\r\n  \"customerMaster.balance\": \"Customer Master -> Balance\",\r\n  \"customerMaster.processingCharges\": \"Customer Master -> Processing Charges\",\r\n  \"customerMaster.inwardMisCharges\": \"Customer Master -> Inward-Mis Charges\",\r\n  \"customerMaster.outwardMisCharges\": \"Customer Master -> Outward-Mis Charges\",\r\n  \"customerMaster.balanceReceived\": \"Customer Master -> Bal Received\",\r\n  \"customerMaster.remainingBalance\": \"Customer Master -> Remaining Balance\",\r\n  \"customerMaster.balanceRecDate\": \"Customer Master -> Balance Rec Date\",\r\n  \"customerMaster.validatedBalanceUTR\": \"Customer Master -> Validated-Balance UTR\",\r\n  \"customerMaster.validatedBalanceUTRAmount\": \"Customer Master -> Validate Balance UTR-Amount\",\r\n\r\n  // Vendor Master\r\n  \"vendorMaster.vendorOutwardPayment\": \"Vendor Master -> Outward Payment\",\r\n  \"vendorMaster.paidAmount\": \"Vendor Master -> Paid Amount\",\r\n  \"vendorMaster.balancePending\": \"Vendor Master -> Balance Pending\",\r\n  \"vendorMaster.vendorRemark\": \"Vendor Master -> Vendor Remark\",\r\n\r\n  // POD Master\r\n  \"podMaster.podVendorDate\": \"POD Master -> POD Vendor-Date\",\r\n  \"podMaster.podSendToCustomerDate\": \"POD Master -> POD-Send to Customer Date\",\r\n  \"podMaster.docNo\": \"POD Master -> Doc No\",\r\n  \"podMaster.podCustomerRec\": \"POD Master -> POD-Customer Rec\",\r\n  \"podMaster.today\": \"POD Master -> Today\",\r\n  \"podMaster.balanceOverdueDays\": \"POD Master -> Balance Overdue Days\",\r\n  \"podMaster.toBeCollectedAmount\": \"POD Master -> To be Collected Amount\"\r\n};\r\n\r\n\r\nconst flattenObject = (obj, prefix = \"\") => {\r\n  let result = {};\r\n  for (const key in obj) {\r\n    const value = obj[key];\r\n    const fullKey = prefix ? `${prefix}.${key}` : key;\r\n    if (value && typeof value === \"object\" && !value.seconds) {\r\n      Object.assign(result, flattenObject(value, fullKey));\r\n    } else {\r\n      result[fullKey] = value;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n  const [records, setRecords] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  const [searchField, setSearchField] = useState(\"indentNumber\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [originalRecords, setOriginalRecords] = useState({});\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [searchAttempted, setSearchAttempted] = useState(false);\r\n  const [activeOnly, setActiveOnly] = useState(false);\r\n  const [includeCustomer, setIncludeCustomer] = useState(false);\r\n  const [includeVendor, setIncludeVendor] = useState(false);\r\n  const [includePOD, setIncludePOD] = useState(false);\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n      setAuthLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleExportToExcel = () => {\r\n  if (history.length === 0) {\r\n    toast.info(\"❌ No history data to export.\");\r\n    return;\r\n  }\r\n\r\n  // Define columns to include\r\n  const fixedCols = finalColumnOrder.slice(0, 17); // First 17 are fixed\r\n  const customerCols = finalColumnOrder.slice(17, 32);\r\n  const vendorCols = finalColumnOrder.slice(32, 36);\r\n  const podCols = finalColumnOrder.slice(36);\r\n\r\n  const selectedCols = [\r\n    ...fixedCols,\r\n    ...(includeCustomer ? customerCols : []),\r\n    ...(includeVendor ? vendorCols : []),\r\n    ...(includePOD ? podCols : [])\r\n  ];\r\n\r\n  const exportData = history.map((row) => {\r\n    const flatRow = {};\r\n    selectedCols.forEach((col) => {\r\n      const val = row[col];\r\n      flatRow[col] = val?.seconds\r\n        ? new Date(val.seconds * 1000).toLocaleString()\r\n        : val ?? \"\";\r\n    });\r\n    return flatRow;\r\n  });\r\n\r\n  const worksheet = XLSX.utils.json_to_sheet(exportData);\r\n  const workbook = XLSX.utils.book_new();\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Filtered Export\");\r\n\r\n  const fileName = `FilteredExport_${new Date().toISOString().split(\"T\")[0]}.xlsx`;\r\n  XLSX.writeFile(workbook, fileName);\r\n};\r\n\r\n\r\n  const handleSearch = async () => {\r\n    setIsSearching(true);\r\n    try {\r\n      const fleetRef = collection(db, \"fleet_records\");\r\n      let q;\r\n\r\n          if (searchField === \"Date\") {\r\n  const fromDate = new Date(startDate);\r\n  const toDate = new Date(endDate + \"T23:59:59\");\r\n\r\n  if (fromDate > toDate) {\r\n    toast.warn(\"⚠️ 'From' date cannot be after 'To' date.\");\r\n    setIsSearching(false);\r\n    return;\r\n  }\r\n\r\n  q = query(\r\n    fleetRef,\r\n    ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []),\r\n    where(\"createdAt\", \">=\", fromDate),\r\n    where(\"createdAt\", \"<=\", toDate)\r\n  );\r\n}\r\n else if (searchKey) {\r\n  const key = searchField === \"indentNumber\" ? Number(searchKey) : searchKey;\r\n  q = query(\r\n    fleetRef,\r\n    where(searchField, \"==\", key),\r\n    ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : [])\r\n  );\r\n}\r\n\r\n else {\r\n        toast.warn(\"🔍 Please enter a search value.\");\r\n        setIsSearching(false);\r\n        return;\r\n      }\r\n\r\n      setSearchAttempted(true);\r\n      const snapshot = await getDocs(q);\r\n      const allVersions = [];\r\n      const currentOnly = [];\r\n\r\n      snapshot.forEach((docSnap) => {\r\n        const rawData = { id: docSnap.id, ...docSnap.data() };\r\n        const row = flattenObject(rawData);\r\n\r\n        allVersions.push(row);\r\n        if (row.isCurrent) currentOnly.push(row);\r\n      });\r\n      allVersions.sort((a, b) => {\r\n  if (a.isCurrent && !b.isCurrent) return -1;\r\n  if (!a.isCurrent && b.isCurrent) return 1;\r\n  return b.indentNumber - a.indentNumber;\r\n});\r\n\r\n// ✅ Sort currentOnly also by indentNumber descending\r\ncurrentOnly.sort((a, b) => b.indentNumber - a.indentNumber);\r\n\r\n      if (searchField === \"indentNumber\") {\r\n        setRecords(currentOnly);\r\n        setHistory(allVersions);\r\n      } else {\r\n        setRecords([]);\r\n        setHistory(allVersions);\r\n      }\r\n\r\n      if (snapshot.empty || allVersions.length === 0) {\r\n        toast.info(\"❌ No records found.\");\r\n      }\r\n    } catch (error) {\r\n  toast.error(\"❌ Search failed: \" + error.message);\r\n\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n    const normalize = (val) => {\r\n    if (val === null || val === undefined) return \"\";\r\n    return typeof val === \"object\" && val.seconds\r\n      ? new Date(val.seconds * 1000).toISOString()\r\n      : String(val).trim();\r\n  };\r\n\r\n const getChangedFields = (current, original) => {\r\n  const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\r\n  const changed = [];\r\n\r\n  const flatCurrent = flattenObject(current);\r\n  const flatOriginal = flattenObject(original);\r\n\r\n  for (const key in flatCurrent) {\r\n    if (ignored.includes(key)) continue;\r\n    const currVal = normalize(flatCurrent[key]);\r\n    const origVal = normalize(flatOriginal?.[key]);\r\n    if (currVal !== origVal) changed.push(key);\r\n  }\r\n\r\n  return changed;\r\n};\r\n\r\n\r\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\r\n\r\n\r\n    const handleUpdate = async (row) => {\r\n    try {\r\n      const { id, indentNumber, ...updatedData } = row;\r\n\r\n      const currentDocSnap = await getDocs(\r\n        query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", indentNumber), where(\"isCurrent\", \"==\", true))\r\n      );\r\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\r\n      const oldData = flattenObject(oldDoc?.data() || {});\r\n\r\n\r\n      const cleanData = {};\r\n      const updateLog = [];\r\n      for (const key in updatedData) {\r\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key))\r\n          continue;\r\n        const newVal = updatedData[key] ?? \"\";\r\n        const oldVal = oldData[key] ?? \"\";\r\n        cleanData[key] = newVal;\r\n\r\n        if (String(newVal).trim() !== String(oldVal).trim()) {\r\n          updateLog.push(`Updated ${key}`);\r\n        }\r\n      }\r\n\r\n      if (updateLog.length === 0) {\r\n        toast.info(\"ℹ️ No changes to update.\");\r\n        return;\r\n      }\r\n\r\n      confirmAlert({\r\n  title: 'Confirm Update',\r\n  message: `Do you want to update changes: ${updateLog.join(\", \")}?`,\r\n  buttons: [\r\n    {\r\n      label: 'Yes',\r\n      onClick: async () => {\r\n        const flattenedOld = flattenObject(oldDoc.data());\r\n\r\n        await updateDoc(doc(db, \"fleet_records\", id), {\r\n          ...flattenedOld,\r\n          isCurrent: false,\r\n          expiredAt: new Date(),\r\n          modifiedBy: user.email\r\n        });\r\n\r\n        const newVersion = {\r\n          ...cleanData,\r\n          indentNumber,\r\n          createdAt: new Date(),\r\n          createdBy: user.email,\r\n          isCurrent: true,\r\n          versionDate: new Date(),\r\n          updateDescription: updateLog.join(\", \")\r\n        };\r\n\r\n        await addDoc(collection(db, \"fleet_records\"), newVersion);\r\n        setSearchField(\"indentNumber\");\r\n        setSearchKey(String(indentNumber));\r\n        setSearchAttempted(true);\r\n        setActiveOnly(false); \r\n        toast.success(\"✅ Record updated.\");\r\n\r\n        setTimeout(() => {\r\n          handleSearch();\r\n        }, 500);\r\n      }\r\n    },\r\n    {\r\n      label: 'No'\r\n    }\r\n  ]\r\n});\r\n\r\n\r\n\r\n\r\nreturn;\r\n\r\n\r\n      await updateDoc(doc(db, \"fleet_records\", id), {\r\n        ...oldDoc.data(),\r\n        isCurrent: false,\r\n        expiredAt: new Date(),\r\n        modifiedBy: user.email\r\n      });\r\n\r\n\r\n      const newVersion = {\r\n        ...cleanData,\r\n        indentNumber,\r\n        createdAt: new Date(),\r\n        createdBy: user.email,\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n        updateDescription: updateLog.join(\", \")\r\n      };\r\n\r\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\r\n\r\n      toast.success(\"✅ Record updated.\");\r\n      handleSearch();\r\n    } catch (error) {\r\n      toast.error(\"❌ Update failed: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fleetNumberToDelete) => {\r\n    try {\r\n      const q = query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", fleetNumberToDelete));\r\n      const snapshot = await getDocs(q);\r\n      if (snapshot.empty) {\r\n  toast.error(\"❌ No records found for deletion.\");\r\n  return;\r\n}\r\n\r\n\r\n      confirmAlert({\r\n  title: 'Confirm Deletion',\r\n  message: `Delete all versions of Indent No. ${fleetNumberToDelete}?`,\r\n  buttons: [\r\n    {\r\n      label: 'Yes',\r\n      onClick: async () => {\r\n        await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\r\n        setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n        setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n        toast.success(\"✅ Deleted all versions.\");\r\n      }\r\n    },\r\n    {\r\n      label: 'No'\r\n    }\r\n  ]\r\n});\r\nreturn;\r\n\r\n\r\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\r\n      setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n      setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n      toast.success(\"✅ Deleted all versions.\");\r\n    } catch (err) {\r\n      toast.error(\"❌ Delete failed: \" + err.message);\r\n    }\r\n  };\r\n  if (authLoading) return <p style={{ textAlign: \"center\" }}>Checking authentication...</p>;\r\nif (!user) return <Auth />;\r\n\r\n\r\n  return (\r\n    <div style={{ maxWidth: \"100vw\", overflowX: \"hidden\", padding: \"40px 20px\" }}>\r\n      <div className=\"header\">\r\n        <h2>Fleet Billing Dashboard</h2>\r\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <span className=\"user-email\">Welcome, {user.email}</span>\r\n          <img src=\"/logo.png\" alt=\"Logo\" style={{ height: \"50px\" }} />\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n  onClick={() => {\r\n    // ✅ Clear localStorage before logout\r\n    localStorage.removeItem(\"inProgressFleetNumber\");\r\n    localStorage.removeItem(\"docId\");\r\n    localStorage.removeItem(\"fixedFields\");\r\n    localStorage.removeItem(\"customerFields\");\r\n    localStorage.removeItem(\"vendorFields\");\r\n    localStorage.removeItem(\"podFields\");\r\n\r\n    signOut(auth);\r\n  }}\r\n>\r\n  Logout\r\n</button>\r\n\r\n      <hr />\r\n\r\n      <div style={{ display: \"flex\", justifyContent: \"flex-start\", gap: \"10px\", marginBottom: \"10px\", marginLeft: \"20px\" }}>\r\n  <label htmlFor=\"excel-upload\" style={{ fontWeight: \"bold\", color: \"#007bff\", cursor: \"pointer\" }}>\r\n    📤 Upload Excel\r\n  </label>\r\n  <input\r\n    id=\"excel-upload\"\r\n    type=\"file\"\r\n    accept=\".xlsx, .xls\"\r\n    style={{ display: \"none\" }}\r\n    onChange={(e) => {\r\n      const file = e.target.files[0];\r\n      if (file && /\\.(xlsx|xls)$/.test(file.name)) {\r\n        // ✅ Trigger UploadForm logic manually via custom handler\r\n        // You can lift handleFile from UploadForm and add it here\r\n        toast.success(\"📁 File ready for upload processing.\");\r\n      } else {\r\n        toast.error(\"❌ Please upload a valid Excel file (.xlsx or .xls)\");\r\n      }\r\n    }}\r\n  />\r\n\r\n  <button\r\n  className=\"btn btn-secondary\"\r\n  onClick={() => {\r\n    const sample = finalColumnOrder.reduce((obj, key) => {\r\n      obj[columnLabels[key] || key] = \"\"; // show proper label in Excel\r\n      return obj;\r\n    }, {});\r\n    const sheet = XLSX.utils.json_to_sheet([sample]);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, sheet, \"Template\");\r\n    XLSX.writeFile(wb, \"FleetUploadTemplate.xlsx\");\r\n  }}\r\n>\r\n  ⬇️ Download Template\r\n</button>\r\n\r\n</div>\r\n\r\n\r\n      <ManualEntryForm\r\n      onAddRow={(row, addToHistory) => {\r\n        setRecords([row]);\r\n        if (addToHistory) setHistory([row]);\r\n\r\n        // ✅ Store latest indentNumber to maintain search context\r\n        setSearchField(\"indentNumber\");\r\n        setSearchKey(String(row.indentNumber));\r\n        setSearchAttempted(true);\r\n        setActiveOnly(false);\r\n      }}\r\n    />\r\n\r\n\r\n      <hr />\r\n      <h4>Search Existing Records</h4>\r\n<div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"10px\", alignItems: \"center\", justifyContent: \"space-between\", width: \"100%\" }}>\r\n  <div style={{ display: \"flex\", gap: \"10px\", flexWrap: \"wrap\", alignItems: \"center\" }}>\r\n    <select value={searchField} onChange={(e) => {\r\n      setSearchField(e.target.value);\r\n      setSearchKey(\"\");\r\n      setStartDate(\"\");\r\n      setEndDate(\"\");\r\n    }}>\r\n      <option value=\"indentNumber\">Indent Number</option>\r\n      <option value=\"Broker\">Broker</option>\r\n      <option value=\"Date\">Date</option>\r\n    </select>\r\n\r\n    {searchField === \"Date\" ? (\r\n      <>\r\n        <label>From:</label>\r\n        <input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\r\n        <label>To:</label>\r\n        <input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\r\n      </>\r\n    ) : (\r\n      <input\r\n        type=\"text\"\r\n        value={searchKey}\r\n        onChange={(e) => setSearchKey(e.target.value)}\r\n        placeholder=\"Search key\"\r\n        style={{ flex: 1, width: \"250px\" }}\r\n      />\r\n    )}\r\n\r\n    <div style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}>\r\n    <label style={{  display: \"flex\", alignItems: \"center\", fontSize: \"14px\", marginBottom: 0 }}>\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={activeOnly}\r\n        onChange={(e) => setActiveOnly(e.target.checked)}\r\n        style={{ marginRight: \"5px\" }}\r\n      />\r\n      Show only active\r\n    </label>\r\n  </div>\r\n\r\n  <button className=\"btn btn-primary\" onClick={handleSearch} disabled={isSearching}>\r\n    {isSearching ? \"Searching...\" : \"Search\"}\r\n  </button>\r\n</div></div>\r\n\r\n<hr />\r\n\r\n\r\n\r\n      {searchField === \"indentNumber\" && records.length > 0 && (\r\n        <>\r\n          <h4>Editable Current Records</h4>\r\n          <div className=\"table-scroll-x\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  {finalColumnOrder.map((col) => (\r\n                    <th key={col}>{columnLabels[col] || col}</th>\r\n                  ))}\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {records.map((row, rowIndex) => (\r\n                  <tr key={rowIndex}>\r\n                    {finalColumnOrder.map((col, j) => (\r\n                      <td key={j}>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={\r\n                            typeof row[col] === \"object\" && row[col]?.seconds\r\n                              ? (col === \"date\"\r\n            ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\")\r\n            : new Date(row[col].seconds * 1000).toLocaleString()\r\n          )\r\n        : String(row[col] ?? \"\")\r\n    }\r\n                          onChange={(e) => {\r\n                            const updated = [...records];\r\n                            updated[rowIndex][col] = e.target.value;\r\n                            setRecords(updated);\r\n                          }}\r\n                          readOnly={[\"indentNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col)}\r\n                          style={{ width: \"140px\" }}\r\n                        />\r\n                      </td>\r\n                    ))}\r\n                    <td>\r\n                      <button className=\"save\" onClick={() => handleUpdate(row)}>\r\n                        Save\r\n                      </button>\r\n                      <button className=\"delete\" onClick={() => handleDelete(row.indentNumber)}>\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {history.length > 0 && (\r\n        <>\r\n          <hr />\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n  <h4>🔍 Full Version History</h4>\r\n  <div style={{ display: \"flex\", gap: \"20px\", alignItems: \"center\" }}>\r\n  <label>\r\n    <input type=\"checkbox\" checked={includeCustomer} onChange={(e) => setIncludeCustomer(e.target.checked)} />\r\n    Include Customer\r\n  </label>\r\n  <label>\r\n    <input type=\"checkbox\" checked={includeVendor} onChange={(e) => setIncludeVendor(e.target.checked)} />\r\n    Include Vendor\r\n  </label>\r\n  <label>\r\n    <input type=\"checkbox\" checked={includePOD} onChange={(e) => setIncludePOD(e.target.checked)} />\r\n    Include POD\r\n  </label>\r\n  <button onClick={handleExportToExcel} disabled={history.length === 0} className=\"export-button\">\r\n    ⬇️ Export Selected\r\n  </button>\r\n</div>\r\n\r\n</div>\r\n        <div className=\"table-scroll-x\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                {finalColumnOrder.map((col) => (\r\n                  <th key={col} className=\"tight-header\">{columnLabels[col] || col}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {[...history]\r\n                .sort((a, b) => {\r\n                  if (a.isCurrent) return -1;\r\n                  if (b.isCurrent) return 1;\r\n                  const aTime = a.expiredAt?.seconds || 0;\r\n                  const bTime = b.expiredAt?.seconds || 0;\r\n                  return bTime - aTime;\r\n                })\r\n                .map((row, i) => (\r\n                  <tr key={i}>\r\n                    {finalColumnOrder.map((col, j) => (\r\n                      <td key={j}>\r\n                        {typeof row[col] === \"object\" && row[col]?.seconds\r\n              ? (col === \"date\"\r\n                  ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\")\r\n                  : new Date(row[col].seconds * 1000).toLocaleString())\r\n              : String(row[col] ?? \"\")}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        </>\r\n      )}\r\n\r\n      {searchAttempted && !isSearching && records.length === 0 && history.length === 0 && (\r\n        <p style={{ textAlign: \"center\", color: \"#888\", marginTop: \"30px\" }}>No records to display.</p>\r\n      )}\r\n\r\n      <ToastContainer position=\"bottom-right\" autoClose={3000} />\r\n      <p style={{ textAlign: \"center\", marginTop: \"30px\", color: \"#666\" }}>© 2025 Fleet Billing System</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}