{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anupp\\\\Downloads\\\\fleet-billing-app\\\\fleet-billing-app\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { collection, query, where, getDocs, getDoc, updateDoc, deleteDoc, doc, addDoc } from \"firebase/firestore\";\nimport { auth, db } from \"./firebase\";\nimport Auth from \"./components/Auth\";\nimport ManualEntryForm from \"./components/ManualEntryForm\";\nimport UploadForm from \"./components/UploadForm\";\nimport \"./App.css\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nconst flattenObject = (obj, prefix = \"\") => {\n  let result = {};\n  for (const key in obj) {\n    const value = obj[key];\n    const fullKey = prefix ? `${prefix}.${key}` : key;\n    if (value && typeof value === \"object\" && !value.seconds) {\n      Object.assign(result, flattenObject(value, fullKey));\n    } else {\n      result[fullKey] = value;\n    }\n  }\n  return result;\n};\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [searchField, setSearchField] = useState(\"fleetNumber\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [originalRecords, setOriginalRecords] = useState({});\n  const [isSearching, setIsSearching] = useState(false);\n  const [isExporting, setIsExporting] = useState(false);\n  const [searchAttempted, setSearchAttempted] = useState(false);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => {\n      setUser(currentUser);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleSearch = async () => {\n    setIsSearching(true);\n    try {\n      const fleetRef = collection(db, \"fleet_records\");\n      let q;\n      if (searchField === \"Date\") {\n        if (!startDate || !endDate) {\n          toast.warn(\"üìÖ Please select both From and To dates.\");\n          setIsSearching(false);\n          return;\n        }\n        const fromDate = new Date(startDate);\n        const toDate = new Date(endDate + \"T23:59:59\");\n        if (fromDate > toDate) {\n          toast.warn(\"‚ö†Ô∏è 'From' date cannot be after 'To' date.\");\n          setIsSearching(false);\n          return;\n        }\n        q = query(fleetRef, where(\"createdAt\", \">=\", fromDate), where(\"createdAt\", \"<=\", toDate));\n      } else if (searchKey) {\n        const key = searchField === \"fleetNumber\" ? Number(searchKey) : searchKey;\n        q = query(fleetRef, where(searchField, \"==\", key));\n      } else {\n        toast.warn(\"üîç Please enter a search value.\");\n        setIsSearching(false);\n        return;\n      }\n      setSearchAttempted(true);\n      const snapshot = await getDocs(q);\n      const allVersions = [];\n      const currentOnly = [];\n      snapshot.forEach(docSnap => {\n        const rawData = {\n          id: docSnap.id,\n          ...docSnap.data()\n        };\n        const row = flattenObject(rawData);\n        allVersions.push(row);\n        if (row.isCurrent) currentOnly.push(row);\n      });\n      if (searchField === \"fleetNumber\") {\n        setRecords(currentOnly);\n        setHistory(allVersions);\n      } else {\n        setRecords([]);\n        setHistory(allVersions);\n      }\n      if (snapshot.empty || allVersions.length === 0) {\n        toast.info(\"‚ùå No records found.\");\n      }\n    } catch (error) {\n      toast.error(\"‚ùå Search failed: \" + error.message);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const normalize = val => {\n    if (val === null || val === undefined) return \"\";\n    return typeof val === \"object\" && val.seconds ? new Date(val.seconds * 1000).toISOString() : String(val).trim();\n  };\n  const getChangedFields = (current, original) => {\n    const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\n    const changed = [];\n    for (const key in current) {\n      if (ignored.includes(key)) continue;\n      const currVal = normalize(current[key]);\n      const origVal = normalize(original === null || original === void 0 ? void 0 : original[key]);\n      if (currVal !== origVal) changed.push(key);\n    }\n    return changed;\n  };\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\n  const handleUpdate = async row => {\n    try {\n      const {\n        id,\n        fleetNumber,\n        ...updatedData\n      } = row;\n      const currentDocSnap = await getDocs(query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumber), where(\"isCurrent\", \"==\", true)));\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\n      const oldData = (oldDoc === null || oldDoc === void 0 ? void 0 : oldDoc.data()) || {};\n      const cleanData = {};\n      const updateLog = [];\n      for (const key in updatedData) {\n        var _updatedData$key, _oldData$key;\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key)) continue;\n        const newVal = (_updatedData$key = updatedData[key]) !== null && _updatedData$key !== void 0 ? _updatedData$key : \"\";\n        const oldVal = (_oldData$key = oldData[key]) !== null && _oldData$key !== void 0 ? _oldData$key : \"\";\n        cleanData[key] = newVal;\n        if (String(newVal).trim() !== String(oldVal).trim()) {\n          updateLog.push(`Updated ${key}`);\n        }\n      }\n      if (updateLog.length === 0) {\n        toast.info(\"‚ÑπÔ∏è No changes to update.\");\n        return;\n      }\n      const confirm = window.confirm(`Update changes: ${updateLog.join(\", \")}?`);\n      if (!confirm) return;\n      await updateDoc(doc(db, \"fleet_records\", id), {\n        isCurrent: false,\n        expiredAt: new Date(),\n        modifiedBy: user.email\n      });\n      const newVersion = {\n        ...cleanData,\n        fleetNumber,\n        createdAt: new Date(),\n        createdBy: user.email,\n        isCurrent: true,\n        versionDate: new Date(),\n        updateDescription: updateLog.join(\", \")\n      };\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\n      toast.success(\"‚úÖ Record updated.\");\n      handleSearch();\n    } catch (error) {\n      toast.error(\"‚ùå Update failed: \" + error.message);\n    }\n  };\n  const handleDelete = async fleetNumberToDelete => {\n    try {\n      const q = query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumberToDelete));\n      const snapshot = await getDocs(q);\n      if (snapshot.empty) return alert(\"‚ùå No records found.\");\n      const confirmDelete = window.confirm(`Delete all versions of fleet ${fleetNumberToDelete}?`);\n      if (!confirmDelete) return;\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\n      setRecords(prev => prev.filter(r => r.fleetNumber !== fleetNumberToDelete));\n      setHistory(prev => prev.filter(r => r.fleetNumber !== fleetNumberToDelete));\n      toast.success(\"‚úÖ Deleted all versions.\");\n    } catch (err) {\n      toast.error(\"‚ùå Delete failed: \" + err.message);\n    }\n  };\n  if (!user) return /*#__PURE__*/React.createElement(Auth, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: \"100vw\",\n      overflowX: \"hidden\",\n      padding: \"40px 20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }\n  }, \"Fleet Billing Dashboard\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"user-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/logo.png\",\n    alt: \"Logo\",\n    style: {\n      height: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => signOut(auth),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }\n  }, \"Logout\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(UploadForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ManualEntryForm, {\n    onAddRow: (row, addToHistory) => {\n      setRecords([row]);\n      if (addToHistory) setHistory([row]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }, \"Search Existing Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: searchField,\n    onChange: e => {\n      setSearchField(e.target.value);\n      setSearchKey(\"\");\n      setStartDate(\"\");\n      setEndDate(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"fleetNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, \"Fleet Number\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Broker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }\n  }, \"Broker\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 11\n    }\n  }, \"Date\")), searchField === \"Date\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, \"From:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: startDate,\n    onChange: e => setStartDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, \"To:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: endDate,\n    onChange: e => setEndDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: searchKey,\n    onChange: e => setSearchKey(e.target.value),\n    placeholder: \"Search key\",\n    style: {\n      margin: \"0 10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSearch,\n    style: {\n      marginLeft: 10\n    },\n    disabled: isSearching,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }\n  }, isSearching ? \"Searching...\" : \"Search\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }\n  }), searchField === \"fleetNumber\" && records.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  }, \"Editable Current Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }, [\"fleetNumber\", ...Object.keys(records[0]).filter(k => k !== \"fleetNumber\")].map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 19\n    }\n  }, col.replaceAll(\".\", \" ‚Üí \"))), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 15\n    }\n  }, records.map((row, rowIndex) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: rowIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 19\n    }\n  }, [\"fleetNumber\", ...Object.keys(row).filter(k => k !== \"fleetNumber\").sort()].map(col => {\n    var _row$col, _row$col2;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: col,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: typeof row[col] === \"object\" && ((_row$col = row[col]) === null || _row$col === void 0 ? void 0 : _row$col.seconds) ? new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col2 = row[col]) !== null && _row$col2 !== void 0 ? _row$col2 : \"\"),\n      onChange: e => {\n        const updated = [...records];\n        updated[rowIndex][col] = e.target.value;\n        setRecords(updated);\n      },\n      readOnly: [\"fleetNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col),\n      style: {\n        width: \"140px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 27\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"save\",\n    disabled: !hasMeaningfulChanges(row, originalRecords[row.id]),\n    onClick: () => handleUpdate(row),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 23\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete\",\n    onClick: () => handleDelete(row.fleetNumber),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 23\n    }\n  }, \"Delete\")))))))), history.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 11\n    }\n  }, \"\\uD83D\\uDD0D Full Version History\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 17\n    }\n  }, [\"fleetNumber\", ...[...new Set(history.flatMap(r => Object.keys(r)))].filter(k => k !== \"fleetNumber\").sort()].map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 21\n    }\n  }, col.replaceAll(\".\", \" ‚Üí \"))))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 15\n    }\n  }, [...history].sort((a, b) => {\n    var _a$expiredAt, _b$expiredAt;\n    if (a.isCurrent) return -1;\n    if (b.isCurrent) return 1;\n    const aTime = ((_a$expiredAt = a.expiredAt) === null || _a$expiredAt === void 0 ? void 0 : _a$expiredAt.seconds) || 0;\n    const bTime = ((_b$expiredAt = b.expiredAt) === null || _b$expiredAt === void 0 ? void 0 : _b$expiredAt.seconds) || 0;\n    return bTime - aTime;\n  }).map((row, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 21\n    }\n  }, [\"fleetNumber\", ...[...new Set(history.flatMap(r => Object.keys(r)))].filter(k => k !== \"fleetNumber\").sort()].map((col, j) => {\n    var _row$col3, _row$col4;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: j,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 25\n      }\n    }, typeof row[col] === \"object\" && ((_row$col3 = row[col]) === null || _row$col3 === void 0 ? void 0 : _row$col3.seconds) ? new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col4 = row[col]) !== null && _row$col4 !== void 0 ? _row$col4 : \"\"));\n  }))))))), searchAttempted && !isSearching && records.length === 0 && history.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\",\n      color: \"#888\",\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 9\n    }\n  }, \"No records to display.\"), /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"30px\",\n      color: \"#666\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }\n  }, \"\\xA9 2025 Fleet Billing System\"));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","onAuthStateChanged","signOut","collection","query","where","getDocs","getDoc","updateDoc","deleteDoc","doc","addDoc","auth","db","Auth","ManualEntryForm","UploadForm","toast","ToastContainer","flattenObject","obj","prefix","result","key","value","fullKey","seconds","Object","assign","App","user","setUser","records","setRecords","history","setHistory","searchKey","setSearchKey","searchField","setSearchField","startDate","setStartDate","endDate","setEndDate","originalRecords","setOriginalRecords","isSearching","setIsSearching","isExporting","setIsExporting","searchAttempted","setSearchAttempted","unsubscribe","currentUser","handleSearch","fleetRef","q","warn","fromDate","Date","toDate","Number","snapshot","allVersions","currentOnly","forEach","docSnap","rawData","id","data","row","push","isCurrent","empty","length","info","error","message","normalize","val","undefined","toISOString","String","trim","getChangedFields","current","original","ignored","changed","includes","currVal","origVal","hasMeaningfulChanges","curr","orig","handleUpdate","fleetNumber","updatedData","currentDocSnap","oldDoc","docs","find","oldData","cleanData","updateLog","_updatedData$key","_oldData$key","newVal","oldVal","confirm","window","join","expiredAt","modifiedBy","email","newVersion","createdAt","createdBy","versionDate","updateDescription","success","handleDelete","fleetNumberToDelete","alert","confirmDelete","Promise","all","map","prev","filter","r","err","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","overflowX","padding","className","display","alignItems","src","alt","height","onClick","onAddRow","addToHistory","onChange","e","target","Fragment","marginLeft","type","placeholder","margin","disabled","keys","k","col","replaceAll","rowIndex","sort","_row$col","_row$col2","toLocaleString","updated","readOnly","width","Set","flatMap","a","b","_a$expiredAt","_b$expiredAt","aTime","bTime","i","j","_row$col3","_row$col4","textAlign","color","marginTop","position","autoClose"],"sources":["C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  addDoc,\r\n} from \"firebase/firestore\";\r\nimport { auth, db } from \"./firebase\";\r\nimport Auth from \"./components/Auth\";\r\nimport ManualEntryForm from \"./components/ManualEntryForm\";\r\nimport UploadForm from \"./components/UploadForm\";\r\nimport \"./App.css\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst flattenObject = (obj, prefix = \"\") => {\r\n  let result = {};\r\n  for (const key in obj) {\r\n    const value = obj[key];\r\n    const fullKey = prefix ? `${prefix}.${key}` : key;\r\n    if (value && typeof value === \"object\" && !value.seconds) {\r\n      Object.assign(result, flattenObject(value, fullKey));\r\n    } else {\r\n      result[fullKey] = value;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [records, setRecords] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  const [searchField, setSearchField] = useState(\"fleetNumber\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [originalRecords, setOriginalRecords] = useState({});\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [searchAttempted, setSearchAttempted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n\r\n  const handleSearch = async () => {\r\n    setIsSearching(true);\r\n    try {\r\n      const fleetRef = collection(db, \"fleet_records\");\r\n      let q;\r\n\r\n      if (searchField === \"Date\") {\r\n        if (!startDate || !endDate) {\r\n          toast.warn(\"üìÖ Please select both From and To dates.\");\r\n          setIsSearching(false);\r\n          return;\r\n        }\r\n\r\n        const fromDate = new Date(startDate);\r\n        const toDate = new Date(endDate + \"T23:59:59\");\r\n\r\n        if (fromDate > toDate) {\r\n          toast.warn(\"‚ö†Ô∏è 'From' date cannot be after 'To' date.\");\r\n          setIsSearching(false);\r\n          return;\r\n        }\r\n\r\n        q = query(fleetRef, where(\"createdAt\", \">=\", fromDate), where(\"createdAt\", \"<=\", toDate));\r\n      } else if (searchKey) {\r\n        const key = searchField === \"fleetNumber\" ? Number(searchKey) : searchKey;\r\n        q = query(fleetRef, where(searchField, \"==\", key));\r\n      } else {\r\n        toast.warn(\"üîç Please enter a search value.\");\r\n        setIsSearching(false);\r\n        return;\r\n      }\r\n\r\n      setSearchAttempted(true);\r\n      const snapshot = await getDocs(q);\r\n      const allVersions = [];\r\n      const currentOnly = [];\r\n\r\n      snapshot.forEach((docSnap) => {\r\n        const rawData = { id: docSnap.id, ...docSnap.data() };\r\n        const row = flattenObject(rawData);\r\n\r\n        allVersions.push(row);\r\n        if (row.isCurrent) currentOnly.push(row);\r\n      });\r\n\r\n      if (searchField === \"fleetNumber\") {\r\n        setRecords(currentOnly);\r\n        setHistory(allVersions);\r\n      } else {\r\n        setRecords([]);\r\n        setHistory(allVersions);\r\n      }\r\n\r\n      if (snapshot.empty || allVersions.length === 0) {\r\n        toast.info(\"‚ùå No records found.\");\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"‚ùå Search failed: \" + error.message);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n    const normalize = (val) => {\r\n    if (val === null || val === undefined) return \"\";\r\n    return typeof val === \"object\" && val.seconds\r\n      ? new Date(val.seconds * 1000).toISOString()\r\n      : String(val).trim();\r\n  };\r\n\r\n  const getChangedFields = (current, original) => {\r\n    const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\r\n    const changed = [];\r\n    for (const key in current) {\r\n      if (ignored.includes(key)) continue;\r\n      const currVal = normalize(current[key]);\r\n      const origVal = normalize(original?.[key]);\r\n      if (currVal !== origVal) changed.push(key);\r\n    }\r\n    return changed;\r\n  };\r\n\r\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\r\n\r\n\r\n    const handleUpdate = async (row) => {\r\n    try {\r\n      const { id, fleetNumber, ...updatedData } = row;\r\n\r\n      const currentDocSnap = await getDocs(\r\n        query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumber), where(\"isCurrent\", \"==\", true))\r\n      );\r\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\r\n      const oldData = oldDoc?.data() || {};\r\n\r\n      const cleanData = {};\r\n      const updateLog = [];\r\n      for (const key in updatedData) {\r\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key))\r\n          continue;\r\n        const newVal = updatedData[key] ?? \"\";\r\n        const oldVal = oldData[key] ?? \"\";\r\n        cleanData[key] = newVal;\r\n\r\n        if (String(newVal).trim() !== String(oldVal).trim()) {\r\n          updateLog.push(`Updated ${key}`);\r\n        }\r\n      }\r\n\r\n      if (updateLog.length === 0) {\r\n        toast.info(\"‚ÑπÔ∏è No changes to update.\");\r\n        return;\r\n      }\r\n\r\n      const confirm = window.confirm(`Update changes: ${updateLog.join(\", \")}?`);\r\n      if (!confirm) return;\r\n\r\n      await updateDoc(doc(db, \"fleet_records\", id), {\r\n        isCurrent: false,\r\n        expiredAt: new Date(),\r\n        modifiedBy: user.email\r\n      });\r\n\r\n      const newVersion = {\r\n        ...cleanData,\r\n        fleetNumber,\r\n        createdAt: new Date(),\r\n        createdBy: user.email,\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n        updateDescription: updateLog.join(\", \")\r\n      };\r\n\r\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\r\n\r\n      toast.success(\"‚úÖ Record updated.\");\r\n      handleSearch();\r\n    } catch (error) {\r\n      toast.error(\"‚ùå Update failed: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fleetNumberToDelete) => {\r\n    try {\r\n      const q = query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumberToDelete));\r\n      const snapshot = await getDocs(q);\r\n      if (snapshot.empty) return alert(\"‚ùå No records found.\");\r\n\r\n      const confirmDelete = window.confirm(`Delete all versions of fleet ${fleetNumberToDelete}?`);\r\n      if (!confirmDelete) return;\r\n\r\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\r\n      setRecords(prev => prev.filter(r => r.fleetNumber !== fleetNumberToDelete));\r\n      setHistory(prev => prev.filter(r => r.fleetNumber !== fleetNumberToDelete));\r\n      toast.success(\"‚úÖ Deleted all versions.\");\r\n    } catch (err) {\r\n      toast.error(\"‚ùå Delete failed: \" + err.message);\r\n    }\r\n  };\r\n  if (!user) return <Auth />;\r\n\r\n  return (\r\n    <div style={{ maxWidth: \"100vw\", overflowX: \"hidden\", padding: \"40px 20px\" }}>\r\n      <div className=\"header\">\r\n        <h2>Fleet Billing Dashboard</h2>\r\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <span className=\"user-email\">Welcome, {user.email}</span>\r\n          <img src=\"/logo.png\" alt=\"Logo\" style={{ height: \"50px\" }} />\r\n        </div>\r\n      </div>\r\n\r\n      <button onClick={() => signOut(auth)}>Logout</button>\r\n      <hr />\r\n\r\n      <UploadForm />\r\n\r\n      <ManualEntryForm\r\n        onAddRow={(row, addToHistory) => {\r\n          setRecords([row]);\r\n          if (addToHistory) setHistory([row]);\r\n        }}\r\n      />\r\n\r\n      <hr />\r\n      <h4>Search Existing Records</h4>\r\n      <div className=\"search-bar\">\r\n        <select value={searchField} onChange={(e) => {\r\n          setSearchField(e.target.value);\r\n          setSearchKey(\"\");\r\n          setStartDate(\"\");\r\n          setEndDate(\"\");\r\n        }}>\r\n          <option value=\"fleetNumber\">Fleet Number</option>\r\n          <option value=\"Broker\">Broker</option>\r\n          <option value=\"Date\">Date</option>\r\n        </select>\r\n\r\n        {searchField === \"Date\" ? (\r\n          <>\r\n            <label style={{ marginLeft: 10 }}>From:</label>\r\n            <input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\r\n            <label style={{ marginLeft: 10 }}>To:</label>\r\n            <input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\r\n          </>\r\n        ) : (\r\n          <input\r\n            type=\"text\"\r\n            value={searchKey}\r\n            onChange={(e) => setSearchKey(e.target.value)}\r\n            placeholder=\"Search key\"\r\n            style={{ margin: \"0 10px\" }}\r\n          />\r\n        )}\r\n\r\n        <button onClick={handleSearch} style={{ marginLeft: 10 }} disabled={isSearching}>\r\n          {isSearching ? \"Searching...\" : \"Search\"}\r\n        </button>\r\n      </div>\r\n\r\n      <hr />\r\n\r\n      {searchField === \"fleetNumber\" && records.length > 0 && (\r\n        <>\r\n          <h4>Editable Current Records</h4>\r\n          <div className=\"table-scroll-x\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  {[\"fleetNumber\", ...Object.keys(records[0]).filter(k => k !== \"fleetNumber\")].map((col) => (\r\n                  <th key={col}>{col.replaceAll(\".\", \" ‚Üí \")}</th>\r\n                  ))}\r\n\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {records.map((row, rowIndex) => (\r\n                  <tr key={rowIndex}>\r\n                    {[\r\n                      \"fleetNumber\",\r\n                        ...Object.keys(row).filter((k) => k !== \"fleetNumber\").sort(),\r\n                      ].map((col) => (\r\n                        <td key={col}>\r\n                          <input\r\n                            type=\"text\"\r\n                            value={\r\n                              typeof row[col] === \"object\" && row[col]?.seconds\r\n                                ? new Date(row[col].seconds * 1000).toLocaleString()\r\n                                : String(row[col] ?? \"\")\r\n                            }\r\n                            onChange={(e) => {\r\n                              const updated = [...records];\r\n                              updated[rowIndex][col] = e.target.value;\r\n                              setRecords(updated);\r\n                            }}\r\n                            readOnly={[\"fleetNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col)}\r\n                            style={{ width: \"140px\" }}\r\n                          />\r\n                        </td>\r\n                      ))}\r\n\r\n                    <td>\r\n                      <button\r\n                        className=\"save\"\r\n                        disabled={!hasMeaningfulChanges(row, originalRecords[row.id])}\r\n                        onClick={() => handleUpdate(row)}\r\n                      >\r\n                        Save\r\n                      </button>\r\n                      <button className=\"delete\" onClick={() => handleDelete(row.fleetNumber)}>\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {history.length > 0 && (\r\n        <>\r\n          <hr />\r\n          <h4>üîç Full Version History</h4>\r\n          <div className=\"table-scroll-x\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  {[\r\n                    \"fleetNumber\",\r\n                    ...[...new Set(history.flatMap((r) => Object.keys(r)))].filter((k) => k !== \"fleetNumber\").sort(),\r\n                  ].map((col) => (\r\n                    <th key={col}>{col.replaceAll(\".\", \" ‚Üí \")}</th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {[...history]\r\n                  .sort((a, b) => {\r\n                    if (a.isCurrent) return -1;\r\n                    if (b.isCurrent) return 1;\r\n                    const aTime = a.expiredAt?.seconds || 0;\r\n                    const bTime = b.expiredAt?.seconds || 0;\r\n                    return bTime - aTime;\r\n                  })\r\n                  .map((row, i) => (\r\n                    <tr key={i}>\r\n                      {[\r\n                        \"fleetNumber\",\r\n                        ...[...new Set(history.flatMap((r) => Object.keys(r)))].filter((k) => k !== \"fleetNumber\").sort(),\r\n                      ].map((col, j) => (\r\n                        <td key={j}>\r\n                          {typeof row[col] === \"object\" && row[col]?.seconds\r\n                            ? new Date(row[col].seconds * 1000).toLocaleString()\r\n                            : String(row[col] ?? \"\")}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {searchAttempted && !isSearching && records.length === 0 && history.length === 0 && (\r\n        <p style={{ textAlign: \"center\", color: \"#888\", marginTop: \"30px\" }}>No records to display.</p>\r\n      )}\r\n\r\n      <ToastContainer position=\"bottom-right\" autoClose={3000} />\r\n      <p style={{ textAlign: \"center\", marginTop: \"30px\", color: \"#666\" }}>¬© 2025 Fleet Billing System</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}