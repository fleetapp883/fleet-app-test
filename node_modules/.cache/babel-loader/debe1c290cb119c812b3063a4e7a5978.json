{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anupp\\\\Downloads\\\\fleet-billing-app\\\\fleet-billing-app\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { collection, query, where, getDocs, getDoc, updateDoc, deleteDoc, doc, addDoc } from \"firebase/firestore\";\nimport { auth, db } from \"./firebase\";\nimport Auth from \"./components/Auth\";\nimport ManualEntryForm from \"./components/ManualEntryForm\";\nimport UploadForm from \"./components/UploadForm\";\nimport \"./App.css\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport * as XLSX from \"xlsx\";\nconst finalColumnOrder = [\"indentNumber\", \"date\", \"months\", \"origin\", \"destination\", \"customer\", \"customerType\", \"vehicleNo\", \"vendor\", \"salesRate\", \"buyRate\", \"createdAt\", \"createdBy\", \"versionDate\", \"isCurrent\", \"updateDescription\", \"expiredAt\",\n// Customer Master\n\"customerMaster.toBeAdvance\", \"customerMaster.advanceReceived\", \"customerMaster.advDeviation\", \"customerMaster.advanceRecDate\", \"customerMaster.validatedAdvanceUTRDescription\", \"customerMaster.validatedAdvanceAmount\", \"customerMaster.balance\", \"customerMaster.processingCharges\", \"customerMaster.inwardMisCharges\", \"customerMaster.outwardMisCharges\", \"customerMaster.balanceReceived\", \"customerMaster.remainingBalance\", \"customerMaster.balanceRecDate\", \"customerMaster.validatedBalanceUTR\", \"customerMaster.validatedBalanceUTRAmount\",\n// Vendor Master\n\"vendorMaster.vendorOutwardPayment\", \"vendorMaster.paidAmount\", \"vendorMaster.balancePending\", \"vendorMaster.vendorRemark\",\n// POD Master\n\"podMaster.podVendorDate\", \"podMaster.podSendToCustomerDate\", \"podMaster.docNo\", \"podMaster.podCustomerRec\", \"podMaster.today\", \"podMaster.balanceOverdueDays\", \"podMaster.toBeCollectedAmount\"];\nconst flattenObject = (obj, prefix = \"\") => {\n  let result = {};\n  for (const key in obj) {\n    const value = obj[key];\n    const fullKey = prefix ? `${prefix}.${key}` : key;\n    if (value && typeof value === \"object\" && !value.seconds) {\n      Object.assign(result, flattenObject(value, fullKey));\n    } else {\n      result[fullKey] = value;\n    }\n  }\n  return result;\n};\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [authLoading, setAuthLoading] = useState(true);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [searchField, setSearchField] = useState(\"indentNumber\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [originalRecords, setOriginalRecords] = useState({});\n  const [isSearching, setIsSearching] = useState(false);\n  const [isExporting, setIsExporting] = useState(false);\n  const [searchAttempted, setSearchAttempted] = useState(false);\n  const [activeOnly, setActiveOnly] = useState(false);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => {\n      setUser(currentUser);\n      setAuthLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleExportToExcel = () => {\n    if (history.length === 0) {\n      toast.info(\"❌ No history data to export.\");\n      return;\n    }\n\n    // Define columns to include\n    const fixedCols = finalColumnOrder.slice(0, 17); // First 17 are fixed\n    const customerCols = finalColumnOrder.slice(17, 32);\n    const vendorCols = finalColumnOrder.slice(32, 36);\n    const podCols = finalColumnOrder.slice(36);\n    const selectedCols = [...fixedCols, ...(includeCustomer ? customerCols : []), ...(includeVendor ? vendorCols : []), ...(includePOD ? podCols : [])];\n    const exportData = history.map(row => {\n      const flatRow = {};\n      selectedCols.forEach(col => {\n        const val = row[col];\n        flatRow[col] = (val === null || val === void 0 ? void 0 : val.seconds) ? new Date(val.seconds * 1000).toLocaleString() : val !== null && val !== void 0 ? val : \"\";\n      });\n      return flatRow;\n    });\n    const worksheet = XLSX.utils.json_to_sheet(exportData);\n    const workbook = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Filtered Export\");\n    const fileName = `FilteredExport_${new Date().toISOString().split(\"T\")[0]}.xlsx`;\n    XLSX.writeFile(workbook, fileName);\n  };\n  const handleSearch = async () => {\n    setIsSearching(true);\n    try {\n      const fleetRef = collection(db, \"fleet_records\");\n      let q;\n      if (searchField === \"Date\") {\n        const fromDate = new Date(startDate);\n        const toDate = new Date(endDate + \"T23:59:59\");\n        if (fromDate > toDate) {\n          toast.warn(\"⚠️ 'From' date cannot be after 'To' date.\");\n          setIsSearching(false);\n          return;\n        }\n        q = query(fleetRef, ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []), where(\"createdAt\", \">=\", fromDate), where(\"createdAt\", \"<=\", toDate));\n      } else if (searchKey) {\n        const key = searchField === \"indentNumber\" ? Number(searchKey) : searchKey;\n        q = query(fleetRef, where(searchField, \"==\", key), ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []));\n      } else {\n        toast.warn(\"🔍 Please enter a search value.\");\n        setIsSearching(false);\n        return;\n      }\n      setSearchAttempted(true);\n      const snapshot = await getDocs(q);\n      const allVersions = [];\n      const currentOnly = [];\n      snapshot.forEach(docSnap => {\n        const rawData = {\n          id: docSnap.id,\n          ...docSnap.data()\n        };\n        const row = flattenObject(rawData);\n        allVersions.push(row);\n        if (row.isCurrent) currentOnly.push(row);\n      });\n      allVersions.sort((a, b) => {\n        if (a.isCurrent && !b.isCurrent) return -1;\n        if (!a.isCurrent && b.isCurrent) return 1;\n        return b.indentNumber - a.indentNumber;\n      });\n\n      // ✅ Sort currentOnly also by indentNumber descending\n      currentOnly.sort((a, b) => b.indentNumber - a.indentNumber);\n      if (searchField === \"indentNumber\") {\n        setRecords(currentOnly);\n        setHistory(allVersions);\n      } else {\n        setRecords([]);\n        setHistory(allVersions);\n      }\n      if (snapshot.empty || allVersions.length === 0) {\n        toast.info(\"❌ No records found.\");\n      }\n    } catch (error) {\n      console.error(\"🔥 Full Firestore Error:\", error); // ✅ This will print full error in browser console\n      toast.error(\"❌ Search failed: \" + error.message);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const normalize = val => {\n    if (val === null || val === undefined) return \"\";\n    return typeof val === \"object\" && val.seconds ? new Date(val.seconds * 1000).toISOString() : String(val).trim();\n  };\n  const getChangedFields = (current, original) => {\n    const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\n    const changed = [];\n    const flatCurrent = flattenObject(current);\n    const flatOriginal = flattenObject(original);\n    for (const key in flatCurrent) {\n      if (ignored.includes(key)) continue;\n      const currVal = normalize(flatCurrent[key]);\n      const origVal = normalize(flatOriginal === null || flatOriginal === void 0 ? void 0 : flatOriginal[key]);\n      if (currVal !== origVal) changed.push(key);\n    }\n    return changed;\n  };\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\n  const handleUpdate = async row => {\n    try {\n      const {\n        id,\n        indentNumber,\n        ...updatedData\n      } = row;\n      const currentDocSnap = await getDocs(query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", indentNumber), where(\"isCurrent\", \"==\", true)));\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\n      const oldData = flattenObject((oldDoc === null || oldDoc === void 0 ? void 0 : oldDoc.data()) || {});\n      const cleanData = {};\n      const updateLog = [];\n      for (const key in updatedData) {\n        var _updatedData$key, _oldData$key;\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key)) continue;\n        const newVal = (_updatedData$key = updatedData[key]) !== null && _updatedData$key !== void 0 ? _updatedData$key : \"\";\n        const oldVal = (_oldData$key = oldData[key]) !== null && _oldData$key !== void 0 ? _oldData$key : \"\";\n        cleanData[key] = newVal;\n        if (String(newVal).trim() !== String(oldVal).trim()) {\n          updateLog.push(`Updated ${key}`);\n        }\n      }\n      if (updateLog.length === 0) {\n        toast.info(\"ℹ️ No changes to update.\");\n        return;\n      }\n      const confirm = window.confirm(`Update changes: ${updateLog.join(\", \")}?`);\n      if (!confirm) return;\n      await updateDoc(doc(db, \"fleet_records\", id), {\n        isCurrent: false,\n        expiredAt: new Date(),\n        modifiedBy: user.email\n      });\n      const newVersion = {\n        ...cleanData,\n        indentNumber,\n        createdAt: new Date(),\n        createdBy: user.email,\n        isCurrent: true,\n        versionDate: new Date(),\n        updateDescription: updateLog.join(\", \")\n      };\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\n      toast.success(\"✅ Record updated.\");\n      handleSearch();\n    } catch (error) {\n      toast.error(\"❌ Update failed: \" + error.message);\n    }\n  };\n  const handleDelete = async fleetNumberToDelete => {\n    try {\n      const q = query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", fleetNumberToDelete));\n      const snapshot = await getDocs(q);\n      if (snapshot.empty) return alert(\"❌ No records found.\");\n      const confirmDelete = window.confirm(`Delete all versions of Indent No. ${fleetNumberToDelete}?`);\n      if (!confirmDelete) return;\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\n      setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\n      setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\n      toast.success(\"✅ Deleted all versions.\");\n    } catch (err) {\n      toast.error(\"❌ Delete failed: \" + err.message);\n    }\n  };\n  if (authLoading) return /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 27\n    }\n  }, \"Checking authentication...\");\n  if (!user) return /*#__PURE__*/React.createElement(Auth, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 19\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: \"100vw\",\n      overflowX: \"hidden\",\n      padding: \"40px 20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }, \"Fleet Billing Dashboard\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"user-email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 11\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/logo.png\",\n    alt: \"Logo\",\n    style: {\n      height: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      // ✅ Clear localStorage before logout\n      localStorage.removeItem(\"inProgressFleetNumber\");\n      localStorage.removeItem(\"docId\");\n      localStorage.removeItem(\"fixedFields\");\n      localStorage.removeItem(\"customerFields\");\n      localStorage.removeItem(\"vendorFields\");\n      localStorage.removeItem(\"podFields\");\n      signOut(auth);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }\n  }, \"Logout\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(UploadForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ManualEntryForm, {\n    onAddRow: (row, addToHistory) => {\n      setRecords([row]);\n      if (addToHistory) setHistory([row]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 7\n    }\n  }, \"Search Existing Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-bar\",\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"10px\",\n      flexWrap: \"wrap\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    value: searchField,\n    onChange: e => {\n      setSearchField(e.target.value);\n      setSearchKey(\"\");\n      setStartDate(\"\");\n      setEndDate(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"indentNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 5\n    }\n  }, \"Fleet Number\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Broker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 5\n    }\n  }, \"Broker\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 5\n    }\n  }, \"Date\")), searchField === \"Date\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }\n  }, \"From:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: startDate,\n    onChange: e => setStartDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }\n  }, \"To:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: endDate,\n    onChange: e => setEndDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }\n  })) : /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: searchKey,\n    onChange: e => setSearchKey(e.target.value),\n    placeholder: \"Search key\",\n    style: {\n      width: \"200px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      fontSize: \"14px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: activeOnly,\n    onChange: e => setActiveOnly(e.target.checked),\n    style: {\n      marginRight: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 5\n    }\n  }), \"Show only active\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSearch,\n    disabled: isSearching,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 3\n    }\n  }, isSearching ? \"Searching...\" : \"Search\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }\n  }), searchField === \"indentNumber\" && records.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 11\n    }\n  }, \"Editable Current Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 17\n    }\n  }, finalColumnOrder.map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 21\n    }\n  }, col.replaceAll(\".\", \" → \"))), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 19\n    }\n  }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 15\n    }\n  }, records.map((row, rowIndex) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: rowIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 19\n    }\n  }, finalColumnOrder.map((col, j) => {\n    var _row$col, _row$col2;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: j,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: typeof row[col] === \"object\" && ((_row$col = row[col]) === null || _row$col === void 0 ? void 0 : _row$col.seconds) ? col === \"date\" ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\") : new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col2 = row[col]) !== null && _row$col2 !== void 0 ? _row$col2 : \"\"),\n      onChange: e => {\n        const updated = [...records];\n        updated[rowIndex][col] = e.target.value;\n        setRecords(updated);\n      },\n      readOnly: [\"indentNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col),\n      style: {\n        width: \"140px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 25\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"save\",\n    onClick: () => handleUpdate(row),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 23\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete\",\n    onClick: () => handleDelete(row.indentNumber),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 23\n    }\n  }, \"Delete\")))))))), history.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 3\n    }\n  }, \"\\uD83D\\uDD0D Full Version History\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleExportToExcel,\n    disabled: history.length === 0,\n    className: \"export-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 3\n    }\n  }, \"\\u2B07\\uFE0F Export to Excel\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 15\n    }\n  }, finalColumnOrder.map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 19\n    }\n  }, col.replaceAll(\".\", \" → \"))))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 13\n    }\n  }, [...history].sort((a, b) => {\n    var _a$expiredAt, _b$expiredAt;\n    if (a.isCurrent) return -1;\n    if (b.isCurrent) return 1;\n    const aTime = ((_a$expiredAt = a.expiredAt) === null || _a$expiredAt === void 0 ? void 0 : _a$expiredAt.seconds) || 0;\n    const bTime = ((_b$expiredAt = b.expiredAt) === null || _b$expiredAt === void 0 ? void 0 : _b$expiredAt.seconds) || 0;\n    return bTime - aTime;\n  }).map((row, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 19\n    }\n  }, finalColumnOrder.map((col, j) => {\n    var _row$col3, _row$col4;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: j,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 23\n      }\n    }, typeof row[col] === \"object\" && ((_row$col3 = row[col]) === null || _row$col3 === void 0 ? void 0 : _row$col3.seconds) ? col === \"date\" ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\") : new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col4 = row[col]) !== null && _row$col4 !== void 0 ? _row$col4 : \"\"));\n  }))))))), searchAttempted && !isSearching && records.length === 0 && history.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\",\n      color: \"#888\",\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 9\n    }\n  }, \"No records to display.\"), /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"30px\",\n      color: \"#666\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 7\n    }\n  }, \"\\xA9 2025 Fleet Billing System\"));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","onAuthStateChanged","signOut","collection","query","where","getDocs","getDoc","updateDoc","deleteDoc","doc","addDoc","auth","db","Auth","ManualEntryForm","UploadForm","toast","ToastContainer","XLSX","finalColumnOrder","flattenObject","obj","prefix","result","key","value","fullKey","seconds","Object","assign","App","user","setUser","authLoading","setAuthLoading","records","setRecords","history","setHistory","searchKey","setSearchKey","searchField","setSearchField","startDate","setStartDate","endDate","setEndDate","originalRecords","setOriginalRecords","isSearching","setIsSearching","isExporting","setIsExporting","searchAttempted","setSearchAttempted","activeOnly","setActiveOnly","unsubscribe","currentUser","handleExportToExcel","length","info","fixedCols","slice","customerCols","vendorCols","podCols","selectedCols","includeCustomer","includeVendor","includePOD","exportData","map","row","flatRow","forEach","col","val","Date","toLocaleString","worksheet","utils","json_to_sheet","workbook","book_new","book_append_sheet","fileName","toISOString","split","writeFile","handleSearch","fleetRef","q","fromDate","toDate","warn","Number","snapshot","allVersions","currentOnly","docSnap","rawData","id","data","push","isCurrent","sort","a","b","indentNumber","empty","error","console","message","normalize","undefined","String","trim","getChangedFields","current","original","ignored","changed","flatCurrent","flatOriginal","includes","currVal","origVal","hasMeaningfulChanges","curr","orig","handleUpdate","updatedData","currentDocSnap","oldDoc","docs","find","oldData","cleanData","updateLog","_updatedData$key","_oldData$key","newVal","oldVal","confirm","window","join","expiredAt","modifiedBy","email","newVersion","createdAt","createdBy","versionDate","updateDescription","success","handleDelete","fleetNumberToDelete","alert","confirmDelete","Promise","all","prev","filter","r","err","createElement","style","textAlign","__self","__source","_jsxFileName","lineNumber","columnNumber","maxWidth","overflowX","padding","className","display","alignItems","src","alt","height","onClick","localStorage","removeItem","onAddRow","addToHistory","gap","flexWrap","onChange","e","target","Fragment","type","placeholder","width","fontSize","checked","marginRight","disabled","replaceAll","rowIndex","j","_row$col","_row$col2","toLocaleDateString","updated","readOnly","justifyContent","_a$expiredAt","_b$expiredAt","aTime","bTime","i","_row$col3","_row$col4","color","marginTop","position","autoClose"],"sources":["C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  addDoc,\r\n} from \"firebase/firestore\";\r\nimport { auth, db } from \"./firebase\";\r\nimport Auth from \"./components/Auth\";\r\nimport ManualEntryForm from \"./components/ManualEntryForm\";\r\nimport UploadForm from \"./components/UploadForm\";\r\nimport \"./App.css\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst finalColumnOrder = [\r\n  \"indentNumber\", \"date\", \"months\", \"origin\", \"destination\", \"customer\", \"customerType\",\r\n  \"vehicleNo\", \"vendor\", \"salesRate\", \"buyRate\", \"createdAt\", \"createdBy\", \"versionDate\",\r\n  \"isCurrent\", \"updateDescription\", \"expiredAt\",\r\n  // Customer Master\r\n  \"customerMaster.toBeAdvance\", \"customerMaster.advanceReceived\", \"customerMaster.advDeviation\",\r\n  \"customerMaster.advanceRecDate\", \"customerMaster.validatedAdvanceUTRDescription\",\r\n  \"customerMaster.validatedAdvanceAmount\", \"customerMaster.balance\", \"customerMaster.processingCharges\",\r\n  \"customerMaster.inwardMisCharges\", \"customerMaster.outwardMisCharges\", \"customerMaster.balanceReceived\",\r\n  \"customerMaster.remainingBalance\", \"customerMaster.balanceRecDate\", \"customerMaster.validatedBalanceUTR\",\r\n  \"customerMaster.validatedBalanceUTRAmount\",\r\n  // Vendor Master\r\n  \"vendorMaster.vendorOutwardPayment\", \"vendorMaster.paidAmount\", \"vendorMaster.balancePending\",\r\n  \"vendorMaster.vendorRemark\",\r\n  // POD Master\r\n  \"podMaster.podVendorDate\", \"podMaster.podSendToCustomerDate\", \"podMaster.docNo\",\r\n  \"podMaster.podCustomerRec\", \"podMaster.today\", \"podMaster.balanceOverdueDays\",\r\n  \"podMaster.toBeCollectedAmount\"\r\n];\r\n\r\n\r\nconst flattenObject = (obj, prefix = \"\") => {\r\n  let result = {};\r\n  for (const key in obj) {\r\n    const value = obj[key];\r\n    const fullKey = prefix ? `${prefix}.${key}` : key;\r\n    if (value && typeof value === \"object\" && !value.seconds) {\r\n      Object.assign(result, flattenObject(value, fullKey));\r\n    } else {\r\n      result[fullKey] = value;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n  const [records, setRecords] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  const [searchField, setSearchField] = useState(\"indentNumber\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [originalRecords, setOriginalRecords] = useState({});\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [searchAttempted, setSearchAttempted] = useState(false);\r\n  const [activeOnly, setActiveOnly] = useState(false);\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n      setAuthLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleExportToExcel = () => {\r\n  if (history.length === 0) {\r\n    toast.info(\"❌ No history data to export.\");\r\n    return;\r\n  }\r\n\r\n  // Define columns to include\r\n  const fixedCols = finalColumnOrder.slice(0, 17); // First 17 are fixed\r\n  const customerCols = finalColumnOrder.slice(17, 32);\r\n  const vendorCols = finalColumnOrder.slice(32, 36);\r\n  const podCols = finalColumnOrder.slice(36);\r\n\r\n  const selectedCols = [\r\n    ...fixedCols,\r\n    ...(includeCustomer ? customerCols : []),\r\n    ...(includeVendor ? vendorCols : []),\r\n    ...(includePOD ? podCols : [])\r\n  ];\r\n\r\n  const exportData = history.map((row) => {\r\n    const flatRow = {};\r\n    selectedCols.forEach((col) => {\r\n      const val = row[col];\r\n      flatRow[col] = val?.seconds\r\n        ? new Date(val.seconds * 1000).toLocaleString()\r\n        : val ?? \"\";\r\n    });\r\n    return flatRow;\r\n  });\r\n\r\n  const worksheet = XLSX.utils.json_to_sheet(exportData);\r\n  const workbook = XLSX.utils.book_new();\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Filtered Export\");\r\n\r\n  const fileName = `FilteredExport_${new Date().toISOString().split(\"T\")[0]}.xlsx`;\r\n  XLSX.writeFile(workbook, fileName);\r\n};\r\n\r\n\r\n  const handleSearch = async () => {\r\n    setIsSearching(true);\r\n    try {\r\n      const fleetRef = collection(db, \"fleet_records\");\r\n      let q;\r\n\r\n          if (searchField === \"Date\") {\r\n  const fromDate = new Date(startDate);\r\n  const toDate = new Date(endDate + \"T23:59:59\");\r\n\r\n  if (fromDate > toDate) {\r\n    toast.warn(\"⚠️ 'From' date cannot be after 'To' date.\");\r\n    setIsSearching(false);\r\n    return;\r\n  }\r\n\r\n  q = query(\r\n    fleetRef,\r\n    ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []),\r\n    where(\"createdAt\", \">=\", fromDate),\r\n    where(\"createdAt\", \"<=\", toDate)\r\n  );\r\n}\r\n else if (searchKey) {\r\n  const key = searchField === \"indentNumber\" ? Number(searchKey) : searchKey;\r\n  q = query(\r\n    fleetRef,\r\n    where(searchField, \"==\", key),\r\n    ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : [])\r\n  );\r\n}\r\n\r\n else {\r\n        toast.warn(\"🔍 Please enter a search value.\");\r\n        setIsSearching(false);\r\n        return;\r\n      }\r\n\r\n      setSearchAttempted(true);\r\n      const snapshot = await getDocs(q);\r\n      const allVersions = [];\r\n      const currentOnly = [];\r\n\r\n      snapshot.forEach((docSnap) => {\r\n        const rawData = { id: docSnap.id, ...docSnap.data() };\r\n        const row = flattenObject(rawData);\r\n\r\n        allVersions.push(row);\r\n        if (row.isCurrent) currentOnly.push(row);\r\n      });\r\n      allVersions.sort((a, b) => {\r\n  if (a.isCurrent && !b.isCurrent) return -1;\r\n  if (!a.isCurrent && b.isCurrent) return 1;\r\n  return b.indentNumber - a.indentNumber;\r\n});\r\n\r\n// ✅ Sort currentOnly also by indentNumber descending\r\ncurrentOnly.sort((a, b) => b.indentNumber - a.indentNumber);\r\n\r\n      if (searchField === \"indentNumber\") {\r\n        setRecords(currentOnly);\r\n        setHistory(allVersions);\r\n      } else {\r\n        setRecords([]);\r\n        setHistory(allVersions);\r\n      }\r\n\r\n      if (snapshot.empty || allVersions.length === 0) {\r\n        toast.info(\"❌ No records found.\");\r\n      }\r\n    } catch (error) {\r\n  console.error(\"🔥 Full Firestore Error:\", error); // ✅ This will print full error in browser console\r\n  toast.error(\"❌ Search failed: \" + error.message);\r\n\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n    const normalize = (val) => {\r\n    if (val === null || val === undefined) return \"\";\r\n    return typeof val === \"object\" && val.seconds\r\n      ? new Date(val.seconds * 1000).toISOString()\r\n      : String(val).trim();\r\n  };\r\n\r\n const getChangedFields = (current, original) => {\r\n  const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\r\n  const changed = [];\r\n\r\n  const flatCurrent = flattenObject(current);\r\n  const flatOriginal = flattenObject(original);\r\n\r\n  for (const key in flatCurrent) {\r\n    if (ignored.includes(key)) continue;\r\n    const currVal = normalize(flatCurrent[key]);\r\n    const origVal = normalize(flatOriginal?.[key]);\r\n    if (currVal !== origVal) changed.push(key);\r\n  }\r\n\r\n  return changed;\r\n};\r\n\r\n\r\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\r\n\r\n\r\n    const handleUpdate = async (row) => {\r\n    try {\r\n      const { id, indentNumber, ...updatedData } = row;\r\n\r\n      const currentDocSnap = await getDocs(\r\n        query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", indentNumber), where(\"isCurrent\", \"==\", true))\r\n      );\r\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\r\n      const oldData = flattenObject(oldDoc?.data() || {});\r\n\r\n\r\n      const cleanData = {};\r\n      const updateLog = [];\r\n      for (const key in updatedData) {\r\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key))\r\n          continue;\r\n        const newVal = updatedData[key] ?? \"\";\r\n        const oldVal = oldData[key] ?? \"\";\r\n        cleanData[key] = newVal;\r\n\r\n        if (String(newVal).trim() !== String(oldVal).trim()) {\r\n          updateLog.push(`Updated ${key}`);\r\n        }\r\n      }\r\n\r\n      if (updateLog.length === 0) {\r\n        toast.info(\"ℹ️ No changes to update.\");\r\n        return;\r\n      }\r\n\r\n      const confirm = window.confirm(`Update changes: ${updateLog.join(\", \")}?`);\r\n      if (!confirm) return;\r\n\r\n      await updateDoc(doc(db, \"fleet_records\", id), {\r\n        isCurrent: false,\r\n        expiredAt: new Date(),\r\n        modifiedBy: user.email\r\n      });\r\n\r\n      const newVersion = {\r\n        ...cleanData,\r\n        indentNumber,\r\n        createdAt: new Date(),\r\n        createdBy: user.email,\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n        updateDescription: updateLog.join(\", \")\r\n      };\r\n\r\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\r\n\r\n      toast.success(\"✅ Record updated.\");\r\n      handleSearch();\r\n    } catch (error) {\r\n      toast.error(\"❌ Update failed: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fleetNumberToDelete) => {\r\n    try {\r\n      const q = query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", fleetNumberToDelete));\r\n      const snapshot = await getDocs(q);\r\n      if (snapshot.empty) return alert(\"❌ No records found.\");\r\n\r\n      const confirmDelete = window.confirm(`Delete all versions of Indent No. ${fleetNumberToDelete}?`);\r\n      if (!confirmDelete) return;\r\n\r\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\r\n      setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n      setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n      toast.success(\"✅ Deleted all versions.\");\r\n    } catch (err) {\r\n      toast.error(\"❌ Delete failed: \" + err.message);\r\n    }\r\n  };\r\n  if (authLoading) return <p style={{ textAlign: \"center\" }}>Checking authentication...</p>;\r\nif (!user) return <Auth />;\r\n\r\n\r\n  return (\r\n    <div style={{ maxWidth: \"100vw\", overflowX: \"hidden\", padding: \"40px 20px\" }}>\r\n      <div className=\"header\">\r\n        <h2>Fleet Billing Dashboard</h2>\r\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <span className=\"user-email\">Welcome, {user.email}</span>\r\n          <img src=\"/logo.png\" alt=\"Logo\" style={{ height: \"50px\" }} />\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n  onClick={() => {\r\n    // ✅ Clear localStorage before logout\r\n    localStorage.removeItem(\"inProgressFleetNumber\");\r\n    localStorage.removeItem(\"docId\");\r\n    localStorage.removeItem(\"fixedFields\");\r\n    localStorage.removeItem(\"customerFields\");\r\n    localStorage.removeItem(\"vendorFields\");\r\n    localStorage.removeItem(\"podFields\");\r\n\r\n    signOut(auth);\r\n  }}\r\n>\r\n  Logout\r\n</button>\r\n\r\n      <hr />\r\n\r\n      <UploadForm />\r\n\r\n      <ManualEntryForm\r\n        onAddRow={(row, addToHistory) => {\r\n          setRecords([row]);\r\n          if (addToHistory) setHistory([row]);\r\n        }}\r\n      />\r\n\r\n      <hr />\r\n      <h4>Search Existing Records</h4>\r\n<div className=\"search-bar\" style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\", flexWrap: \"wrap\" }}>\r\n  <select value={searchField} onChange={(e) => {\r\n    setSearchField(e.target.value);\r\n    setSearchKey(\"\");\r\n    setStartDate(\"\");\r\n    setEndDate(\"\");\r\n  }}>\r\n    <option value=\"indentNumber\">Fleet Number</option>\r\n    <option value=\"Broker\">Broker</option>\r\n    <option value=\"Date\">Date</option>\r\n  </select>\r\n\r\n  {searchField === \"Date\" ? (\r\n    <>\r\n      <label>From:</label>\r\n      <input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\r\n      <label>To:</label>\r\n      <input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\r\n    </>\r\n  ) : (\r\n    <input\r\n      type=\"text\"\r\n      value={searchKey}\r\n      onChange={(e) => setSearchKey(e.target.value)}\r\n      placeholder=\"Search key\"\r\n      style={{ width: \"200px\" }}\r\n    />\r\n  )}\r\n\r\n  {/* ✅ Add checkbox here */}\r\n  <label style={{ display: \"flex\", alignItems: \"center\", fontSize: \"14px\" }}>\r\n    <input\r\n      type=\"checkbox\"\r\n      checked={activeOnly}\r\n      onChange={(e) => setActiveOnly(e.target.checked)}\r\n      style={{ marginRight: \"5px\" }}\r\n    />\r\n    Show only active\r\n  </label>\r\n\r\n  <button onClick={handleSearch} disabled={isSearching}>\r\n    {isSearching ? \"Searching...\" : \"Search\"}\r\n  </button>\r\n</div>\r\n\r\n\r\n      <hr />\r\n\r\n      {searchField === \"indentNumber\" && records.length > 0 && (\r\n        <>\r\n          <h4>Editable Current Records</h4>\r\n          <div className=\"table-scroll-x\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  {finalColumnOrder.map((col) => (\r\n                    <th key={col}>{col.replaceAll(\".\", \" → \")}</th>\r\n                  ))}\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {records.map((row, rowIndex) => (\r\n                  <tr key={rowIndex}>\r\n                    {finalColumnOrder.map((col, j) => (\r\n                      <td key={j}>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={\r\n                            typeof row[col] === \"object\" && row[col]?.seconds\r\n                              ? (col === \"date\"\r\n            ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\")\r\n            : new Date(row[col].seconds * 1000).toLocaleString()\r\n          )\r\n        : String(row[col] ?? \"\")\r\n    }\r\n                          onChange={(e) => {\r\n                            const updated = [...records];\r\n                            updated[rowIndex][col] = e.target.value;\r\n                            setRecords(updated);\r\n                          }}\r\n                          readOnly={[\"indentNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col)}\r\n                          style={{ width: \"140px\" }}\r\n                        />\r\n                      </td>\r\n                    ))}\r\n                    <td>\r\n                      <button className=\"save\" onClick={() => handleUpdate(row)}>\r\n                        Save\r\n                      </button>\r\n                      <button className=\"delete\" onClick={() => handleDelete(row.indentNumber)}>\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {history.length > 0 && (\r\n        <>\r\n          <hr />\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n  <h4>🔍 Full Version History</h4>\r\n  <button onClick={handleExportToExcel} disabled={history.length === 0} className=\"export-button\">\r\n    ⬇️ Export to Excel\r\n  </button>\r\n</div>\r\n        <div className=\"table-scroll-x\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                {finalColumnOrder.map((col) => (\r\n                  <th key={col}>{col.replaceAll(\".\", \" → \")}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {[...history]\r\n                .sort((a, b) => {\r\n                  if (a.isCurrent) return -1;\r\n                  if (b.isCurrent) return 1;\r\n                  const aTime = a.expiredAt?.seconds || 0;\r\n                  const bTime = b.expiredAt?.seconds || 0;\r\n                  return bTime - aTime;\r\n                })\r\n                .map((row, i) => (\r\n                  <tr key={i}>\r\n                    {finalColumnOrder.map((col, j) => (\r\n                      <td key={j}>\r\n                        {typeof row[col] === \"object\" && row[col]?.seconds\r\n              ? (col === \"date\"\r\n                  ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\")\r\n                  : new Date(row[col].seconds * 1000).toLocaleString())\r\n              : String(row[col] ?? \"\")}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        </>\r\n      )}\r\n\r\n      {searchAttempted && !isSearching && records.length === 0 && history.length === 0 && (\r\n        <p style={{ textAlign: \"center\", color: \"#888\", marginTop: \"30px\" }}>No records to display.</p>\r\n      )}\r\n\r\n      <ToastContainer position=\"bottom-right\" autoClose={3000} />\r\n      <p style={{ textAlign: \"center\", marginTop: \"30px\", color: \"#666\" }}>© 2025 Fleet Billing System</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}