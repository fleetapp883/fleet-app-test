{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anupp\\\\Downloads\\\\fleet-billing-app\\\\fleet-billing-app\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { collection, addDoc, query, where, getDocs, updateDoc, deleteDoc, doc } from \"firebase/firestore\";\nimport { auth, db } from \"./firebase\";\nimport Auth from \"./components/Auth\";\nimport UploadForm from \"./components/UploadForm\";\nimport ManualEntryForm from \"./components/ManualEntryForm\";\nimport \"./App.css\";\n\n// üëá Paste this at the top below imports\nconst labelToKey = {\n  \"Indent No\": \"IndentNo\",\n  \"Indent Date\": \"IndentDate\",\n  \"Placement Date\": \"PlacementDate\",\n  \"Customer\": \"Customer\",\n  \"Customer Type\": \"CustomerType\",\n  \"Customer Billing Type\": \"CustomerBillingType\",\n  \"Sourcing (Vendor)\": \"SourcingVendor\",\n  \"Vendor Type\": \"VendorType\",\n  \"Vendor Billing Type\": \"VendorBillingType\",\n  \"Origin\": \"Origin\",\n  \"Destination\": \"Destination\",\n  \"Vehicle No\": \"VehicleNo\",\n  \"Vehicle type\": \"VehicleType\",\n  \"Driver No\": \"DriverNo\",\n  \"Dispatch Date\": \"DispatchDate\",\n  \"Deliver Date\": \"DeliverDate\",\n  \"Offloading Date\": \"OffloadingDate\",\n  \"E-way Bill\": \"EwayBill\",\n  \"LR No.\": \"LRNo\",\n  \"Soft Copy POD Rec\": \"SoftCopyPODRec\",\n  \"Hard Copy POD Rec\": \"HardCopyPODRec\",\n  \"Customer -Sale rate\": \"CustomerSaleRate\",\n  \"Advance to be Paid\": \"AdvanceToBePaid\",\n  \"Advance Rec\": \"AdvanceRec\",\n  \"Advance UTR\": \"AdvanceUTR\",\n  \"Advance Rec-Date\": \"AdvanceRecDate\",\n  \"Balance Pending\": \"BalancePending\",\n  \"Detention Charges\": \"DetentionCharges\",\n  \"Loading/Unloading Charges\": \"LoadingUnloadingCharges\",\n  \"Miscellaneous Charges.\": \"MiscCharges\",\n  \"Processing Charges\": \"ProcessingCharges\",\n  \"Net Balance\": \"NetBalance\",\n  \"Balance Rec Amount\": \"BalanceRecAmount\",\n  \"Balance UTR\": \"BalanceUTR\",\n  \"Balance Rec Date\": \"BalanceRecDate\",\n  \"Remaining Balance\": \"RemainingBalance\",\n  \"Remaining Balance UTR\": \"RemainingBalanceUTR\",\n  \"Remaining Balance Date\": \"RemainingBalanceDate\",\n  \"Supplier Buy Rate\": \"SupplierBuyRate\",\n  \"Supplier Advance Pay\": \"SupplierAdvancePay\",\n  \"Supplier Advance Paid\": \"SupplierAdvancePaid\",\n  \"Supplier Mis Charges\": \"SupplierMisCharges\",\n  \"Supplier Invoice No.\": \"SupplierInvoiceNo\",\n  \"Supplier Advance UTR\": \"SupplierAdvanceUTR\",\n  \"Supplier Advance Pay-Date\": \"SupplierAdvancePayDate\",\n  \"Supplier Balance Pending\": \"SupplierBalancePending\",\n  \"Supplier Balance Paid Amount\": \"SupplierBalancePaidAmount\",\n  \"Supplier Balance Paid UTR\": \"SupplierBalancePaidUTR\",\n  \"Supplier Balance Paid Date\": \"SupplierBalancePaidDate\",\n  \"Remaining Supplier Amount\": \"RemainingSupplierAmount\",\n  \"POD Rec Date\": \"PODRecDate\",\n  \"POD Send to Customer Date\": \"PODSendToCustomerDate\",\n  \"POD Docket No.\": \"PODDocketNo\",\n  \"POD Rec By Customer\": \"PODRecByCustomer\",\n  \"POD Deduction If any\": \"PODDeductionIfAny\",\n  \"Gross Profit\": \"GrossProfit\",\n  \"Bad Debts\": \"BadDebts\",\n  \"Net Profit\": \"NetProfit\",\n  \"UniqueNo\": \"UniqueNo\",\n  \"isCurrent\": \"isCurrent\",\n  \"createdBy\": \"createdBy\",\n  \"createdAt\": \"createdAt\"\n};\nconst keyToLabel = Object.fromEntries(Object.entries(labelToKey).map(([k, v]) => [v, k]));\nconst testConnection = async () => {\n  try {\n    const docRef = await addDoc(collection(db, \"test_connection\"), {\n      message: \"Testing Firestore connection\",\n      timestamp: new Date()\n    });\n    console.log(\"‚úÖ Firestore write succeeded with ID:\", docRef.id);\n    alert(\"‚úÖ Firebase is connected. Test document written!\");\n  } catch (error) {\n    console.error(\"‚ùå Firebase connection failed:\", error);\n    alert(\"‚ùå Firebase connection failed: \" + error.message);\n  }\n};\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [searchField, setSearchField] = useState(\"UniqueNo\");\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => {\n      console.log(\"üî• Auth State Changed. User:\", currentUser);\n      setUser(currentUser);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleSave = async () => {\n    try {\n      const batch = records.map(record => addDoc(collection(db, \"fleet_records\"), {\n        ...record,\n        createdBy: user.email,\n        createdAt: new Date(),\n        isCurrent: true,\n        versionDate: new Date()\n      }));\n      await Promise.all(batch);\n      alert(\"Records saved to Firestore!\");\n    } catch (error) {\n      alert(\"Error saving records: \" + error.message);\n    }\n  };\n  const handleSearch = async () => {\n    try {\n      // Get all versions (full history)\n      const hq = query(collection(db, \"fleet_records\"), where(searchField, \"==\", searchKey));\n      const hSnapshot = await getDocs(hq);\n      const allVersions = [];\n      const currentOnly = [];\n      hSnapshot.forEach(docSnap => {\n        const row = {\n          id: docSnap.id,\n          ...docSnap.data()\n        };\n\n        // ‚úÖ Treat missing isCurrent as true (for old records)\n        if (row.isCurrent === undefined) {\n          row.isCurrent = true;\n        }\n        allVersions.push(row);\n        if (row.isCurrent === true) currentOnly.push(row);\n      });\n      setRecords(currentOnly);\n      setHistory(allVersions);\n    } catch (error) {\n      alert(\"Search failed: \" + error.message);\n    }\n  };\n  const handleUpdate = async row => {\n    try {\n      const {\n        id,\n        ...rest\n      } = row;\n      const cleanData = {};\n      for (const key in rest) {\n        var _rest$key;\n        cleanData[key] = typeof rest[key] === \"string\" || typeof rest[key] === \"number\" ? rest[key] : String((_rest$key = rest[key]) !== null && _rest$key !== void 0 ? _rest$key : \"\");\n      }\n      await updateDoc(doc(db, \"fleet_records\", id), {\n        isCurrent: false,\n        expiredAt: new Date(),\n        modifiedBy: user.email\n      });\n      const newVersion = {\n        ...cleanData,\n        createdAt: new Date(),\n        createdBy: user.email,\n        isCurrent: true,\n        versionDate: new Date()\n      };\n      const docRef = await addDoc(collection(db, \"fleet_records\"), newVersion);\n      const updatedRecords = records.map(r => r.id === id ? {\n        ...newVersion,\n        id: docRef.id\n      } : r);\n      setRecords(updatedRecords);\n      handleSearch();\n      alert(\"üÜï SCD Type 2 update saved successfully.\");\n    } catch (error) {\n      alert(\"‚ùå Update failed: \" + error.message);\n    }\n  };\n  const handleDelete = async id => {\n    try {\n      await deleteDoc(doc(db, \"fleet_records\", id));\n      setRecords(records.filter(r => r.id !== id));\n      alert(\"üóëÔ∏è Record deleted successfully.\");\n    } catch (error) {\n      alert(\"‚ùå Delete failed: \" + error.message);\n    }\n  };\n  if (!user) return /*#__PURE__*/React.createElement(Auth, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => signOut(auth),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }, \"Logout\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: testConnection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }\n  }, \"Test Firebase Connection\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(UploadForm, {\n    onDataParsed: data => setRecords([...records, ...data]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ManualEntryForm, {\n    onAddRow: row => setRecords([...records, row]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }, \"Search Existing Records\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: searchField,\n    onChange: e => setSearchField(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"UniqueNo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, \"UniqueNo\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Broker\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, \"Broker\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search value\",\n    value: searchKey,\n    onChange: e => setSearchKey(e.target.value),\n    style: {\n      margin: \"0 10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }, \"Search\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }, \"Editable Current Records\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-scroll-x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, [\"UniqueNo\", \"Indent No\", \"Indent Date\", \"Placement Date\", \"Customer\", \"Customer Type\", \"Customer Billing Type\", \"Sourcing (Vendor)\", \"Vendor Type\", \"Vendor Billing Type\", \"Origin\", \"Destination\", \"Vehicle No\", \"Vehicle type\", \"Driver No\", \"Dispatch Date\", \"Deliver Date\", \"Offloading Date\", \"E-way Bill\", \"LR No.\", \"Soft Copy POD Rec\", \"Hard Copy POD Rec\", \"Customer -Sale rate\", \"Advance to be Paid\", \"Advance Rec\", \"Advance UTR\", \"Advance Rec-Date\", \"Balance Pending\", \"Detention Charges\", \"Loading/Unloading Charges\", \"Miscellaneous Charges.\", \"Processing Charges\", \"Net Balance\", \"Balance Rec Amount\", \"Balance UTR\", \"Balance Rec Date\", \"Remaining Balance\", \"Remaining Balance UTR\", \"Remaining Balance Date\", \"Supplier Buy Rate\", \"Supplier Advance Pay\", \"Supplier Advance Paid\", \"Supplier Mis Charges\", \"Supplier Invoice No.\", \"Supplier Advance UTR\", \"Supplier Advance Pay-Date\", \"Supplier Balance Pending\", \"Supplier Balance Paid Amount\", \"Supplier Balance Paid UTR\", \"Supplier Balance Paid Date\", \"Remaining Supplier Amount\", \"POD Rec Date\", \"POD Send to Customer Date\", \"POD Docket No.\", \"POD Rec By Customer\", \"POD Deduction If any\", \"Gross Profit\", \"Bad Debts\", \"Net Profit\", \"isCurrent\", \"createdBy\", \"createdAt\"].map(col => /*#__PURE__*/React.createElement(\"th\", {\n    key: col,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 11\n    }\n  }, col)), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 5\n    }\n  }, records.map((row, rowIndex) => {\n    if (!row.UniqueNo) {\n      row.UniqueNo = `UNQ-${Date.now()}-${Math.floor(Math.random() * 1000)}`;\n    }\n    const readOnlyFields = [\"UniqueNo\", \"createdAt\", \"createdBy\", \"isCurrent\"];\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: rowIndex,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 7\n      }\n    }, Object.entries(labelToKey).map(([label, key], colIndex) => {\n      var _row$key, _row$key2;\n      return /*#__PURE__*/React.createElement(\"td\", {\n        key: colIndex,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: typeof row[key] === \"object\" && ((_row$key = row[key]) === null || _row$key === void 0 ? void 0 : _row$key.seconds) ? new Date(row[key].seconds * 1000).toLocaleString() : String((_row$key2 = row[key]) !== null && _row$key2 !== void 0 ? _row$key2 : \"\"),\n        onChange: e => {\n          const updated = [...records];\n          updated[rowIndex][key] = e.target.value;\n          setRecords(updated);\n        },\n        style: {\n          width: \"120px\"\n        },\n        readOnly: readOnlyFields.includes(key),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }\n      }));\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleUpdate(row),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }\n    }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        if (window.confirm(\"Are you sure you want to delete this record?\")) {\n          handleDelete(row.id);\n        }\n      },\n      style: {\n        marginLeft: \"8px\",\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }\n    }, \"Delete\")));\n  })))), history.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 5\n    }\n  }, \"\\uD83D\\uDD0D Full Version History\"), (() => {\n    const allKeys = new Set();\n    history.forEach(row => Object.keys(row).forEach(k => allKeys.add(k)));\n    const columnList = Array.from(allKeys);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-scroll-x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 7\n      }\n    }, columnList.map(col => /*#__PURE__*/React.createElement(\"th\", {\n      key: col,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }\n    }, col)))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 5\n      }\n    }, [...history].sort((a, b) => {\n      var _a$expiredAt, _b$expiredAt;\n      if (a.isCurrent) return -1;\n      if (b.isCurrent) return 1;\n      const aTime = ((_a$expiredAt = a.expiredAt) === null || _a$expiredAt === void 0 ? void 0 : _a$expiredAt.seconds) || 0;\n      const bTime = ((_b$expiredAt = b.expiredAt) === null || _b$expiredAt === void 0 ? void 0 : _b$expiredAt.seconds) || 0;\n      return bTime - aTime;\n    }).map((row, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }\n    }, columnList.map((col, j) => {\n      var _row$col, _row$col2;\n      return /*#__PURE__*/React.createElement(\"td\", {\n        key: j,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }\n      }, typeof row[col] === 'object' && ((_row$col = row[col]) === null || _row$col === void 0 ? void 0 : _row$col.seconds) ? new Date(row[col].seconds * 1000).toLocaleString() : String((_row$col2 = row[col]) !== null && _row$col2 !== void 0 ? _row$col2 : \"\"));\n    }))))));\n  })()));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","onAuthStateChanged","signOut","collection","addDoc","query","where","getDocs","updateDoc","deleteDoc","doc","auth","db","Auth","UploadForm","ManualEntryForm","labelToKey","keyToLabel","Object","fromEntries","entries","map","k","v","testConnection","docRef","message","timestamp","Date","console","log","id","alert","error","App","user","setUser","records","setRecords","history","setHistory","searchKey","setSearchKey","searchField","setSearchField","unsubscribe","currentUser","handleSave","batch","record","createdBy","email","createdAt","isCurrent","versionDate","Promise","all","handleSearch","hq","hSnapshot","allVersions","currentOnly","forEach","docSnap","row","data","undefined","push","handleUpdate","rest","cleanData","key","_rest$key","String","expiredAt","modifiedBy","newVersion","updatedRecords","r","handleDelete","filter","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","padding","onClick","onDataParsed","onAddRow","value","onChange","e","target","type","placeholder","margin","className","col","rowIndex","UniqueNo","now","Math","floor","random","readOnlyFields","label","colIndex","_row$key","_row$key2","seconds","toLocaleString","updated","width","readOnly","includes","window","confirm","marginLeft","color","length","Fragment","allKeys","Set","keys","add","columnList","Array","from","sort","a","b","_a$expiredAt","_b$expiredAt","aTime","bTime","i","j","_row$col","_row$col2"],"sources":["C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport {\n  collection,\n  addDoc,\n  query,\n  where,\n  getDocs,\n  updateDoc,\n  deleteDoc,\n  doc\n} from \"firebase/firestore\";\nimport { auth, db } from \"./firebase\";\nimport Auth from \"./components/Auth\";\nimport UploadForm from \"./components/UploadForm\";\nimport ManualEntryForm from \"./components/ManualEntryForm\";\nimport \"./App.css\";\n\n// üëá Paste this at the top below imports\nconst labelToKey = {\n  \"Indent No\": \"IndentNo\",\n  \"Indent Date\": \"IndentDate\",\n  \"Placement Date\": \"PlacementDate\",\n  \"Customer\": \"Customer\",\n  \"Customer Type\": \"CustomerType\",\n  \"Customer Billing Type\": \"CustomerBillingType\",\n  \"Sourcing (Vendor)\": \"SourcingVendor\",\n  \"Vendor Type\": \"VendorType\",\n  \"Vendor Billing Type\": \"VendorBillingType\",\n  \"Origin\": \"Origin\",\n  \"Destination\": \"Destination\",\n  \"Vehicle No\": \"VehicleNo\",\n  \"Vehicle type\": \"VehicleType\",\n  \"Driver No\": \"DriverNo\",\n  \"Dispatch Date\": \"DispatchDate\",\n  \"Deliver Date\": \"DeliverDate\",\n  \"Offloading Date\": \"OffloadingDate\",\n  \"E-way Bill\": \"EwayBill\",\n  \"LR No.\": \"LRNo\",\n  \"Soft Copy POD Rec\": \"SoftCopyPODRec\",\n  \"Hard Copy POD Rec\": \"HardCopyPODRec\",\n  \"Customer -Sale rate\": \"CustomerSaleRate\",\n  \"Advance to be Paid\": \"AdvanceToBePaid\",\n  \"Advance Rec\": \"AdvanceRec\",\n  \"Advance UTR\": \"AdvanceUTR\",\n  \"Advance Rec-Date\": \"AdvanceRecDate\",\n  \"Balance Pending\": \"BalancePending\",\n  \"Detention Charges\": \"DetentionCharges\",\n  \"Loading/Unloading Charges\": \"LoadingUnloadingCharges\",\n  \"Miscellaneous Charges.\": \"MiscCharges\",\n  \"Processing Charges\": \"ProcessingCharges\",\n  \"Net Balance\": \"NetBalance\",\n  \"Balance Rec Amount\": \"BalanceRecAmount\",\n  \"Balance UTR\": \"BalanceUTR\",\n  \"Balance Rec Date\": \"BalanceRecDate\",\n  \"Remaining Balance\": \"RemainingBalance\",\n  \"Remaining Balance UTR\": \"RemainingBalanceUTR\",\n  \"Remaining Balance Date\": \"RemainingBalanceDate\",\n  \"Supplier Buy Rate\": \"SupplierBuyRate\",\n  \"Supplier Advance Pay\": \"SupplierAdvancePay\",\n  \"Supplier Advance Paid\": \"SupplierAdvancePaid\",\n  \"Supplier Mis Charges\": \"SupplierMisCharges\",\n  \"Supplier Invoice No.\": \"SupplierInvoiceNo\",\n  \"Supplier Advance UTR\": \"SupplierAdvanceUTR\",\n  \"Supplier Advance Pay-Date\": \"SupplierAdvancePayDate\",\n  \"Supplier Balance Pending\": \"SupplierBalancePending\",\n  \"Supplier Balance Paid Amount\": \"SupplierBalancePaidAmount\",\n  \"Supplier Balance Paid UTR\": \"SupplierBalancePaidUTR\",\n  \"Supplier Balance Paid Date\": \"SupplierBalancePaidDate\",\n  \"Remaining Supplier Amount\": \"RemainingSupplierAmount\",\n  \"POD Rec Date\": \"PODRecDate\",\n  \"POD Send to Customer Date\": \"PODSendToCustomerDate\",\n  \"POD Docket No.\": \"PODDocketNo\",\n  \"POD Rec By Customer\": \"PODRecByCustomer\",\n  \"POD Deduction If any\": \"PODDeductionIfAny\",\n  \"Gross Profit\": \"GrossProfit\",\n  \"Bad Debts\": \"BadDebts\",\n  \"Net Profit\": \"NetProfit\",\n  \"UniqueNo\": \"UniqueNo\",\n  \"isCurrent\": \"isCurrent\",\n  \"createdBy\": \"createdBy\",\n  \"createdAt\": \"createdAt\"\n};\n\nconst keyToLabel = Object.fromEntries(Object.entries(labelToKey).map(([k, v]) => [v, k]));\n\n\nconst testConnection = async () => {\n  try {\n    const docRef = await addDoc(collection(db, \"test_connection\"), {\n      message: \"Testing Firestore connection\",\n      timestamp: new Date()\n    });\n    console.log(\"‚úÖ Firestore write succeeded with ID:\", docRef.id);\n    alert(\"‚úÖ Firebase is connected. Test document written!\");\n  } catch (error) {\n    console.error(\"‚ùå Firebase connection failed:\", error);\n    alert(\"‚ùå Firebase connection failed: \" + error.message);\n  }\n};\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [searchField, setSearchField] = useState(\"UniqueNo\");\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      console.log(\"üî• Auth State Changed. User:\", currentUser);\n      setUser(currentUser);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  const handleSave = async () => {\n    try {\n      const batch = records.map(record =>\n        addDoc(collection(db, \"fleet_records\"), {\n          ...record,\n          createdBy: user.email,\n          createdAt: new Date(),\n          isCurrent: true,\n          versionDate: new Date()\n        })\n      );\n      await Promise.all(batch);\n      alert(\"Records saved to Firestore!\");\n    } catch (error) {\n      alert(\"Error saving records: \" + error.message);\n    }\n  };\n\n  const handleSearch = async () => {\n    try {\n      // Get all versions (full history)\n      const hq = query(collection(db, \"fleet_records\"), where(searchField, \"==\", searchKey));\n      const hSnapshot = await getDocs(hq);\n      const allVersions = [];\n      const currentOnly = [];\n\n      hSnapshot.forEach((docSnap) => {\n        const row = { id: docSnap.id, ...docSnap.data() };\n\n        // ‚úÖ Treat missing isCurrent as true (for old records)\n        if (row.isCurrent === undefined) {\n          row.isCurrent = true;\n        }\n\n        allVersions.push(row);\n        if (row.isCurrent === true) currentOnly.push(row);\n      });\n\n      setRecords(currentOnly);\n      setHistory(allVersions);\n    } catch (error) {\n      alert(\"Search failed: \" + error.message);\n    }\n  };\n\n  const handleUpdate = async (row) => {\n    try {\n      const { id, ...rest } = row;\n      const cleanData = {};\n      for (const key in rest) {\n        cleanData[key] =\n          typeof rest[key] === \"string\" || typeof rest[key] === \"number\"\n            ? rest[key]\n            : String(rest[key] ?? \"\");\n      }\n\n      await updateDoc(doc(db, \"fleet_records\", id), {\n        isCurrent: false,\n        expiredAt: new Date(),\n        modifiedBy: user.email\n      });\n\n      const newVersion = {\n        ...cleanData,\n        createdAt: new Date(),\n        createdBy: user.email,\n        isCurrent: true,\n        versionDate: new Date()\n      };\n\n      const docRef = await addDoc(collection(db, \"fleet_records\"), newVersion);\n\n      const updatedRecords = records.map((r) =>\n        r.id === id ? { ...newVersion, id: docRef.id } : r\n      );\n      setRecords(updatedRecords);\n      handleSearch();\n\n      alert(\"üÜï SCD Type 2 update saved successfully.\");\n    } catch (error) {\n      alert(\"‚ùå Update failed: \" + error.message);\n    }\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      await deleteDoc(doc(db, \"fleet_records\", id));\n      setRecords(records.filter((r) => r.id !== id));\n      alert(\"üóëÔ∏è Record deleted successfully.\");\n    } catch (error) {\n      alert(\"‚ùå Delete failed: \" + error.message);\n    }\n  };\n\n  if (!user) return <Auth />;\n\n  return (\n    <div style={{ padding: 20 }}>\n      <h2>Welcome, {user.email}</h2>\n      <button onClick={() => signOut(auth)}>Logout</button>\n      <br />\n      <button onClick={testConnection}>Test Firebase Connection</button>\n      <hr />\n\n      <UploadForm onDataParsed={(data) => setRecords([...records, ...data])} />\n      <ManualEntryForm onAddRow={(row) => setRecords([...records, row])} />\n\n      <hr />\n      <h4>Search Existing Records</h4>\n      <select value={searchField} onChange={(e) => setSearchField(e.target.value)}>\n        <option value=\"UniqueNo\">UniqueNo</option>\n        <option value=\"Broker\">Broker</option>\n      </select>\n      <input\n        type=\"text\"\n        placeholder=\"Search value\"\n        value={searchKey}\n        onChange={(e) => setSearchKey(e.target.value)}\n        style={{ margin: \"0 10px\" }}\n      />\n      <button onClick={handleSearch}>Search</button>\n\n      <hr />\n      <h4>Editable Current Records</h4>\n<div className=\"table-scroll-x\">\n  <table>\n    <thead>\n      <tr>\n        {[\n          \"UniqueNo\", \"Indent No\", \"Indent Date\", \"Placement Date\", \"Customer\", \"Customer Type\",\n          \"Customer Billing Type\", \"Sourcing (Vendor)\", \"Vendor Type\", \"Vendor Billing Type\",\n          \"Origin\", \"Destination\", \"Vehicle No\", \"Vehicle type\", \"Driver No\", \"Dispatch Date\",\n          \"Deliver Date\", \"Offloading Date\", \"E-way Bill\", \"LR No.\", \"Soft Copy POD Rec\",\n          \"Hard Copy POD Rec\", \"Customer -Sale rate\", \"Advance to be Paid\", \"Advance Rec\",\n          \"Advance UTR\", \"Advance Rec-Date\", \"Balance Pending\", \"Detention Charges\",\n          \"Loading/Unloading Charges\", \"Miscellaneous Charges.\", \"Processing Charges\",\n          \"Net Balance\", \"Balance Rec Amount\", \"Balance UTR\", \"Balance Rec Date\",\n          \"Remaining Balance\", \"Remaining Balance UTR\", \"Remaining Balance Date\",\n          \"Supplier Buy Rate\", \"Supplier Advance Pay\", \"Supplier Advance Paid\",\n          \"Supplier Mis Charges\", \"Supplier Invoice No.\", \"Supplier Advance UTR\",\n          \"Supplier Advance Pay-Date\", \"Supplier Balance Pending\", \"Supplier Balance Paid Amount\",\n          \"Supplier Balance Paid UTR\", \"Supplier Balance Paid Date\", \"Remaining Supplier Amount\",\n          \"POD Rec Date\", \"POD Send to Customer Date\", \"POD Docket No.\", \"POD Rec By Customer\",\n          \"POD Deduction If any\", \"Gross Profit\", \"Bad Debts\", \"Net Profit\",\n          \"isCurrent\", \"createdBy\", \"createdAt\"\n        ].map((col) => (\n          <th key={col}>{col}</th>\n        ))}\n        <th>Action</th>\n      </tr>\n    </thead>\n    <tbody>\n  {records.map((row, rowIndex) => {\n    if (!row.UniqueNo) {\n      row.UniqueNo = `UNQ-${Date.now()}-${Math.floor(Math.random() * 1000)}`;\n    }\n\n    const readOnlyFields = [\"UniqueNo\", \"createdAt\", \"createdBy\", \"isCurrent\"];\n\n    return (\n      <tr key={rowIndex}>\n        {Object.entries(labelToKey).map(([label, key], colIndex) => (\n          <td key={colIndex}>\n            <input\n              type=\"text\"\n              value={\n                typeof row[key] === \"object\" && row[key]?.seconds\n                  ? new Date(row[key].seconds * 1000).toLocaleString()\n                  : String(row[key] ?? \"\")\n              }\n              onChange={(e) => {\n                const updated = [...records];\n                updated[rowIndex][key] = e.target.value;\n                setRecords(updated);\n              }}\n              style={{ width: \"120px\" }}\n              readOnly={readOnlyFields.includes(key)}\n            />\n          </td>\n        ))}\n        <td>\n          <button onClick={() => handleUpdate(row)}>Save</button>\n          <button\n            onClick={() => {\n              if (window.confirm(\"Are you sure you want to delete this record?\")) {\n                handleDelete(row.id);\n              }\n            }}\n            style={{ marginLeft: \"8px\", color: \"red\" }}\n          >\n            Delete\n          </button>\n        </td>\n      </tr>\n    );\n  })}\n</tbody>\n\n\n  </table>\n</div>\n\n\n\n      {history.length > 0 && (\n  <>\n    <hr />\n    <h4>üîç Full Version History</h4>\n\n    {/* ‚úÖ Dynamically build all unique columns across all rows */}\n    {(() => {\n      const allKeys = new Set();\n      history.forEach(row => Object.keys(row).forEach(k => allKeys.add(k)));\n      const columnList = Array.from(allKeys);\n\n      return (\n        <div className=\"table-scroll-x\">\n  <table>\n    <thead>\n      <tr>\n        {columnList.map((col) => (\n          <th key={col}>{col}</th>\n        ))}\n      </tr>\n    </thead>\n    <tbody>\n      {[...history]\n        .sort((a, b) => {\n          if (a.isCurrent) return -1;\n          if (b.isCurrent) return 1;\n          const aTime = a.expiredAt?.seconds || 0;\n          const bTime = b.expiredAt?.seconds || 0;\n          return bTime - aTime;\n        })\n        .map((row, i) => (\n          <tr key={i}>\n            {columnList.map((col, j) => (\n              <td key={j}>\n                {typeof row[col] === 'object' && row[col]?.seconds\n                  ? new Date(row[col].seconds * 1000).toLocaleString()\n                  : String(row[col] ?? \"\")}\n              </td>\n            ))}\n          </tr>\n        ))}\n    </tbody>\n  </table>\n</div>\n      );\n    })()}\n  </>\n)}\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,kBAAkB,EAAEC,OAAO,QAAQ,eAAe;AAC3D,SACEC,UAAU,EACVC,MAAM,EACNC,KAAK,EACLC,KAAK,EACLC,OAAO,EACPC,SAAS,EACTC,SAAS,EACTC,GAAG,QACE,oBAAoB;AAC3B,SAASC,IAAI,EAAEC,EAAE,QAAQ,YAAY;AACrC,OAAOC,IAAI,MAAM,mBAAmB;AACpC,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,eAAe,MAAM,8BAA8B;AAC1D,OAAO,WAAW;;AAElB;AACA,MAAMC,UAAU,GAAG;EACjB,WAAW,EAAE,UAAU;EACvB,aAAa,EAAE,YAAY;EAC3B,gBAAgB,EAAE,eAAe;EACjC,UAAU,EAAE,UAAU;EACtB,eAAe,EAAE,cAAc;EAC/B,uBAAuB,EAAE,qBAAqB;EAC9C,mBAAmB,EAAE,gBAAgB;EACrC,aAAa,EAAE,YAAY;EAC3B,qBAAqB,EAAE,mBAAmB;EAC1C,QAAQ,EAAE,QAAQ;EAClB,aAAa,EAAE,aAAa;EAC5B,YAAY,EAAE,WAAW;EACzB,cAAc,EAAE,aAAa;EAC7B,WAAW,EAAE,UAAU;EACvB,eAAe,EAAE,cAAc;EAC/B,cAAc,EAAE,aAAa;EAC7B,iBAAiB,EAAE,gBAAgB;EACnC,YAAY,EAAE,UAAU;EACxB,QAAQ,EAAE,MAAM;EAChB,mBAAmB,EAAE,gBAAgB;EACrC,mBAAmB,EAAE,gBAAgB;EACrC,qBAAqB,EAAE,kBAAkB;EACzC,oBAAoB,EAAE,iBAAiB;EACvC,aAAa,EAAE,YAAY;EAC3B,aAAa,EAAE,YAAY;EAC3B,kBAAkB,EAAE,gBAAgB;EACpC,iBAAiB,EAAE,gBAAgB;EACnC,mBAAmB,EAAE,kBAAkB;EACvC,2BAA2B,EAAE,yBAAyB;EACtD,wBAAwB,EAAE,aAAa;EACvC,oBAAoB,EAAE,mBAAmB;EACzC,aAAa,EAAE,YAAY;EAC3B,oBAAoB,EAAE,kBAAkB;EACxC,aAAa,EAAE,YAAY;EAC3B,kBAAkB,EAAE,gBAAgB;EACpC,mBAAmB,EAAE,kBAAkB;EACvC,uBAAuB,EAAE,qBAAqB;EAC9C,wBAAwB,EAAE,sBAAsB;EAChD,mBAAmB,EAAE,iBAAiB;EACtC,sBAAsB,EAAE,oBAAoB;EAC5C,uBAAuB,EAAE,qBAAqB;EAC9C,sBAAsB,EAAE,oBAAoB;EAC5C,sBAAsB,EAAE,mBAAmB;EAC3C,sBAAsB,EAAE,oBAAoB;EAC5C,2BAA2B,EAAE,wBAAwB;EACrD,0BAA0B,EAAE,wBAAwB;EACpD,8BAA8B,EAAE,2BAA2B;EAC3D,2BAA2B,EAAE,wBAAwB;EACrD,4BAA4B,EAAE,yBAAyB;EACvD,2BAA2B,EAAE,yBAAyB;EACtD,cAAc,EAAE,YAAY;EAC5B,2BAA2B,EAAE,uBAAuB;EACpD,gBAAgB,EAAE,aAAa;EAC/B,qBAAqB,EAAE,kBAAkB;EACzC,sBAAsB,EAAE,mBAAmB;EAC3C,cAAc,EAAE,aAAa;EAC7B,WAAW,EAAE,UAAU;EACvB,YAAY,EAAE,WAAW;EACzB,UAAU,EAAE,UAAU;EACtB,WAAW,EAAE,WAAW;EACxB,WAAW,EAAE,WAAW;EACxB,WAAW,EAAE;AACf,CAAC;AAED,MAAMC,UAAU,GAAGC,MAAM,CAACC,WAAW,CAACD,MAAM,CAACE,OAAO,CAACJ,UAAU,CAAC,CAACK,GAAG,CAAC,CAAC,CAACC,CAAC,EAAEC,CAAC,CAAC,KAAK,CAACA,CAAC,EAAED,CAAC,CAAC,CAAC,CAAC;AAGzF,MAAME,cAAc,GAAG,MAAAA,CAAA,KAAY;EACjC,IAAI;IACF,MAAMC,MAAM,GAAG,MAAMrB,MAAM,CAACD,UAAU,CAACS,EAAE,EAAE,iBAAiB,CAAC,EAAE;MAC7Dc,OAAO,EAAE,8BAA8B;MACvCC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEL,MAAM,CAACM,EAAE,CAAC;IAC9DC,KAAK,CAAC,iDAAiD,CAAC;EAC1D,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdJ,OAAO,CAACI,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACrDD,KAAK,CAAC,gCAAgC,GAAGC,KAAK,CAACP,OAAO,CAAC;EACzD;AACF,CAAC;AAED,SAASQ,GAAGA,CAAA,EAAG;EACb,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGpC,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACqC,OAAO,EAAEC,UAAU,CAAC,GAAGtC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACuC,OAAO,EAAEC,UAAU,CAAC,GAAGxC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACyC,SAAS,EAAEC,YAAY,CAAC,GAAG1C,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC2C,WAAW,EAAEC,cAAc,CAAC,GAAG5C,QAAQ,CAAC,UAAU,CAAC;EAE1DD,SAAS,CAAC,MAAM;IACd,MAAM8C,WAAW,GAAG5C,kBAAkB,CAACU,IAAI,EAAGmC,WAAW,IAAK;MAC5DjB,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEgB,WAAW,CAAC;MACxDV,OAAO,CAACU,WAAW,CAAC;IACtB,CAAC,CAAC;IACF,OAAO,MAAMD,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACF,MAAMC,KAAK,GAAGX,OAAO,CAAChB,GAAG,CAAC4B,MAAM,IAC9B7C,MAAM,CAACD,UAAU,CAACS,EAAE,EAAE,eAAe,CAAC,EAAE;QACtC,GAAGqC,MAAM;QACTC,SAAS,EAAEf,IAAI,CAACgB,KAAK;QACrBC,SAAS,EAAE,IAAIxB,IAAI,CAAC,CAAC;QACrByB,SAAS,EAAE,IAAI;QACfC,WAAW,EAAE,IAAI1B,IAAI,CAAC;MACxB,CAAC,CACH,CAAC;MACD,MAAM2B,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;MACxBhB,KAAK,CAAC,6BAA6B,CAAC;IACtC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdD,KAAK,CAAC,wBAAwB,GAAGC,KAAK,CAACP,OAAO,CAAC;IACjD;EACF,CAAC;EAED,MAAM+B,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF;MACA,MAAMC,EAAE,GAAGrD,KAAK,CAACF,UAAU,CAACS,EAAE,EAAE,eAAe,CAAC,EAAEN,KAAK,CAACqC,WAAW,EAAE,IAAI,EAAEF,SAAS,CAAC,CAAC;MACtF,MAAMkB,SAAS,GAAG,MAAMpD,OAAO,CAACmD,EAAE,CAAC;MACnC,MAAME,WAAW,GAAG,EAAE;MACtB,MAAMC,WAAW,GAAG,EAAE;MAEtBF,SAAS,CAACG,OAAO,CAAEC,OAAO,IAAK;QAC7B,MAAMC,GAAG,GAAG;UAAEjC,EAAE,EAAEgC,OAAO,CAAChC,EAAE;UAAE,GAAGgC,OAAO,CAACE,IAAI,CAAC;QAAE,CAAC;;QAEjD;QACA,IAAID,GAAG,CAACX,SAAS,KAAKa,SAAS,EAAE;UAC/BF,GAAG,CAACX,SAAS,GAAG,IAAI;QACtB;QAEAO,WAAW,CAACO,IAAI,CAACH,GAAG,CAAC;QACrB,IAAIA,GAAG,CAACX,SAAS,KAAK,IAAI,EAAEQ,WAAW,CAACM,IAAI,CAACH,GAAG,CAAC;MACnD,CAAC,CAAC;MAEF1B,UAAU,CAACuB,WAAW,CAAC;MACvBrB,UAAU,CAACoB,WAAW,CAAC;IACzB,CAAC,CAAC,OAAO3B,KAAK,EAAE;MACdD,KAAK,CAAC,iBAAiB,GAAGC,KAAK,CAACP,OAAO,CAAC;IAC1C;EACF,CAAC;EAED,MAAM0C,YAAY,GAAG,MAAOJ,GAAG,IAAK;IAClC,IAAI;MACF,MAAM;QAAEjC,EAAE;QAAE,GAAGsC;MAAK,CAAC,GAAGL,GAAG;MAC3B,MAAMM,SAAS,GAAG,CAAC,CAAC;MACpB,KAAK,MAAMC,GAAG,IAAIF,IAAI,EAAE;QAAA,IAAAG,SAAA;QACtBF,SAAS,CAACC,GAAG,CAAC,GACZ,OAAOF,IAAI,CAACE,GAAG,CAAC,KAAK,QAAQ,IAAI,OAAOF,IAAI,CAACE,GAAG,CAAC,KAAK,QAAQ,GAC1DF,IAAI,CAACE,GAAG,CAAC,GACTE,MAAM,EAAAD,SAAA,GAACH,IAAI,CAACE,GAAG,CAAC,cAAAC,SAAA,cAAAA,SAAA,GAAI,EAAE,CAAC;MAC/B;MAEA,MAAMhE,SAAS,CAACE,GAAG,CAACE,EAAE,EAAE,eAAe,EAAEmB,EAAE,CAAC,EAAE;QAC5CsB,SAAS,EAAE,KAAK;QAChBqB,SAAS,EAAE,IAAI9C,IAAI,CAAC,CAAC;QACrB+C,UAAU,EAAExC,IAAI,CAACgB;MACnB,CAAC,CAAC;MAEF,MAAMyB,UAAU,GAAG;QACjB,GAAGN,SAAS;QACZlB,SAAS,EAAE,IAAIxB,IAAI,CAAC,CAAC;QACrBsB,SAAS,EAAEf,IAAI,CAACgB,KAAK;QACrBE,SAAS,EAAE,IAAI;QACfC,WAAW,EAAE,IAAI1B,IAAI,CAAC;MACxB,CAAC;MAED,MAAMH,MAAM,GAAG,MAAMrB,MAAM,CAACD,UAAU,CAACS,EAAE,EAAE,eAAe,CAAC,EAAEgE,UAAU,CAAC;MAExE,MAAMC,cAAc,GAAGxC,OAAO,CAAChB,GAAG,CAAEyD,CAAC,IACnCA,CAAC,CAAC/C,EAAE,KAAKA,EAAE,GAAG;QAAE,GAAG6C,UAAU;QAAE7C,EAAE,EAAEN,MAAM,CAACM;MAAG,CAAC,GAAG+C,CACnD,CAAC;MACDxC,UAAU,CAACuC,cAAc,CAAC;MAC1BpB,YAAY,CAAC,CAAC;MAEdzB,KAAK,CAAC,0CAA0C,CAAC;IACnD,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdD,KAAK,CAAC,mBAAmB,GAAGC,KAAK,CAACP,OAAO,CAAC;IAC5C;EACF,CAAC;EAED,MAAMqD,YAAY,GAAG,MAAOhD,EAAE,IAAK;IACjC,IAAI;MACF,MAAMtB,SAAS,CAACC,GAAG,CAACE,EAAE,EAAE,eAAe,EAAEmB,EAAE,CAAC,CAAC;MAC7CO,UAAU,CAACD,OAAO,CAAC2C,MAAM,CAAEF,CAAC,IAAKA,CAAC,CAAC/C,EAAE,KAAKA,EAAE,CAAC,CAAC;MAC9CC,KAAK,CAAC,kCAAkC,CAAC;IAC3C,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdD,KAAK,CAAC,mBAAmB,GAAGC,KAAK,CAACP,OAAO,CAAC;IAC5C;EACF,CAAC;EAED,IAAI,CAACS,IAAI,EAAE,oBAAOrC,KAAA,CAAAmF,aAAA,CAACpE,IAAI;IAAAqE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC;EAE1B,oBACEzF,KAAA,CAAAmF,aAAA;IAAKO,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAG,CAAE;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1BzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,WAAS,EAACpD,IAAI,CAACgB,KAAU,CAAC,eAC9BrD,KAAA,CAAAmF,aAAA;IAAQS,OAAO,EAAEA,CAAA,KAAMxF,OAAO,CAACS,IAAI,CAAE;IAAAuE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAc,CAAC,eACrDzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAK,CAAC,eACNzF,KAAA,CAAAmF,aAAA;IAAQS,OAAO,EAAElE,cAAe;IAAA0D,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,0BAAgC,CAAC,eAClEzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAK,CAAC,eAENzF,KAAA,CAAAmF,aAAA,CAACnE,UAAU;IAAC6E,YAAY,EAAG1B,IAAI,IAAK3B,UAAU,CAAC,CAAC,GAAGD,OAAO,EAAE,GAAG4B,IAAI,CAAC,CAAE;IAAAiB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eACzEzF,KAAA,CAAAmF,aAAA,CAAClE,eAAe;IAAC6E,QAAQ,EAAG5B,GAAG,IAAK1B,UAAU,CAAC,CAAC,GAAGD,OAAO,EAAE2B,GAAG,CAAC,CAAE;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC,eAErEzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAK,CAAC,eACNzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,yBAA2B,CAAC,eAChCzF,KAAA,CAAAmF,aAAA;IAAQY,KAAK,EAAElD,WAAY;IAACmD,QAAQ,EAAGC,CAAC,IAAKnD,cAAc,CAACmD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1EzF,KAAA,CAAAmF,aAAA;IAAQY,KAAK,EAAC,UAAU;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAAgB,CAAC,eAC1CzF,KAAA,CAAAmF,aAAA;IAAQY,KAAK,EAAC,QAAQ;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAc,CAC/B,CAAC,eACTzF,KAAA,CAAAmF,aAAA;IACEgB,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,cAAc;IAC1BL,KAAK,EAAEpD,SAAU;IACjBqD,QAAQ,EAAGC,CAAC,IAAKrD,YAAY,CAACqD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;IAC9CL,KAAK,EAAE;MAAEW,MAAM,EAAE;IAAS,CAAE;IAAAjB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC7B,CAAC,eACFzF,KAAA,CAAAmF,aAAA;IAAQS,OAAO,EAAEjC,YAAa;IAAAyB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAc,CAAC,eAE9CzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAK,CAAC,eACNzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,0BAA4B,CAAC,eACvCzF,KAAA,CAAAmF,aAAA;IAAKmB,SAAS,EAAC,gBAAgB;IAAAlB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7BzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACG,CACC,UAAU,EAAE,WAAW,EAAE,aAAa,EAAE,gBAAgB,EAAE,UAAU,EAAE,eAAe,EACrF,uBAAuB,EAAE,mBAAmB,EAAE,aAAa,EAAE,qBAAqB,EAClF,QAAQ,EAAE,aAAa,EAAE,YAAY,EAAE,cAAc,EAAE,WAAW,EAAE,eAAe,EACnF,cAAc,EAAE,iBAAiB,EAAE,YAAY,EAAE,QAAQ,EAAE,mBAAmB,EAC9E,mBAAmB,EAAE,qBAAqB,EAAE,oBAAoB,EAAE,aAAa,EAC/E,aAAa,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,mBAAmB,EACzE,2BAA2B,EAAE,wBAAwB,EAAE,oBAAoB,EAC3E,aAAa,EAAE,oBAAoB,EAAE,aAAa,EAAE,kBAAkB,EACtE,mBAAmB,EAAE,uBAAuB,EAAE,wBAAwB,EACtE,mBAAmB,EAAE,sBAAsB,EAAE,uBAAuB,EACpE,sBAAsB,EAAE,sBAAsB,EAAE,sBAAsB,EACtE,2BAA2B,EAAE,0BAA0B,EAAE,8BAA8B,EACvF,2BAA2B,EAAE,4BAA4B,EAAE,2BAA2B,EACtF,cAAc,EAAE,2BAA2B,EAAE,gBAAgB,EAAE,qBAAqB,EACpF,sBAAsB,EAAE,cAAc,EAAE,WAAW,EAAE,YAAY,EACjE,WAAW,EAAE,WAAW,EAAE,WAAW,CACtC,CAAClE,GAAG,CAAEgF,GAAG,iBACRvG,KAAA,CAAAmF,aAAA;IAAIV,GAAG,EAAE8B,GAAI;IAAAnB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEc,GAAQ,CACxB,CAAC,eACFvG,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,QAAU,CACZ,CACC,CAAC,eACRzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACDlD,OAAO,CAAChB,GAAG,CAAC,CAAC2C,GAAG,EAAEsC,QAAQ,KAAK;IAC9B,IAAI,CAACtC,GAAG,CAACuC,QAAQ,EAAE;MACjBvC,GAAG,CAACuC,QAAQ,GAAG,OAAO3E,IAAI,CAAC4E,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE;IACxE;IAEA,MAAMC,cAAc,GAAG,CAAC,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,CAAC;IAE1E,oBACE9G,KAAA,CAAAmF,aAAA;MAAIV,GAAG,EAAE+B,QAAS;MAAApB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACfrE,MAAM,CAACE,OAAO,CAACJ,UAAU,CAAC,CAACK,GAAG,CAAC,CAAC,CAACwF,KAAK,EAAEtC,GAAG,CAAC,EAAEuC,QAAQ;MAAA,IAAAC,QAAA,EAAAC,SAAA;MAAA,oBACrDlH,KAAA,CAAAmF,aAAA;QAAIV,GAAG,EAAEuC,QAAS;QAAA5B,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,gBAChBzF,KAAA,CAAAmF,aAAA;QACEgB,IAAI,EAAC,MAAM;QACXJ,KAAK,EACH,OAAO7B,GAAG,CAACO,GAAG,CAAC,KAAK,QAAQ,MAAAwC,QAAA,GAAI/C,GAAG,CAACO,GAAG,CAAC,cAAAwC,QAAA,uBAARA,QAAA,CAAUE,OAAO,IAC7C,IAAIrF,IAAI,CAACoC,GAAG,CAACO,GAAG,CAAC,CAAC0C,OAAO,GAAG,IAAI,CAAC,CAACC,cAAc,CAAC,CAAC,GAClDzC,MAAM,EAAAuC,SAAA,GAAChD,GAAG,CAACO,GAAG,CAAC,cAAAyC,SAAA,cAAAA,SAAA,GAAI,EAAE,CAC1B;QACDlB,QAAQ,EAAGC,CAAC,IAAK;UACf,MAAMoB,OAAO,GAAG,CAAC,GAAG9E,OAAO,CAAC;UAC5B8E,OAAO,CAACb,QAAQ,CAAC,CAAC/B,GAAG,CAAC,GAAGwB,CAAC,CAACC,MAAM,CAACH,KAAK;UACvCvD,UAAU,CAAC6E,OAAO,CAAC;QACrB,CAAE;QACF3B,KAAK,EAAE;UAAE4B,KAAK,EAAE;QAAQ,CAAE;QAC1BC,QAAQ,EAAET,cAAc,CAACU,QAAQ,CAAC/C,GAAG,CAAE;QAAAW,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,CACxC,CACC,CAAC;IAAA,CACN,CAAC,eACFzF,KAAA,CAAAmF,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACEzF,KAAA,CAAAmF,aAAA;MAAQS,OAAO,EAAEA,CAAA,KAAMtB,YAAY,CAACJ,GAAG,CAAE;MAAAkB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAC,MAAY,CAAC,eACvDzF,KAAA,CAAAmF,aAAA;MACES,OAAO,EAAEA,CAAA,KAAM;QACb,IAAI6B,MAAM,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;UAClEzC,YAAY,CAACf,GAAG,CAACjC,EAAE,CAAC;QACtB;MACF,CAAE;MACFyD,KAAK,EAAE;QAAEiC,UAAU,EAAE,KAAK;QAAEC,KAAK,EAAE;MAAM,CAAE;MAAAxC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAC5C,QAEO,CACN,CACF,CAAC;EAET,CAAC,CACI,CAGE,CACJ,CAAC,EAIChD,OAAO,CAACoF,MAAM,GAAG,CAAC,iBACvB7H,KAAA,CAAAmF,aAAA,CAAAnF,KAAA,CAAA8H,QAAA,qBACE9H,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAK,CAAC,eACNzF,KAAA,CAAAmF,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,mCAA2B,CAAC,EAG/B,CAAC,MAAM;IACN,MAAMsC,OAAO,GAAG,IAAIC,GAAG,CAAC,CAAC;IACzBvF,OAAO,CAACuB,OAAO,CAACE,GAAG,IAAI9C,MAAM,CAAC6G,IAAI,CAAC/D,GAAG,CAAC,CAACF,OAAO,CAACxC,CAAC,IAAIuG,OAAO,CAACG,GAAG,CAAC1G,CAAC,CAAC,CAAC,CAAC;IACrE,MAAM2G,UAAU,GAAGC,KAAK,CAACC,IAAI,CAACN,OAAO,CAAC;IAEtC,oBACE/H,KAAA,CAAAmF,aAAA;MAAKmB,SAAS,EAAC,gBAAgB;MAAAlB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACrCzF,KAAA,CAAAmF,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACEzF,KAAA,CAAAmF,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACEzF,KAAA,CAAAmF,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACG0C,UAAU,CAAC5G,GAAG,CAAEgF,GAAG,iBAClBvG,KAAA,CAAAmF,aAAA;MAAIV,GAAG,EAAE8B,GAAI;MAAAnB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAEc,GAAQ,CACxB,CACC,CACC,CAAC,eACRvG,KAAA,CAAAmF,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACG,CAAC,GAAGhD,OAAO,CAAC,CACV6F,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAAA,IAAAC,YAAA,EAAAC,YAAA;MACd,IAAIH,CAAC,CAAChF,SAAS,EAAE,OAAO,CAAC,CAAC;MAC1B,IAAIiF,CAAC,CAACjF,SAAS,EAAE,OAAO,CAAC;MACzB,MAAMoF,KAAK,GAAG,EAAAF,YAAA,GAAAF,CAAC,CAAC3D,SAAS,cAAA6D,YAAA,uBAAXA,YAAA,CAAatB,OAAO,KAAI,CAAC;MACvC,MAAMyB,KAAK,GAAG,EAAAF,YAAA,GAAAF,CAAC,CAAC5D,SAAS,cAAA8D,YAAA,uBAAXA,YAAA,CAAavB,OAAO,KAAI,CAAC;MACvC,OAAOyB,KAAK,GAAGD,KAAK;IACtB,CAAC,CAAC,CACDpH,GAAG,CAAC,CAAC2C,GAAG,EAAE2E,CAAC,kBACV7I,KAAA,CAAAmF,aAAA;MAAIV,GAAG,EAAEoE,CAAE;MAAAzD,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACR0C,UAAU,CAAC5G,GAAG,CAAC,CAACgF,GAAG,EAAEuC,CAAC;MAAA,IAAAC,QAAA,EAAAC,SAAA;MAAA,oBACrBhJ,KAAA,CAAAmF,aAAA;QAAIV,GAAG,EAAEqE,CAAE;QAAA1D,MAAA;QAAAC,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MAAA,GACR,OAAOvB,GAAG,CAACqC,GAAG,CAAC,KAAK,QAAQ,MAAAwC,QAAA,GAAI7E,GAAG,CAACqC,GAAG,CAAC,cAAAwC,QAAA,uBAARA,QAAA,CAAU5B,OAAO,IAC9C,IAAIrF,IAAI,CAACoC,GAAG,CAACqC,GAAG,CAAC,CAACY,OAAO,GAAG,IAAI,CAAC,CAACC,cAAc,CAAC,CAAC,GAClDzC,MAAM,EAAAqE,SAAA,GAAC9E,GAAG,CAACqC,GAAG,CAAC,cAAAyC,SAAA,cAAAA,SAAA,GAAI,EAAE,CACvB,CAAC;IAAA,CACN,CACC,CACL,CACE,CACF,CACJ,CAAC;EAEF,CAAC,EAAE,CACH,CAGK,CAAC;AAEV;AAEA,eAAe5G,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module"}