{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anupp\\\\Downloads\\\\fleet-billing-app\\\\fleet-billing-app\\\\src\\\\App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { collection, addDoc, query, where, getDocs, updateDoc, deleteDoc, doc } from \"firebase/firestore\";\nimport { auth, db } from \"./firebase\";\nimport Auth from \"./components/Auth\";\nimport UploadForm from \"./components/UploadForm\";\nimport ManualEntryForm from \"./components/ManualEntryForm\";\nimport \"./App.css\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport * as XLSX from \"xlsx\";\nconst labelToKey = {\n  \"Fleet Number\": \"fleetNumber\",\n  \"Date (dd/mm/yyyy)\": \"date\",\n  \"Months\": \"months\",\n  \"Indent No.\": \"indentNo\",\n  \"Origin\": \"origin\",\n  \"Destination\": \"destination\",\n  \"Customer\": \"customer\",\n  \"Customer Type\": \"customerType\",\n  \"Vehicle No\": \"vehicleNo\",\n  \"Vendor\": \"vendor\",\n  \"Sales Rate\": \"salesRate\",\n  \"Buy Rate\": \"buyRate\",\n  // Customer Master\n  \"To be Advance(Sales)\": \"customerMaster.toBeAdvance\",\n  \"Advance/Payment Received\": \"customerMaster.advanceReceived\",\n  \"Adv Deviation(as on Date)\": \"customerMaster.advDeviation\",\n  \"Advance Rec Date\": \"customerMaster.advanceRecDate\",\n  \"Validated-Advance UTR Discription\": \"customerMaster.validatedAdvanceUTRDescription\",\n  \"Validated UTR -Advance Amount\": \"customerMaster.validatedAdvanceAmount\",\n  \"Balance\": \"customerMaster.balance\",\n  \"Processing charges\": \"customerMaster.processingCharges\",\n  \"Inward-Mis Charges\": \"customerMaster.inwardMisCharges\",\n  \"Outward-Mis Charges\": \"customerMaster.outwardMisCharges\",\n  \"Bal Receved\": \"customerMaster.balanceReceived\",\n  \"Remaining Balance\": \"customerMaster.remainingBalance\",\n  \"Balance Rec Date\": \"customerMaster.balanceRecDate\",\n  \"Validated-Balance UTR\": \"customerMaster.validatedBalanceUTR\",\n  \"Validate Balance UTR-Amount\": \"customerMaster.validatedBalanceUTRAmount\",\n  // Vendor Master\n  \"Vendor -OutWard Payment\": \"vendorMaster.vendorOutwardPayment\",\n  \"Paid Amount\": \"vendorMaster.paidAmount\",\n  \"Balance Pending\": \"vendorMaster.balancePending\",\n  \"Reamrk\": \"vendorMaster.vendorRemark\",\n  // POD Master\n  \"POD Rev-Vendor-Date\": \"podMaster.podVendorDate\",\n  \"POD-Send to Customer Date\": \"podMaster.podSendToCustomerDate\",\n  \"Doc-No.\": \"podMaster.docNo\",\n  \"POD-Customer Rec\": \"podMaster.podCustomerRec\",\n  \"Today\": \"podMaster.today\",\n  \"Balance OverDue Days\": \"podMaster.balanceOverdueDays\",\n  \"To be Collected Amount\": \"podMaster.toBeCollectedAmount\",\n  // Audit Fields\n  \"isCurrent\": \"isCurrent\",\n  \"createdBy\": \"createdBy\",\n  \"createdAt\": \"createdAt\",\n  \"Update Description\": \"updateDescription\"\n};\nconst keyToLabel = Object.fromEntries(Object.entries(labelToKey).map(([label, key]) => [key, label]));\nconst flattenRow = row => {\n  const flat = {};\n  Object.entries(row).forEach(([key, value]) => {\n    if (typeof value === \"object\" && value !== null && !Array.isArray(value) && !(value instanceof Date)) {\n      Object.entries(value).forEach(([subKey, subVal]) => {\n        flat[`${key}.${subKey}`] = subVal;\n      });\n    } else {\n      flat[key] = value;\n    }\n  });\n  return flat;\n};\nconst App = () => {\n  const [user, setUser] = useState(null);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const [searchField, setSearchField] = useState(\"fleetNumber\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n  const [isSearching, setIsSearching] = useState(false);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, currentUser => setUser(currentUser));\n    return () => unsubscribe();\n  }, []);\n  const handleSearch = async () => {\n    setIsSearching(true);\n    try {\n      const fleetRef = collection(db, \"fleet_records\");\n      let q;\n      if (searchField === \"Date\") {\n        if (!startDate || !endDate) {\n          toast.warn(\"Please select date range\");\n          setIsSearching(false);\n          return;\n        }\n        const fromDate = new Date(startDate);\n        const toDate = new Date(endDate + \"T23:59:59\");\n        q = query(fleetRef, where(\"createdAt\", \">=\", fromDate), where(\"createdAt\", \"<=\", toDate));\n      } else {\n        q = query(fleetRef, where(searchField, \"==\", searchKey));\n      }\n      const snapshot = await getDocs(q);\n      const all = [];\n      const curr = [];\n      snapshot.forEach(docSnap => {\n        const row = {\n          id: docSnap.id,\n          ...flattenRow(docSnap.data())\n        };\n        all.push(row);\n        if (row.isCurrent) curr.push(row);\n      });\n      setHistory(all);\n      setRecords(curr);\n      if (all.length === 0) toast.info(\"No data found.\");\n    } catch (err) {\n      toast.error(\"Search error: \" + err.message);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const handleUpdate = async row => {\n    try {\n      const {\n        id,\n        fleetNumber,\n        ...updatedData\n      } = row;\n      const q = query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumber), where(\"isCurrent\", \"==\", true));\n      const snap = await getDocs(q);\n      const oldDoc = snap.docs.find(d => d.id === id);\n      const oldData = (oldDoc === null || oldDoc === void 0 ? void 0 : oldDoc.data()) || {};\n      const updateLog = [];\n      for (const key in updatedData) {\n        var _updatedData$key, _oldData$key;\n        const newVal = (_updatedData$key = updatedData[key]) !== null && _updatedData$key !== void 0 ? _updatedData$key : \"\";\n        const oldVal = (_oldData$key = oldData[key]) !== null && _oldData$key !== void 0 ? _oldData$key : \"\";\n        if (String(newVal).trim() !== String(oldVal).trim()) updateLog.push(key);\n      }\n      if (updateLog.length === 0) return toast.info(\"No changes detected\");\n      const confirm = window.confirm(\"Update fields: \" + updateLog.map(k => keyToLabel[k]).join(\", \"));\n      if (!confirm) return;\n      await updateDoc(doc(db, \"fleet_records\", id), {\n        isCurrent: false,\n        expiredAt: new Date(),\n        modifiedBy: user === null || user === void 0 ? void 0 : user.email\n      });\n      await addDoc(collection(db, \"fleet_records\"), {\n        ...updatedData,\n        fleetNumber,\n        createdAt: new Date(),\n        createdBy: user === null || user === void 0 ? void 0 : user.email,\n        isCurrent: true,\n        versionDate: new Date(),\n        updateDescription: updateLog.map(k => keyToLabel[k]).join(\", \")\n      });\n      toast.success(\"Updated\");\n    } catch (err) {\n      toast.error(\"Update failed: \" + err.message);\n    }\n  };\n  const handleDelete = async fleetNumber => {\n    const confirm = window.confirm(\"Delete all versions of fleet number \" + fleetNumber + \"?\");\n    if (!confirm) return;\n    try {\n      const q = query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumber));\n      const snap = await getDocs(q);\n      await Promise.all(snap.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\n      setRecords(prev => prev.filter(r => r.fleetNumber !== fleetNumber));\n      setHistory(prev => prev.filter(r => r.fleetNumber !== fleetNumber));\n      toast.success(\"Deleted\");\n    } catch (err) {\n      toast.error(\"Delete failed: \" + err.message);\n    }\n  };\n  const handleExport = () => {\n    const exportData = history.map(flattenRow).map(row => {\n      const out = {};\n      Object.entries(labelToKey).forEach(([label, key]) => {\n        var _row$key;\n        out[label] = (_row$key = row[key]) !== null && _row$key !== void 0 ? _row$key : \"\";\n      });\n      return out;\n    });\n    const ws = XLSX.utils.json_to_sheet(exportData);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, \"Export\");\n    XLSX.writeFile(wb, \"fleet_data_export.xlsx\");\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }\n  }, !user ? /*#__PURE__*/React.createElement(Auth, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => signOut(auth),\n    style: {\n      float: \"right\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, \"Logout\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, \"Welcome, \", user.email), /*#__PURE__*/React.createElement(ManualEntryForm, {\n    onAddRow: (row, addToHistory) => {\n      setRecords([flattenRow(row)]);\n      if (addToHistory) setHistory([flattenRow(row)]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UploadForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, \"Search Field:\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: searchField,\n    onChange: e => setSearchField(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"fleetNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 15\n    }\n  }, \"Fleet Number\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }, \"Date Range\")), searchField === \"Date\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: startDate,\n    onChange: e => setStartDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    value: endDate,\n    onChange: e => setEndDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(\"input\", {\n    value: searchKey,\n    onChange: e => setSearchKey(e.target.value),\n    placeholder: \"Enter value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSearch,\n    disabled: isSearching,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, \"Search\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleExport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, \"Export\")), records.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }\n  }, \"Editable Current Records\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 19\n    }\n  }, Object.keys(labelToKey).map(label => /*#__PURE__*/React.createElement(\"th\", {\n    key: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 59\n    }\n  }, label)), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 21\n    }\n  }, \"Update\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 21\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 17\n    }\n  }, records.map((row, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: row.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 21\n    }\n  }, Object.entries(labelToKey).map(([label, key]) => {\n    var _row$key2;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: (_row$key2 = row[key]) !== null && _row$key2 !== void 0 ? _row$key2 : \"\",\n      onChange: e => {\n        const updated = [...records];\n        updated[i][key] = e.target.value;\n        setRecords(updated);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 27\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleUpdate(row),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 27\n    }\n  }, \"Update\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleDelete(row.fleetNumber),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 27\n    }\n  }, \"Delete\"))))))), history.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 15\n    }\n  }, \"Version History\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 19\n    }\n  }, Object.keys(labelToKey).map(label => /*#__PURE__*/React.createElement(\"th\", {\n    key: label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 59\n    }\n  }, label)))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, history.map(row => /*#__PURE__*/React.createElement(\"tr\", {\n    key: row.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }, Object.values(labelToKey).map(key => {\n    var _row$key3;\n    return /*#__PURE__*/React.createElement(\"td\", {\n      key: key,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 25\n      }\n    }, (_row$key3 = row[key]) !== null && _row$key3 !== void 0 ? _row$key3 : \"\");\n  })))))), /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-right\",\n    autoClose: 3000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }\n  })));\n};\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","onAuthStateChanged","signOut","collection","addDoc","query","where","getDocs","updateDoc","deleteDoc","doc","auth","db","Auth","UploadForm","ManualEntryForm","toast","ToastContainer","XLSX","labelToKey","keyToLabel","Object","fromEntries","entries","map","label","key","flattenRow","row","flat","forEach","value","Array","isArray","Date","subKey","subVal","App","user","setUser","records","setRecords","history","setHistory","searchKey","setSearchKey","searchField","setSearchField","startDate","setStartDate","endDate","setEndDate","isSearching","setIsSearching","unsubscribe","currentUser","handleSearch","fleetRef","q","warn","fromDate","toDate","snapshot","all","curr","docSnap","id","data","push","isCurrent","length","info","err","error","message","handleUpdate","fleetNumber","updatedData","snap","oldDoc","docs","find","d","oldData","updateLog","_updatedData$key","_oldData$key","newVal","oldVal","String","trim","confirm","window","k","join","expiredAt","modifiedBy","email","createdAt","createdBy","versionDate","updateDescription","success","handleDelete","Promise","prev","filter","r","handleExport","exportData","out","_row$key","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","onClick","style","float","onAddRow","addToHistory","onChange","e","target","type","placeholder","disabled","keys","i","_row$key2","updated","values","_row$key3","position","autoClose"],"sources":["C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc\r\n} from \"firebase/firestore\";\r\nimport { auth, db } from \"./firebase\";\r\nimport Auth from \"./components/Auth\";\r\nimport UploadForm from \"./components/UploadForm\";\r\nimport ManualEntryForm from \"./components/ManualEntryForm\";\r\nimport \"./App.css\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst labelToKey = {\r\n  \"Fleet Number\": \"fleetNumber\",\r\n  \"Date (dd/mm/yyyy)\": \"date\",\r\n  \"Months\": \"months\",\r\n  \"Indent No.\": \"indentNo\",\r\n  \"Origin\": \"origin\",\r\n  \"Destination\": \"destination\",\r\n  \"Customer\": \"customer\",\r\n  \"Customer Type\": \"customerType\",\r\n  \"Vehicle No\": \"vehicleNo\",\r\n  \"Vendor\": \"vendor\",\r\n  \"Sales Rate\": \"salesRate\",\r\n  \"Buy Rate\": \"buyRate\",\r\n  // Customer Master\r\n  \"To be Advance(Sales)\": \"customerMaster.toBeAdvance\",\r\n  \"Advance/Payment Received\": \"customerMaster.advanceReceived\",\r\n  \"Adv Deviation(as on Date)\": \"customerMaster.advDeviation\",\r\n  \"Advance Rec Date\": \"customerMaster.advanceRecDate\",\r\n  \"Validated-Advance UTR Discription\": \"customerMaster.validatedAdvanceUTRDescription\",\r\n  \"Validated UTR -Advance Amount\": \"customerMaster.validatedAdvanceAmount\",\r\n  \"Balance\": \"customerMaster.balance\",\r\n  \"Processing charges\": \"customerMaster.processingCharges\",\r\n  \"Inward-Mis Charges\": \"customerMaster.inwardMisCharges\",\r\n  \"Outward-Mis Charges\": \"customerMaster.outwardMisCharges\",\r\n  \"Bal Receved\": \"customerMaster.balanceReceived\",\r\n  \"Remaining Balance\": \"customerMaster.remainingBalance\",\r\n  \"Balance Rec Date\": \"customerMaster.balanceRecDate\",\r\n  \"Validated-Balance UTR\": \"customerMaster.validatedBalanceUTR\",\r\n  \"Validate Balance UTR-Amount\": \"customerMaster.validatedBalanceUTRAmount\",\r\n  // Vendor Master\r\n  \"Vendor -OutWard Payment\": \"vendorMaster.vendorOutwardPayment\",\r\n  \"Paid Amount\": \"vendorMaster.paidAmount\",\r\n  \"Balance Pending\": \"vendorMaster.balancePending\",\r\n  \"Reamrk\": \"vendorMaster.vendorRemark\",\r\n  // POD Master\r\n  \"POD Rev-Vendor-Date\": \"podMaster.podVendorDate\",\r\n  \"POD-Send to Customer Date\": \"podMaster.podSendToCustomerDate\",\r\n  \"Doc-No.\": \"podMaster.docNo\",\r\n  \"POD-Customer Rec\": \"podMaster.podCustomerRec\",\r\n  \"Today\": \"podMaster.today\",\r\n  \"Balance OverDue Days\": \"podMaster.balanceOverdueDays\",\r\n  \"To be Collected Amount\": \"podMaster.toBeCollectedAmount\",\r\n  // Audit Fields\r\n  \"isCurrent\": \"isCurrent\",\r\n  \"createdBy\": \"createdBy\",\r\n  \"createdAt\": \"createdAt\",\r\n  \"Update Description\": \"updateDescription\"\r\n};\r\n\r\nconst keyToLabel = Object.fromEntries(Object.entries(labelToKey).map(([label, key]) => [key, label]));\r\n\r\nconst flattenRow = (row) => {\r\n  const flat = {};\r\n  Object.entries(row).forEach(([key, value]) => {\r\n    if (typeof value === \"object\" && value !== null && !Array.isArray(value) && !(value instanceof Date)) {\r\n      Object.entries(value).forEach(([subKey, subVal]) => {\r\n        flat[`${key}.${subKey}`] = subVal;\r\n      });\r\n    } else {\r\n      flat[key] = value;\r\n    }\r\n  });\r\n  return flat;\r\n};\r\n\r\nconst App = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [records, setRecords] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  const [searchField, setSearchField] = useState(\"fleetNumber\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [isSearching, setIsSearching] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => setUser(currentUser));\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleSearch = async () => {\r\n    setIsSearching(true);\r\n    try {\r\n      const fleetRef = collection(db, \"fleet_records\");\r\n      let q;\r\n      if (searchField === \"Date\") {\r\n        if (!startDate || !endDate) {\r\n          toast.warn(\"Please select date range\");\r\n          setIsSearching(false);\r\n          return;\r\n        }\r\n        const fromDate = new Date(startDate);\r\n        const toDate = new Date(endDate + \"T23:59:59\");\r\n        q = query(fleetRef, where(\"createdAt\", \">=\", fromDate), where(\"createdAt\", \"<=\", toDate));\r\n      } else {\r\n        q = query(fleetRef, where(searchField, \"==\", searchKey));\r\n      }\r\n      const snapshot = await getDocs(q);\r\n      const all = [];\r\n      const curr = [];\r\n      snapshot.forEach((docSnap) => {\r\n        const row = { id: docSnap.id, ...flattenRow(docSnap.data()) };\r\n        all.push(row);\r\n        if (row.isCurrent) curr.push(row);\r\n      });\r\n      setHistory(all);\r\n      setRecords(curr);\r\n      if (all.length === 0) toast.info(\"No data found.\");\r\n    } catch (err) {\r\n      toast.error(\"Search error: \" + err.message);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (row) => {\r\n    try {\r\n      const { id, fleetNumber, ...updatedData } = row;\r\n      const q = query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumber), where(\"isCurrent\", \"==\", true));\r\n      const snap = await getDocs(q);\r\n      const oldDoc = snap.docs.find(d => d.id === id);\r\n      const oldData = oldDoc?.data() || {};\r\n      const updateLog = [];\r\n      for (const key in updatedData) {\r\n        const newVal = updatedData[key] ?? \"\";\r\n        const oldVal = oldData[key] ?? \"\";\r\n        if (String(newVal).trim() !== String(oldVal).trim()) updateLog.push(key);\r\n      }\r\n      if (updateLog.length === 0) return toast.info(\"No changes detected\");\r\n      const confirm = window.confirm(\"Update fields: \" + updateLog.map(k => keyToLabel[k]).join(\", \"));\r\n      if (!confirm) return;\r\n      await updateDoc(doc(db, \"fleet_records\", id), { isCurrent: false, expiredAt: new Date(), modifiedBy: user?.email });\r\n      await addDoc(collection(db, \"fleet_records\"), {\r\n        ...updatedData,\r\n        fleetNumber,\r\n        createdAt: new Date(),\r\n        createdBy: user?.email,\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n        updateDescription: updateLog.map(k => keyToLabel[k]).join(\", \")\r\n      });\r\n      toast.success(\"Updated\");\r\n    } catch (err) {\r\n      toast.error(\"Update failed: \" + err.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fleetNumber) => {\r\n    const confirm = window.confirm(\"Delete all versions of fleet number \" + fleetNumber + \"?\");\r\n    if (!confirm) return;\r\n    try {\r\n      const q = query(collection(db, \"fleet_records\"), where(\"fleetNumber\", \"==\", fleetNumber));\r\n      const snap = await getDocs(q);\r\n      await Promise.all(snap.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\r\n      setRecords(prev => prev.filter(r => r.fleetNumber !== fleetNumber));\r\n      setHistory(prev => prev.filter(r => r.fleetNumber !== fleetNumber));\r\n      toast.success(\"Deleted\");\r\n    } catch (err) {\r\n      toast.error(\"Delete failed: \" + err.message);\r\n    }\r\n  };\r\n\r\n  const handleExport = () => {\r\n    const exportData = history.map(flattenRow).map(row => {\r\n      const out = {};\r\n      Object.entries(labelToKey).forEach(([label, key]) => {\r\n        out[label] = row[key] ?? \"\";\r\n      });\r\n      return out;\r\n    });\r\n    const ws = XLSX.utils.json_to_sheet(exportData);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Export\");\r\n    XLSX.writeFile(wb, \"fleet_data_export.xlsx\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      {!user ? (\r\n        <Auth />\r\n      ) : (\r\n        <>\r\n          <button onClick={() => signOut(auth)} style={{ float: \"right\" }}>Logout</button>\r\n          <h2>Welcome, {user.email}</h2>\r\n          <ManualEntryForm onAddRow={(row, addToHistory) => {\r\n            setRecords([flattenRow(row)]);\r\n            if (addToHistory) setHistory([flattenRow(row)]);\r\n          }} />\r\n\r\n          <UploadForm />\r\n\r\n          <div className=\"search-box\">\r\n            <label>Search Field:</label>\r\n            <select value={searchField} onChange={(e) => setSearchField(e.target.value)}>\r\n              <option value=\"fleetNumber\">Fleet Number</option>\r\n              <option value=\"Date\">Date Range</option>\r\n            </select>\r\n            {searchField === \"Date\" ? (\r\n              <>\r\n                <input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\r\n                <input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\r\n              </>\r\n            ) : (\r\n              <input value={searchKey} onChange={(e) => setSearchKey(e.target.value)} placeholder=\"Enter value\" />\r\n            )}\r\n            <button onClick={handleSearch} disabled={isSearching}>Search</button>\r\n            <button onClick={handleExport}>Export</button>\r\n          </div>\r\n\r\n          {records.length > 0 && (\r\n            <>\r\n              <h4>Editable Current Records</h4>\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    {Object.keys(labelToKey).map(label => <th key={label}>{label}</th>)}\r\n                    <th>Update</th>\r\n                    <th>Delete</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {records.map((row, i) => (\r\n                    <tr key={row.id}>\r\n                      {Object.entries(labelToKey).map(([label, key]) => (\r\n                        <td key={key}>\r\n                          <input\r\n                            value={row[key] ?? \"\"}\r\n                            onChange={(e) => {\r\n                              const updated = [...records];\r\n                              updated[i][key] = e.target.value;\r\n                              setRecords(updated);\r\n                            }}\r\n                          />\r\n                        </td>\r\n                      ))}\r\n                      <td><button onClick={() => handleUpdate(row)}>Update</button></td>\r\n                      <td><button onClick={() => handleDelete(row.fleetNumber)}>Delete</button></td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </>\r\n          )}\r\n\r\n          {history.length > 0 && (\r\n            <>\r\n              <h4>Version History</h4>\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    {Object.keys(labelToKey).map(label => <th key={label}>{label}</th>)}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {history.map((row) => (\r\n                    <tr key={row.id}>\r\n                      {Object.values(labelToKey).map(key => (\r\n                        <td key={key}>{row[key] ?? \"\"}</td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </>\r\n          )}\r\n\r\n          <ToastContainer position=\"bottom-right\" autoClose={3000} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}