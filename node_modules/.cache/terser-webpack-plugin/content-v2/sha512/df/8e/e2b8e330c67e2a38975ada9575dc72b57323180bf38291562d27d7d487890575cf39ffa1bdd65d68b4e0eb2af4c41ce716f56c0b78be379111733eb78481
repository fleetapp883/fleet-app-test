{"map":"{\"version\":3,\"sources\":[\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/firebase.js\",\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/components/Auth.js\",\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/components/ManualEntryForm.js\",\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/components/UploadForm.js\",\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/App.js\",\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/reportWebVitals.js\",\"C:/Users/anupp/Downloads/fleet-billing-app/fleet-billing-app/src/index.js\"],\"names\":[\"app\",\"initializeApp\",\"apiKey\",\"authDomain\",\"projectId\",\"storageBucket\",\"messagingSenderId\",\"appId\",\"measurementId\",\"auth\",\"getAuth\",\"db\",\"getFirestore\",\"styles\",\"container\",\"minHeight\",\"background\",\"display\",\"justifyContent\",\"alignItems\",\"padding\",\"card\",\"width\",\"maxWidth\",\"borderRadius\",\"boxShadow\",\"textAlign\",\"logo\",\"margin\",\"title\",\"marginBottom\",\"color\",\"form\",\"flexDirection\",\"gap\",\"input\",\"border\",\"fontSize\",\"outline\",\"submitBtn\",\"backgroundColor\",\"cursor\",\"toggleBtn\",\"marginTop\",\"textDecoration\",\"Auth\",\"email\",\"setEmail\",\"useState\",\"password\",\"setPassword\",\"isLogin\",\"setIsLogin\",\"loading\",\"setLoading\",\"React\",\"createElement\",\"style\",\"src\",\"alt\",\"onSubmit\",\"async\",\"e\",\"preventDefault\",\"signInWithEmailAndPassword\",\"alert\",\"createUserWithEmailAndPassword\",\"err\",\"message\",\"type\",\"placeholder\",\"value\",\"onChange\",\"target\",\"required\",\"disabled\",\"onClick\",\"fixedFieldsInitial\",\"date\",\"months\",\"origin\",\"destination\",\"customer\",\"customerType\",\"vehicleNo\",\"vendor\",\"salesRate\",\"buyRate\",\"customerFields\",\"toBeAdvance\",\"advanceReceived\",\"advDeviation\",\"advanceRecDate\",\"validatedAdvanceUTRDescription\",\"validatedAdvanceAmount\",\"balance\",\"processingCharges\",\"inwardMisCharges\",\"outwardMisCharges\",\"balanceReceived\",\"remainingBalance\",\"balanceRecDate\",\"validatedBalanceUTR\",\"validatedBalanceUTRAmount\",\"vendorFields\",\"vendorOutwardPayment\",\"paidAmount\",\"balancePending\",\"vendorRemark\",\"podFields\",\"podVendorDate\",\"podSendToCustomerDate\",\"docNo\",\"podCustomerRec\",\"today\",\"balanceOverdueDays\",\"toBeCollectedAmount\",\"flattenObject\",\"obj\",\"prefix\",\"arguments\",\"length\",\"undefined\",\"result\",\"key\",\"fullKey\",\"concat\",\"seconds\",\"Object\",\"assign\",\"ManualEntryForm\",\"_ref\",\"onAddRow\",\"fixedFields\",\"setFixedFields\",\"customerData\",\"setCustomerData\",\"vendorData\",\"setVendorData\",\"podData\",\"setPodData\",\"indentNumber\",\"setIndentNumber\",\"docId\",\"setDocId\",\"showCustomer\",\"setShowCustomer\",\"showVendor\",\"setShowVendor\",\"showPod\",\"setShowPod\",\"customerSaved\",\"setCustomerSaved\",\"vendorSaved\",\"setVendorSaved\",\"podSaved\",\"setPodSaved\",\"useEffect\",\"storedIndentNo\",\"localStorage\",\"getItem\",\"storedFixed\",\"storedCustomer\",\"storedVendor\",\"storedPod\",\"storedDocId\",\"Number\",\"JSON\",\"parse\",\"convertDateFields\",\"data\",\"allowedKeys\",\"entries\",\"forEach\",\"_ref2\",\"includes\",\"parsed\",\"Date\",\"isNaN\",\"Timestamp\",\"fromDate\",\"handleFixedChange\",\"updated\",\"_objectSpread\",\"[object Object]\",\"name\",\"setItem\",\"stringify\",\"handleSectionChange\",\"section\",\"saveSection\",\"sectionName\",\"sectionData\",\"dateFields\",\"docRef\",\"doc\",\"updateDoc\",\"keys\",\"map\",\"label\",\"toLowerCase\",\"user\",\"currentUser\",\"indentNo\",\"counterRef\",\"runTransaction\",\"docSnap\",\"transaction\",\"get\",\"exists\",\"Error\",\"current\",\"nextFleetNo\",\"update\",\"getNextIndentNumber\",\"enrichedData\",\"createdAt\",\"createdBy\",\"isCurrent\",\"versionDate\",\"updateDescription\",\"addDoc\",\"collection\",\"id\",\"navigator\",\"clipboard\",\"writeText\",\"String\",\"Fragment\",\"checked\",\"marginLeft\",\"getDoc\",\"removeItem\",\"marginRight\",\"handleNewRecord\",\"window\",\"confirm\",\"UploadForm\",\"finalColumnOrder\",\"App\",\"setUser\",\"authLoading\",\"setAuthLoading\",\"records\",\"setRecords\",\"history\",\"setHistory\",\"searchKey\",\"setSearchKey\",\"searchField\",\"setSearchField\",\"startDate\",\"setStartDate\",\"endDate\",\"setEndDate\",\"originalRecords\",\"setOriginalRecords\",\"isSearching\",\"setIsSearching\",\"isExporting\",\"setIsExporting\",\"searchAttempted\",\"setSearchAttempted\",\"activeOnly\",\"setActiveOnly\",\"includeCustomer\",\"setIncludeCustomer\",\"includeVendor\",\"setIncludeVendor\",\"includePOD\",\"setIncludePOD\",\"unsubscribe\",\"onAuthStateChanged\",\"handleSearch\",\"fleetRef\",\"q\",\"toDate\",\"toast\",\"warn\",\"query\",\"where\",\"snapshot\",\"getDocs\",\"allVersions\",\"currentOnly\",\"rawData\",\"row\",\"push\",\"sort\",\"a\",\"b\",\"empty\",\"info\",\"error\",\"console\",\"overflowX\",\"className\",\"height\",\"signOut\",\"addToHistory\",\"flexWrap\",\"col\",\"replaceAll\",\"rowIndex\",\"j\",\"_row$col\",\"_row$col2\",\"toLocaleDateString\",\"toLocaleString\",\"readOnly\",\"updatedData\",\"_objectWithoutProperties\",\"_excluded\",\"oldDoc\",\"docs\",\"find\",\"oldData\",\"cleanData\",\"updateLog\",\"_updatedData$key\",\"_oldData$key\",\"newVal\",\"oldVal\",\"trim\",\"join\",\"expiredAt\",\"modifiedBy\",\"newVersion\",\"success\",\"handleUpdate\",\"fleetNumberToDelete\",\"Promise\",\"all\",\"deleteDoc\",\"prev\",\"filter\",\"r\",\"handleDelete\",\"handleExportToExcel\",\"fixedCols\",\"slice\",\"customerCols\",\"vendorCols\",\"podCols\",\"selectedCols\",\"exportData\",\"flatRow\",\"val\",\"worksheet\",\"XLSX\",\"json_to_sheet\",\"workbook\",\"book_new\",\"book_append_sheet\",\"fileName\",\"toISOString\",\"split\",\"_a$expiredAt\",\"_b$expiredAt\",\"aTime\",\"i\",\"_row$col3\",\"_row$col4\",\"ToastContainer\",\"position\",\"autoClose\",\"reportWebVitals\",\"onPerfEntry\",\"Function\",\"__webpack_require__\",\"then\",\"bind\",\"getCLS\",\"getFID\",\"getFCP\",\"getLCP\",\"getTTFB\",\"ReactDOM\",\"createRoot\",\"document\",\"getElementById\",\"render\",\"StrictMode\"],\"mappings\":\"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\",\"sourcesContent\":[\"\\r\\n// // src/firebase.js\\r\\n\\r\\n// import { initializeApp } from \\\"firebase/app\\\";\\r\\n// import { getAuth } from \\\"firebase/auth\\\";\\r\\n// import { getFirestore } from \\\"firebase/firestore\\\";\\r\\n\\r\\n// // ‚úÖ Your Firebase configuration\\r\\n// const firebaseConfig = {\\r\\n//   apiKey: \\\"AIzaSyCWw-I6mxAkJ1Q0Gt_wP1Bge-N0o-7MePU\\\",\\r\\n//   authDomain: \\\"sample-firebase-ai-app-c8afb.firebaseapp.com\\\",\\r\\n//   projectId: \\\"sample-firebase-ai-app-c8afb\\\",\\r\\n//   storageBucket: \\\"sample-firebase-ai-app-c8afb.appspot.com\\\", // üîß fixed from .app to .appspot.com\\r\\n//   messagingSenderId: \\\"221369775323\\\",\\r\\n//   appId: \\\"1:221369775323:web:c05d3eb4f88d1278d348fe\\\"\\r\\n// };\\r\\n\\r\\n// // ‚úÖ Initialize Firebase app\\r\\n// const app = initializeApp(firebaseConfig);\\r\\n\\r\\n// // ‚úÖ Export auth and firestore\\r\\n// export const auth = getAuth(app);\\r\\n// export const db = getFirestore(app);\\r\\n// src/firebase.js\\r\\n\\r\\nimport { initializeApp } from \\\"firebase/app\\\";\\r\\nimport { getAuth } from \\\"firebase/auth\\\";\\r\\nimport { getFirestore } from \\\"firebase/firestore\\\";\\r\\n\\r\\n// ‚úÖ Your Firebase configuration (copied from Firebase Console)\\r\\nconst firebaseConfig = {\\r\\n  apiKey: \\\"AIzaSyAOcDXL1kQsi_MoLJ33GWn9-57qhQ0CWro\\\",\\r\\n  authDomain: \\\"fleet-9805b.firebaseapp.com\\\",\\r\\n  projectId: \\\"fleet-9805b\\\",\\r\\n  storageBucket: \\\"fleet-9805b.appspot.com\\\", // ‚úÖ fixed: was \\\"firebasestorage.app\\\", should be \\\"appspot.com\\\"\\r\\n  messagingSenderId: \\\"682529821046\\\",\\r\\n  appId: \\\"1:682529821046:web:cbb00f5dcbac062304aa57\\\",\\r\\n  measurementId: \\\"G-T4PZQZGWZ9\\\"\\r\\n};\\r\\n\\r\\n// ‚úÖ Initialize Firebase\\r\\nconst app = initializeApp(firebaseConfig);\\r\\n\\r\\n// ‚úÖ Export Firebase services\\r\\nexport const auth = getAuth(app);\\r\\nexport const db = getFirestore(app);\",\"import React, { useState } from \\\"react\\\";\\r\\nimport { auth } from \\\"../firebase\\\";\\r\\nimport {\\r\\n  createUserWithEmailAndPassword,\\r\\n  signInWithEmailAndPassword\\r\\n} from \\\"firebase/auth\\\";\\r\\n\\r\\nconst Auth = () => {\\r\\n  const [email, setEmail] = useState(\\\"\\\");\\r\\n  const [password, setPassword] = useState(\\\"\\\");\\r\\n  const [isLogin, setIsLogin] = useState(true);\\r\\n  const [loading, setLoading] = useState(false);\\r\\n\\r\\n  const handleSubmit = async (e) => {\\r\\n    e.preventDefault();\\r\\n    setLoading(true);\\r\\n    try {\\r\\n      if (isLogin) {\\r\\n        await signInWithEmailAndPassword(auth, email, password);\\r\\n        alert(\\\"‚úÖ Login successful!\\\");\\r\\n      } else {\\r\\n        await createUserWithEmailAndPassword(auth, email, password);\\r\\n        alert(\\\"‚úÖ Account created successfully!\\\");\\r\\n      }\\r\\n    } catch (err) {\\r\\n      alert(\\\"‚ùå \\\" + err.message);\\r\\n    } finally {\\r\\n      setLoading(false);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  return (\\r\\n    <div style={styles.container}>\\r\\n      <div style={styles.card}>\\r\\n        <img src=\\\"/logo.png\\\" alt=\\\"Logo\\\" style={styles.logo} />\\r\\n        <h2 style={styles.title}>{isLogin ? \\\"Login\\\" : \\\"Sign Up\\\"}</h2>\\r\\n        <form onSubmit={handleSubmit} style={styles.form}>\\r\\n          <input\\r\\n            type=\\\"email\\\"\\r\\n            placeholder=\\\"Email Address\\\"\\r\\n            value={email}\\r\\n            onChange={(e) => setEmail(e.target.value)}\\r\\n            required\\r\\n            style={styles.input}\\r\\n          />\\r\\n          <input\\r\\n            type=\\\"password\\\"\\r\\n            placeholder=\\\"Password\\\"\\r\\n            value={password}\\r\\n            onChange={(e) => setPassword(e.target.value)}\\r\\n            required\\r\\n            style={styles.input}\\r\\n          />\\r\\n          <button type=\\\"submit\\\" disabled={loading} style={styles.submitBtn}>\\r\\n            {loading ? \\\"Please wait...\\\" : isLogin ? \\\"Login\\\" : \\\"Sign Up\\\"}\\r\\n          </button>\\r\\n        </form>\\r\\n        <button onClick={() => setIsLogin(!isLogin)} style={styles.toggleBtn}>\\r\\n          {isLogin\\r\\n            ? \\\"New here? Create an account\\\"\\r\\n            : \\\"Already registered? Login\\\"}\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  );\\r\\n};\\r\\n\\r\\nconst styles = {\\r\\n  container: {\\r\\n    minHeight: \\\"100vh\\\",\\r\\n    background: \\\"linear-gradient(135deg, #1c2541, #3a506b)\\\",\\r\\n    display: \\\"flex\\\",\\r\\n    justifyContent: \\\"center\\\",\\r\\n    alignItems: \\\"center\\\",\\r\\n    padding: \\\"30px\\\"\\r\\n  },\\r\\n  card: {\\r\\n    width: \\\"100%\\\",\\r\\n    maxWidth: \\\"400px\\\",\\r\\n    background: \\\"#0b132b\\\",\\r\\n    padding: \\\"40px 30px\\\",\\r\\n    borderRadius: \\\"16px\\\",\\r\\n    boxShadow: \\\"0 0 25px rgba(0,0,0,0.3)\\\",\\r\\n    textAlign: \\\"center\\\"\\r\\n  },\\r\\n  logo: {\\r\\n    width: \\\"80%\\\",     // ‚úÖ fit horizontally without overflowing\\r\\n    maxWidth: \\\"280px\\\",\\r\\n    margin: \\\"0 auto 20px\\\",\\r\\n    display: \\\"block\\\"\\r\\n  },\\r\\n  title: {\\r\\n    marginBottom: \\\"20px\\\",\\r\\n    color: \\\"#ffffff\\\"\\r\\n  },\\r\\n  form: {\\r\\n    display: \\\"flex\\\",\\r\\n    flexDirection: \\\"column\\\",\\r\\n    gap: \\\"15px\\\"\\r\\n  },\\r\\n  input: {\\r\\n    padding: \\\"12px\\\",\\r\\n    borderRadius: \\\"8px\\\",\\r\\n    border: \\\"1px solid #ccc\\\",\\r\\n    fontSize: \\\"16px\\\",\\r\\n    outline: \\\"none\\\"\\r\\n  },\\r\\n  submitBtn: {\\r\\n    padding: \\\"12px\\\",\\r\\n    backgroundColor: \\\"#1c7ed6\\\",\\r\\n    color: \\\"#fff\\\",\\r\\n    border: \\\"none\\\",\\r\\n    borderRadius: \\\"8px\\\",\\r\\n    fontSize: \\\"16px\\\",\\r\\n    cursor: \\\"pointer\\\"\\r\\n  },\\r\\n  toggleBtn: {\\r\\n    marginTop: \\\"20px\\\",\\r\\n    background: \\\"none\\\",\\r\\n    border: \\\"none\\\",\\r\\n    color: \\\"#74c0fc\\\",\\r\\n    cursor: \\\"pointer\\\",\\r\\n    fontSize: \\\"14px\\\",\\r\\n    textDecoration: \\\"underline\\\"\\r\\n  }\\r\\n};\\r\\n\\r\\nexport default Auth;\\r\\n\",\"import React, { useState, useEffect } from \\\"react\\\";\\r\\nimport {\\r\\n  collection,\\r\\n  addDoc,\\r\\n  updateDoc,\\r\\n  doc,\\r\\n  runTransaction,\\r\\n  Timestamp,\\r\\n  getDoc\\r\\n} from \\\"firebase/firestore\\\";\\r\\nimport { db, auth } from \\\"../firebase\\\";\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\nconst fixedFieldsInitial = {\\r\\n  date: \\\"\\\",\\r\\n  months: \\\"\\\",\\r\\n  origin: \\\"\\\",\\r\\n  destination: \\\"\\\",\\r\\n  customer: \\\"\\\",\\r\\n  customerType: \\\"\\\",\\r\\n  vehicleNo: \\\"\\\",\\r\\n  vendor: \\\"\\\",\\r\\n  salesRate: \\\"\\\",\\r\\n  buyRate: \\\"\\\"\\r\\n};\\r\\n\\r\\nconst customerFields = {\\r\\n  toBeAdvance: \\\"\\\",\\r\\n  advanceReceived: \\\"\\\",\\r\\n  advDeviation: \\\"\\\",\\r\\n  advanceRecDate: \\\"\\\",\\r\\n  validatedAdvanceUTRDescription: \\\"\\\",\\r\\n  validatedAdvanceAmount: \\\"\\\",\\r\\n  balance: \\\"\\\",\\r\\n  processingCharges: \\\"\\\",\\r\\n  inwardMisCharges: \\\"\\\",\\r\\n  outwardMisCharges: \\\"\\\",\\r\\n  balanceReceived: \\\"\\\",\\r\\n  remainingBalance: \\\"\\\",\\r\\n  balanceRecDate: \\\"\\\",\\r\\n  validatedBalanceUTR: \\\"\\\",\\r\\n  validatedBalanceUTRAmount: \\\"\\\"\\r\\n};\\r\\n\\r\\nconst vendorFields = {\\r\\n  vendorOutwardPayment: \\\"\\\",\\r\\n  paidAmount: \\\"\\\",\\r\\n  balancePending: \\\"\\\",\\r\\n  vendorRemark: \\\"\\\"\\r\\n};\\r\\n\\r\\nconst podFields = {\\r\\n  podVendorDate: \\\"\\\",\\r\\n  podSendToCustomerDate: \\\"\\\",\\r\\n  docNo: \\\"\\\",\\r\\n  podCustomerRec: \\\"\\\",\\r\\n  today: \\\"\\\",\\r\\n  balanceOverdueDays: \\\"\\\",\\r\\n  toBeCollectedAmount: \\\"\\\"\\r\\n};\\r\\nconst flattenObject = (obj, prefix = \\\"\\\") => {\\r\\n  let result = {};\\r\\n  for (const key in obj) {\\r\\n    const value = obj[key];\\r\\n    const fullKey = prefix ? `${prefix}.${key}` : key;\\r\\n    if (value && typeof value === \\\"object\\\" && !value.seconds) {\\r\\n      Object.assign(result, flattenObject(value, fullKey));\\r\\n    } else {\\r\\n      result[fullKey] = value;\\r\\n    }\\r\\n  }\\r\\n  return result;\\r\\n};\\r\\n\\r\\nconst ManualEntryForm = ({ onAddRow }) => {\\r\\n  const [fixedFields, setFixedFields] = useState(fixedFieldsInitial);\\r\\n  const [customerData, setCustomerData] = useState(customerFields);\\r\\n  const [vendorData, setVendorData] = useState(vendorFields);\\r\\n  const [podData, setPodData] = useState(podFields);\\r\\n  const [indentNumber, setIndentNumber] = useState(null);\\r\\n  const [docId, setDocId] = useState(null);\\r\\n\\r\\n  const [showCustomer, setShowCustomer] = useState(false);\\r\\n  const [showVendor, setShowVendor] = useState(false);\\r\\n  const [showPod, setShowPod] = useState(false);\\r\\n\\r\\n  const [customerSaved, setCustomerSaved] = useState(false);\\r\\n  const [vendorSaved, setVendorSaved] = useState(false);\\r\\n  const [podSaved, setPodSaved] = useState(false);\\r\\n\\r\\n  useEffect(() => {\\r\\n    const storedIndentNo = localStorage.getItem(\\\"inProgressIndentNumber\\\");\\r\\n    const storedFixed = localStorage.getItem(\\\"fixedFields\\\");\\r\\n    const storedCustomer = localStorage.getItem(\\\"customerFields\\\");\\r\\n    const storedVendor = localStorage.getItem(\\\"vendorFields\\\");\\r\\n    const storedPod = localStorage.getItem(\\\"podFields\\\");\\r\\n    const storedDocId = localStorage.getItem(\\\"docId\\\");\\r\\n    \\r\\n    \\r\\n    if (storedDocId) setDocId(storedDocId);\\r\\n    if (storedIndentNo) setIndentNumber(Number(storedIndentNo));\\r\\n    if (storedFixed) setFixedFields(JSON.parse(storedFixed));\\r\\n    if (storedCustomer) setCustomerData(JSON.parse(storedCustomer));\\r\\n    if (storedVendor) setVendorData(JSON.parse(storedVendor));\\r\\n    if (storedPod) setPodData(JSON.parse(storedPod));\\r\\n  }, []);\\r\\n\\r\\n  const convertDateFields = (data, allowedKeys = []) => {\\r\\n    const result = {};\\r\\n    Object.entries(data).forEach(([key, value]) => {\\r\\n      if (allowedKeys.includes(key) && value) {\\r\\n        const parsed = new Date(value);\\r\\n        result[key] = isNaN(parsed) ? value : Timestamp.fromDate(parsed);\\r\\n      } else {\\r\\n        result[key] = value;\\r\\n      }\\r\\n    });\\r\\n    return result;\\r\\n  };\\r\\n\\r\\n  const handleFixedChange = (e) => {\\r\\n  const updated = { ...fixedFields, [e.target.name]: e.target.value };\\r\\n  setFixedFields(updated);\\r\\n  localStorage.setItem(\\\"fixedFields\\\", JSON.stringify(updated));  // ‚úÖ Save\\r\\n};\\r\\n\\r\\n\\r\\n  const handleSectionChange = (e, section) => {\\r\\n  const { name, value } = e.target;\\r\\n  if (section === \\\"customer\\\") {\\r\\n    const updated = { ...customerData, [name]: value };\\r\\n    setCustomerData(updated);\\r\\n    localStorage.setItem(\\\"customerFields\\\", JSON.stringify(updated));\\r\\n  }\\r\\n  if (section === \\\"vendor\\\") {\\r\\n    const updated = { ...vendorData, [name]: value };\\r\\n    setVendorData(updated);\\r\\n    localStorage.setItem(\\\"vendorFields\\\", JSON.stringify(updated));\\r\\n  }\\r\\n  if (section === \\\"pod\\\") {\\r\\n    const updated = { ...podData, [name]: value };\\r\\n    setPodData(updated);\\r\\n    localStorage.setItem(\\\"podFields\\\", JSON.stringify(updated));\\r\\n  }\\r\\n};\\r\\n\\r\\n\\r\\n  const getNextIndentNumber = async () => {\\r\\n  const counterRef = doc(db, \\\"Counters\\\", \\\"fleet_counter\\\");\\r\\n  const newIndentNo = await runTransaction(db, async (transaction) => {\\r\\n    const docSnap = await transaction.get(counterRef);\\r\\n    if (!docSnap.exists()) throw new Error(\\\"Counter doc missing\\\");\\r\\n    const current = docSnap.data().nextFleetNo || 1;\\r\\n    transaction.update(counterRef, { nextFleetNo: current + 1 });\\r\\n    return current;\\r\\n  });\\r\\n  return newIndentNo;\\r\\n};\\r\\n\\r\\n\\r\\n  const handleFixedSave = async () => {\\r\\n    try {\\r\\n      const user = auth.currentUser;\\r\\n      const indentNo  = await getNextIndentNumber();\\r\\n      const enrichedData = {\\r\\n        indentNumber: indentNo,\\r\\n        ...convertDateFields(fixedFields, [\\\"date\\\"]),\\r\\n        createdAt: new Date(),\\r\\n        createdBy: user?.email || \\\"anonymous\\\",\\r\\n        isCurrent: true,\\r\\n        versionDate: new Date(),\\r\\n        updateDescription: \\\"\\\"\\r\\n      };\\r\\n\\r\\n      const docRef = await addDoc(collection(db, \\\"fleet_records\\\"), enrichedData);\\r\\n      setIndentNumber(indentNo);\\r\\n      setDocId(docRef.id);\\r\\n      localStorage.setItem(\\\"docId\\\", docRef.id);\\r\\n      localStorage.setItem(\\\"inProgressIndentNumber\\\", indentNo);\\r\\n      await navigator.clipboard.writeText(String(indentNo));\\r\\n      alert(`‚úÖ Fixed fields saved. Indent Number copied: ${indentNo}`);\\r\\n    } catch (err) {\\r\\n      alert(\\\"‚ùå Error saving fixed fields: \\\" + err.message);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  const saveSection = async (sectionName, sectionData, dateFields = []) => {\\r\\n    if (!docId) {\\r\\n      alert(\\\"‚ö†Ô∏è Save fixed fields first.\\\");\\r\\n      return;\\r\\n    }\\r\\n    try {\\r\\n      const docRef = doc(db, \\\"fleet_records\\\", docId);\\r\\n      await updateDoc(docRef, {\\r\\n        [`${sectionName}`]: convertDateFields(sectionData, dateFields)\\r\\n      });\\r\\n      if (sectionName === \\\"customerMaster\\\") setCustomerSaved(true);\\r\\n      if (sectionName === \\\"vendorMaster\\\") setVendorSaved(true);\\r\\n      if (sectionName === \\\"podMaster\\\") setPodSaved(true);\\r\\n      alert(`‚úÖ ${sectionName} saved.`);\\r\\n    } catch (err) {\\r\\n      alert(\\\"‚ùå Save error: \\\" + err.message);\\r\\n    }\\r\\n  };\\r\\n\\r\\n const handleFinalSubmit = async () => {\\r\\n  if (!docId) return alert(\\\"Fleet data not ready.\\\");\\r\\n\\r\\n  // Save any unsaved sections first\\r\\n  if (showCustomer && !customerSaved) {\\r\\n    await saveSection(\\\"customerMaster\\\", customerData, [\\\"advanceRecDate\\\", \\\"balanceRecDate\\\"]);\\r\\n  }\\r\\n  if (showVendor && !vendorSaved) {\\r\\n    await saveSection(\\\"vendorMaster\\\", vendorData);\\r\\n  }\\r\\n  if (showPod && !podSaved) {\\r\\n    await saveSection(\\\"podMaster\\\", podData, [\\\"podVendorDate\\\", \\\"podSendToCustomerDate\\\", \\\"podCustomerRec\\\", \\\"today\\\"]);\\r\\n  }\\r\\n\\r\\n  const docSnap = await getDoc(doc(db, \\\"fleet_records\\\", docId));\\r\\n  if (!docSnap.exists()) return alert(\\\"Data not found.\\\");\\r\\n  const data = { id: docSnap.id, ...docSnap.data() };\\r\\n  onAddRow(flattenObject(data), true);\\r\\n\\r\\n\\r\\n  // Reset all state\\r\\n  setFixedFields(fixedFieldsInitial);\\r\\n  setCustomerData(customerFields);\\r\\n  setVendorData(vendorFields);\\r\\n  setPodData(podFields);\\r\\n  setIndentNumber(null);\\r\\n  setDocId(null);\\r\\n  setShowCustomer(false);\\r\\n  setShowVendor(false);\\r\\n  setShowPod(false);\\r\\n  setCustomerSaved(false);\\r\\n  setVendorSaved(false);\\r\\n  setPodSaved(false);\\r\\n\\r\\n  localStorage.removeItem(\\\"fixedFields\\\");\\r\\n  localStorage.removeItem(\\\"customerFields\\\");\\r\\n  localStorage.removeItem(\\\"vendorFields\\\");\\r\\n  localStorage.removeItem(\\\"podFields\\\");\\r\\n  localStorage.removeItem(\\\"inProgressIndentNumber\\\");\\r\\n  localStorage.removeItem(\\\"docId\\\");\\r\\n\\r\\n\\r\\n\\r\\n  alert(\\\"‚úÖ Record submitted and ready in editable table.\\\");\\r\\n};\\r\\n\\r\\nconst handleNewRecord = () => {\\r\\n  if (!window.confirm(\\\"Start a new entry? Unsaved data will be lost.\\\")) return;\\r\\n\\r\\n  setFixedFields(fixedFieldsInitial);\\r\\n  setCustomerData(customerFields);\\r\\n  setVendorData(vendorFields);\\r\\n  setPodData(podFields);\\r\\n  setIndentNumber(null);\\r\\n  setDocId(null);\\r\\n  setShowCustomer(false);\\r\\n  setShowVendor(false);\\r\\n  setShowPod(false);\\r\\n  setCustomerSaved(false);\\r\\n  setVendorSaved(false);\\r\\n  setPodSaved(false);\\r\\n\\r\\n  localStorage.removeItem(\\\"fixedFields\\\");\\r\\n  localStorage.removeItem(\\\"customerFields\\\");\\r\\n  localStorage.removeItem(\\\"vendorFields\\\");\\r\\n  localStorage.removeItem(\\\"podFields\\\");\\r\\n  localStorage.removeItem(\\\"inProgressIndentNumber\\\");\\r\\n  localStorage.removeItem(\\\"docId\\\");\\r\\n\\r\\n  alert(\\\"üÜï Ready to start a new record.\\\");\\r\\n};\\r\\n\\r\\n\\r\\n\\r\\n  return (\\r\\n    <div style={{ marginTop: 20 }}>\\r\\n      <h4>Step 1: Fixed Fields</h4>\\r\\n      {Object.keys(fixedFieldsInitial).map((key) => {\\r\\n        const isDate = key.toLowerCase().includes(\\\"date\\\");\\r\\n        const label = isDate ? `${key} (dd/mm/yyyy)` : key === \\\"months\\\" ? \\\"months (e.g. Jul-2025)\\\" : key;\\r\\n        return (\\r\\n          <input\\r\\n            key={key}\\r\\n            name={key}\\r\\n            placeholder={label}\\r\\n            value={fixedFields[key]}\\r\\n            onChange={handleFixedChange}\\r\\n            disabled={!!indentNumber}\\r\\n            style={{ margin: 4, width: \\\"220px\\\" }}\\r\\n          />\\r\\n        );\\r\\n      })}\\r\\n      {!indentNumber && (\\r\\n        <button onClick={handleFixedSave}>üíæ Save & Continue</button>\\r\\n      )}\\r\\n      {indentNumber  && (\\r\\n        <>\\r\\n          <p style={{ color: \\\"green\\\" }}>‚úÖ Saved. Indent No: {indentNumber}</p>\\r\\n\\r\\n          <h4>Step 2: Select Master Sections</h4>\\r\\n          <label>\\r\\n            <input type=\\\"checkbox\\\" checked={showCustomer} onChange={() => setShowCustomer(!showCustomer)} disabled={customerSaved} /> Customer Master\\r\\n          </label>\\r\\n          <label style={{ marginLeft: 15 }}>\\r\\n            <input type=\\\"checkbox\\\" checked={showVendor} onChange={() => setShowVendor(!showVendor)} disabled={vendorSaved} /> Vendor Master\\r\\n          </label>\\r\\n          <label style={{ marginLeft: 15 }}>\\r\\n            <input type=\\\"checkbox\\\" checked={showPod} onChange={() => setShowPod(!showPod)} disabled={podSaved} /> POD Master\\r\\n          </label>\\r\\n\\r\\n          {showCustomer && (\\r\\n            <>\\r\\n              <h5>Customer Master</h5>\\r\\n              {Object.keys(customerFields).map((key) => {\\r\\n                const isDate = [\\\"advanceRecDate\\\", \\\"balanceRecDate\\\"].includes(key);\\r\\n                const label = isDate ? `${key} (dd/mm/yyyy)` : key;\\r\\n                return (\\r\\n                  <input\\r\\n                    key={key}\\r\\n                    name={key}\\r\\n                    placeholder={label}\\r\\n                    value={customerData[key]}\\r\\n                    onChange={(e) => handleSectionChange(e, \\\"customer\\\")}\\r\\n                    style={{ margin: 4, width: \\\"220px\\\" }}\\r\\n                    disabled={customerSaved}\\r\\n                  />\\r\\n                );\\r\\n              })}\\r\\n              {!customerSaved && (\\r\\n                <button onClick={() => saveSection(\\\"customerMaster\\\", customerData, [\\\"advanceRecDate\\\", \\\"balanceRecDate\\\"])}>Save Customer</button>\\r\\n              )}\\r\\n            </>\\r\\n          )}\\r\\n\\r\\n          {showVendor && (\\r\\n            <>\\r\\n              <h5>Vendor Master</h5>\\r\\n              {Object.keys(vendorFields).map((key) => (\\r\\n                <input\\r\\n                  key={key}\\r\\n                  name={key}\\r\\n                  placeholder={key}\\r\\n                  value={vendorData[key]}\\r\\n                  onChange={(e) => handleSectionChange(e, \\\"vendor\\\")}\\r\\n                  style={{ margin: 4, width: \\\"220px\\\" }}\\r\\n                  disabled={vendorSaved}\\r\\n                />\\r\\n              ))}\\r\\n              {!vendorSaved && (\\r\\n                <button onClick={() => saveSection(\\\"vendorMaster\\\", vendorData)}>Save Vendor</button>\\r\\n              )}\\r\\n            </>\\r\\n          )}\\r\\n\\r\\n          {showPod && (\\r\\n            <>\\r\\n              <h5>POD Master</h5>\\r\\n              {Object.keys(podFields).map((key) => {\\r\\n                const isDate = [\\\"podVendorDate\\\", \\\"podSendToCustomerDate\\\", \\\"podCustomerRec\\\", \\\"today\\\"].includes(key);\\r\\n                const label = isDate ? `${key} (dd/mm/yyyy)` : key;\\r\\n                return (\\r\\n                  <input\\r\\n                    key={key}\\r\\n                    name={key}\\r\\n                    placeholder={label}\\r\\n                    value={podData[key]}\\r\\n                    onChange={(e) => handleSectionChange(e, \\\"pod\\\")}\\r\\n                    style={{ margin: 4, width: \\\"220px\\\" }}\\r\\n                    disabled={podSaved}\\r\\n                  />\\r\\n                );\\r\\n              })}\\r\\n              {!podSaved && (\\r\\n                <button onClick={() => saveSection(\\\"podMaster\\\", podData, [\\\"podVendorDate\\\", \\\"podSendToCustomerDate\\\", \\\"podCustomerRec\\\", \\\"today\\\"])}>Save POD</button>\\r\\n              )}\\r\\n            </>\\r\\n          )}\\r\\n\\r\\n          <br />\\r\\n          <div style={{ marginTop: 10 }}>\\r\\n  <button onClick={handleFinalSubmit} style={{ backgroundColor: \\\"#4caf50\\\", marginRight: 10 }}>\\r\\n    ‚úÖ Submit Record\\r\\n  </button>\\r\\n\\r\\n  <button onClick={handleNewRecord} style={{ backgroundColor: \\\"#2196f3\\\" }}>\\r\\n    ‚ûï Add New Record\\r\\n  </button>\\r\\n</div>\\r\\n        </>\\r\\n      )}\\r\\n    </div>\\r\\n  );\\r\\n};\\r\\n\\r\\nexport default ManualEntryForm;\\r\\n\",\"import React, { useState } from \\\"react\\\";\\r\\nimport { addDoc, collection, doc, runTransaction } from \\\"firebase/firestore\\\";\\r\\nimport * as XLSX from \\\"xlsx\\\";\\r\\nimport { db, auth } from \\\"../firebase\\\";\\r\\n\\r\\nconst labelToKey = {\\r\\n  \\\"Indent No\\\": \\\"IndentNo\\\", \\\"Indent Date\\\": \\\"IndentDate\\\", \\\"Placement Date\\\": \\\"PlacementDate\\\",\\r\\n  \\\"Customer\\\": \\\"Customer\\\", \\\"Customer Type\\\": \\\"CustomerType\\\", \\\"Customer Billing Type\\\": \\\"CustomerBillingType\\\",\\r\\n  \\\"Sourcing (Vendor)\\\": \\\"SourcingVendor\\\", \\\"Vendor Type\\\": \\\"VendorType\\\", \\\"Vendor Billing Type\\\": \\\"VendorBillingType\\\",\\r\\n  \\\"Origin\\\": \\\"Origin\\\", \\\"Destination\\\": \\\"Destination\\\", \\\"Vehicle No\\\": \\\"VehicleNo\\\", \\\"Vehicle type\\\": \\\"VehicleType\\\",\\r\\n  \\\"Driver No\\\": \\\"DriverNo\\\", \\\"Dispatch Date\\\": \\\"DispatchDate\\\", \\\"Deliver Date\\\": \\\"DeliverDate\\\",\\r\\n  \\\"Offloading Date\\\": \\\"OffloadingDate\\\", \\\"E-way Bill\\\": \\\"EwayBill\\\", \\\"LR No.\\\": \\\"LRNo\\\",\\r\\n  \\\"Soft Copy POD Rec\\\": \\\"SoftCopyPODRec\\\", \\\"Hard Copy POD Rec\\\": \\\"HardCopyPODRec\\\",\\r\\n  \\\"Customer -Sale rate\\\": \\\"CustomerSaleRate\\\", \\\"Advance to be Paid\\\": \\\"AdvanceToBePaid\\\",\\r\\n  \\\"Advance Rec\\\": \\\"AdvanceRec\\\", \\\"Advance UTR\\\": \\\"AdvanceUTR\\\", \\\"Advance Rec-Date\\\": \\\"AdvanceRecDate\\\",\\r\\n  \\\"Balance Pending\\\": \\\"BalancePending\\\", \\\"Detention Charges\\\": \\\"DetentionCharges\\\",\\r\\n  \\\"Loading/Unloading Charges\\\": \\\"LoadingUnloadingCharges\\\", \\\"Miscellaneous Charges.\\\": \\\"MiscCharges\\\",\\r\\n  \\\"Processing Charges\\\": \\\"ProcessingCharges\\\", \\\"Net Balance\\\": \\\"NetBalance\\\",\\r\\n  \\\"Balance Rec Amount\\\": \\\"BalanceRecAmount\\\", \\\"Balance UTR\\\": \\\"BalanceUTR\\\", \\\"Balance Rec Date\\\": \\\"BalanceRecDate\\\",\\r\\n  \\\"Remaining Balance\\\": \\\"RemainingBalance\\\", \\\"Remaining Balance UTR\\\": \\\"RemainingBalanceUTR\\\",\\r\\n  \\\"Remaining Balance Date\\\": \\\"RemainingBalanceDate\\\", \\\"Supplier Buy Rate\\\": \\\"SupplierBuyRate\\\",\\r\\n  \\\"Supplier Advance Pay\\\": \\\"SupplierAdvancePay\\\", \\\"Supplier Advance Paid\\\": \\\"SupplierAdvancePaid\\\",\\r\\n  \\\"Supplier Mis Charges\\\": \\\"SupplierMisCharges\\\", \\\"Supplier Invoice No.\\\": \\\"SupplierInvoiceNo\\\",\\r\\n  \\\"Supplier Advance UTR\\\": \\\"SupplierAdvanceUTR\\\", \\\"Supplier Advance Pay-Date\\\": \\\"SupplierAdvancePayDate\\\",\\r\\n  \\\"Supplier Balance Pending\\\": \\\"SupplierBalancePending\\\", \\\"Supplier Balance Paid Amount\\\": \\\"SupplierBalancePaidAmount\\\",\\r\\n  \\\"Supplier Balance Paid UTR\\\": \\\"SupplierBalancePaidUTR\\\", \\\"Supplier Balance Paid Date\\\": \\\"SupplierBalancePaidDate\\\",\\r\\n  \\\"Remaining Supplier Amount\\\": \\\"RemainingSupplierAmount\\\", \\\"POD Rec Date\\\": \\\"PODRecDate\\\",\\r\\n  \\\"POD Send to Customer Date\\\": \\\"PODSendToCustomerDate\\\", \\\"POD Docket No.\\\": \\\"PODDocketNo\\\",\\r\\n  \\\"POD Rec By Customer\\\": \\\"PODRecByCustomer\\\", \\\"POD Deduction If any\\\": \\\"PODDeductionIfAny\\\",\\r\\n  \\\"Gross Profit\\\": \\\"GrossProfit\\\", \\\"Bad Debts\\\": \\\"BadDebts\\\", \\\"Net Profit\\\": \\\"NetProfit\\\"\\r\\n};\\r\\n\\r\\nconst dateFields = [\\r\\n  \\\"Indent Date\\\", \\\"Placement Date\\\", \\\"Dispatch Date\\\", \\\"Deliver Date\\\", \\\"Offloading Date\\\",\\r\\n  \\\"Soft Copy POD Rec\\\", \\\"Hard Copy POD Rec\\\", \\\"Advance Rec-Date\\\", \\\"Balance Rec Date\\\",\\r\\n  \\\"Remaining Balance Date\\\", \\\"Supplier Advance Pay-Date\\\", \\\"Supplier Balance Paid Date\\\",\\r\\n  \\\"POD Rec Date\\\", \\\"POD Send to Customer Date\\\", \\\"POD Rec By Customer\\\"\\r\\n];\\r\\n\\r\\nconst UploadForm = () => {\\r\\n  const [previewData, setPreviewData] = useState([]);\\r\\n  const [statusMap, setStatusMap] = useState({});\\r\\n  const [fleetNumbers, setFleetNumbers] = useState({});\\r\\n\\r\\n  const normalize = (label) => (label || \\\"\\\").replace(/[.\\\\s]+/g, \\\" \\\").trim().toLowerCase();\\r\\n\\r\\n  const getMappedKey = (label) => {\\r\\n    const normalizedLabel = normalize(label);\\r\\n    return Object.entries(labelToKey).find(\\r\\n      ([rawLabel]) => normalize(rawLabel) === normalizedLabel\\r\\n    )?.[1];\\r\\n  };\\r\\n\\r\\n  const parseExcel = (file) => {\\r\\n    if (!file) {\\r\\n      alert(\\\"No file selected\\\");\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    alert(\\\"File selected: \\\" + file.name);\\r\\n    const reader = new FileReader();\\r\\n    reader.onload = (e) => {\\r\\n      alert(\\\"File read started\\\");\\r\\n\\r\\n      const workbook = XLSX.read(e.target.result, { type: \\\"binary\\\" });\\r\\n      const sheetName = workbook.SheetNames[0];\\r\\n      alert(\\\"Reading sheet: \\\" + sheetName);\\r\\n      const sheet = workbook.Sheets[sheetName];\\r\\n\\r\\n      const raw = XLSX.utils.sheet_to_json(sheet, { header: 1, defval: \\\"\\\", blankrows: false });\\r\\n      if (raw.length < 3) {\\r\\n        alert(\\\"Not enough rows to parse.\\\");\\r\\n        return;\\r\\n      }\\r\\n\\r\\n      raw.splice(0, 1); // Remove useless top row\\r\\n      const headers = raw[0];\\r\\n      const rows = raw.slice(1).map((row, rowIndex) => {\\r\\n        const obj = {};\\r\\n        headers.forEach((h, j) => {\\r\\n          const key = getMappedKey(h);\\r\\n          if (!key) return;\\r\\n\\r\\n          const value = row[j];\\r\\n          const isDate = dateFields.some(df => normalize(df) === normalize(h));\\r\\n\\r\\n          if (typeof value === \\\"number\\\" && isDate) {\\r\\n            const d = XLSX.SSF.parse_date_code(value);\\r\\n            if (d) {\\r\\n              obj[key] = `${String(d.d).padStart(2, '0')}-${String(d.m).padStart(2, '0')}-${d.y}`;\\r\\n            }\\r\\n          } else {\\r\\n            obj[key] = String(value ?? \\\"\\\").trim();\\r\\n          }\\r\\n        });\\r\\n        return obj;\\r\\n      });\\r\\n\\r\\n      alert(\\\"Parsed rows: \\\" + rows.length);\\r\\n      setPreviewData(rows);\\r\\n      setStatusMap({});\\r\\n      setFleetNumbers({});\\r\\n    };\\r\\n\\r\\n    reader.onerror = (err) => {\\r\\n      alert(\\\"Failed to read file: \\\" + err);\\r\\n      console.error(\\\"FileReader error:\\\", err);\\r\\n    };\\r\\n\\r\\n    reader.readAsBinaryString(file);\\r\\n  };\\r\\n\\r\\n  const getNextFleetNumber = async () => {\\r\\n    const counterRef = doc(db, \\\"Counters\\\", \\\"fleet_counter\\\");\\r\\n    const newFleetNo = await runTransaction(db, async (transaction) => {\\r\\n      const docSnap = await transaction.get(counterRef);\\r\\n      if (!docSnap.exists()) throw new Error(\\\"Counter doc missing\\\");\\r\\n      const current = docSnap.data().nextFleetNo || 1;\\r\\n      transaction.update(counterRef, { nextFleetNo: current + 1 });\\r\\n      return current;\\r\\n    });\\r\\n    return newFleetNo;\\r\\n  };\\r\\n\\r\\n  const saveRow = async (row, i) => {\\r\\n    const user = auth.currentUser;\\r\\n    try {\\r\\n      const newFleetNo = await getNextFleetNumber();\\r\\n      const enriched = {\\r\\n        ...row,\\r\\n        fleetNumber: newFleetNo,\\r\\n        createdAt: new Date(),\\r\\n        createdBy: user?.email || \\\"anonymous\\\",\\r\\n        isCurrent: true,\\r\\n        versionDate: new Date(),\\r\\n      };\\r\\n      await addDoc(collection(db, \\\"fleet_records\\\"), enriched);\\r\\n      setStatusMap(prev => ({ ...prev, [i]: \\\"‚úÖ Saved\\\" }));\\r\\n      setFleetNumbers(prev => ({ ...prev, [i]: newFleetNo }));\\r\\n    } catch (err) {\\r\\n      setStatusMap(prev => ({ ...prev, [i]: \\\"‚ùå Failed\\\" }));\\r\\n    }\\r\\n  };\\r\\n\\r\\n  const saveAll = async () => {\\r\\n    for (let i = 0; i < previewData.length; i++) {\\r\\n      if (!statusMap[i]) await saveRow(previewData[i], i);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  const handleEdit = (i, key, value) => {\\r\\n    const updated = [...previewData];\\r\\n    updated[i][key] = value;\\r\\n    setPreviewData(updated);\\r\\n  };\\r\\n\\r\\n  const deleteRow = (i) => {\\r\\n    setPreviewData(previewData.filter((_, idx) => idx !== i));\\r\\n    const s = { ...statusMap }; delete s[i];\\r\\n    const f = { ...fleetNumbers }; delete f[i];\\r\\n    setStatusMap(s);\\r\\n    setFleetNumbers(f);\\r\\n  };\\r\\n\\r\\n  const resetTable = () => {\\r\\n    setPreviewData([]);\\r\\n    setStatusMap({});\\r\\n    setFleetNumbers({});\\r\\n  };\\r\\n\\r\\n  return (\\r\\n    <div style={{ marginBottom: 40 }}>\\r\\n      <h4>Upload Excel & Preview</h4>\\r\\n      <input\\r\\n        type=\\\"file\\\"\\r\\n        accept=\\\".xlsx, .xls\\\"\\r\\n        onChange={(e) => {\\r\\n          const file = e.target.files?.[0];\\r\\n          if (file) {\\r\\n            parseExcel(file);\\r\\n            setTimeout(() => {\\r\\n              e.target.value = \\\"\\\";\\r\\n            }, 100);\\r\\n          } else {\\r\\n            alert(\\\"No file selected.\\\");\\r\\n          }\\r\\n        }}\\r\\n      />\\r\\n      {previewData.length > 0 && (\\r\\n        <>\\r\\n          <h5 style={{ marginTop: 20 }}>üìÑ Preview Table (Excel Upload)</h5>\\r\\n          <button onClick={saveAll}>üíæ Save All</button>\\r\\n          <button onClick={resetTable} style={{ marginLeft: 10, color: \\\"red\\\" }}>üßπ Clear</button>\\r\\n          <div className=\\\"table-scroll-x\\\">\\r\\n            <table>\\r\\n              <thead>\\r\\n                <tr>\\r\\n                  <th>Fleet Number</th>\\r\\n                  {Object.keys(previewData[0]).map(key => <th key={key}>{key}</th>)}\\r\\n                  <th>Status</th>\\r\\n                  <th>Action</th>\\r\\n                </tr>\\r\\n              </thead>\\r\\n              <tbody>\\r\\n                {previewData.map((row, i) => (\\r\\n                  <tr key={i}>\\r\\n                    <td>{fleetNumbers[i] || \\\"\\\"}</td>\\r\\n                    {Object.keys(row).map((key) => (\\r\\n                      <td key={key}>\\r\\n                        <input\\r\\n                          type=\\\"text\\\"\\r\\n                          value={row[key]}\\r\\n                          onChange={(e) => handleEdit(i, key, e.target.value)}\\r\\n                          style={{ width: \\\"120px\\\" }}\\r\\n                        />\\r\\n                      </td>\\r\\n                    ))}\\r\\n                    <td>{statusMap[i] || \\\"‚è≥ Pending\\\"}</td>\\r\\n                    <td>\\r\\n                      <button onClick={() => saveRow(row, i)} disabled={statusMap[i] === \\\"‚úÖ Saved\\\"}>Save</button>\\r\\n                      <button onClick={() => deleteRow(i)} style={{ marginLeft: 6, color: \\\"red\\\" }}>Delete</button>\\r\\n                    </td>\\r\\n                  </tr>\\r\\n                ))}\\r\\n              </tbody>\\r\\n            </table>\\r\\n          </div>\\r\\n        </>\\r\\n      )}\\r\\n    </div>\\r\\n  );\\r\\n};\\r\\n\\r\\nexport default UploadForm;\\r\\n\",\"import React, { useEffect, useState } from \\\"react\\\";\\r\\nimport { onAuthStateChanged, signOut } from \\\"firebase/auth\\\";\\r\\nimport {\\r\\n  collection,\\r\\n  query,\\r\\n  where,\\r\\n  getDocs,\\r\\n  getDoc,\\r\\n  updateDoc,\\r\\n  deleteDoc,\\r\\n  doc,\\r\\n  addDoc,\\r\\n} from \\\"firebase/firestore\\\";\\r\\nimport { auth, db } from \\\"./firebase\\\";\\r\\nimport Auth from \\\"./components/Auth\\\";\\r\\nimport ManualEntryForm from \\\"./components/ManualEntryForm\\\";\\r\\nimport UploadForm from \\\"./components/UploadForm\\\";\\r\\nimport \\\"./App.css\\\";\\r\\nimport { toast, ToastContainer } from \\\"react-toastify\\\";\\r\\nimport \\\"react-toastify/dist/ReactToastify.css\\\";\\r\\nimport * as XLSX from \\\"xlsx\\\";\\r\\n\\r\\nconst finalColumnOrder = [\\r\\n  \\\"indentNumber\\\", \\\"date\\\", \\\"months\\\", \\\"origin\\\", \\\"destination\\\", \\\"customer\\\", \\\"customerType\\\",\\r\\n  \\\"vehicleNo\\\", \\\"vendor\\\", \\\"salesRate\\\", \\\"buyRate\\\", \\\"createdAt\\\", \\\"createdBy\\\", \\\"versionDate\\\",\\r\\n  \\\"isCurrent\\\", \\\"updateDescription\\\", \\\"expiredAt\\\",\\r\\n  // Customer Master\\r\\n  \\\"customerMaster.toBeAdvance\\\", \\\"customerMaster.advanceReceived\\\", \\\"customerMaster.advDeviation\\\",\\r\\n  \\\"customerMaster.advanceRecDate\\\", \\\"customerMaster.validatedAdvanceUTRDescription\\\",\\r\\n  \\\"customerMaster.validatedAdvanceAmount\\\", \\\"customerMaster.balance\\\", \\\"customerMaster.processingCharges\\\",\\r\\n  \\\"customerMaster.inwardMisCharges\\\", \\\"customerMaster.outwardMisCharges\\\", \\\"customerMaster.balanceReceived\\\",\\r\\n  \\\"customerMaster.remainingBalance\\\", \\\"customerMaster.balanceRecDate\\\", \\\"customerMaster.validatedBalanceUTR\\\",\\r\\n  \\\"customerMaster.validatedBalanceUTRAmount\\\",\\r\\n  // Vendor Master\\r\\n  \\\"vendorMaster.vendorOutwardPayment\\\", \\\"vendorMaster.paidAmount\\\", \\\"vendorMaster.balancePending\\\",\\r\\n  \\\"vendorMaster.vendorRemark\\\",\\r\\n  // POD Master\\r\\n  \\\"podMaster.podVendorDate\\\", \\\"podMaster.podSendToCustomerDate\\\", \\\"podMaster.docNo\\\",\\r\\n  \\\"podMaster.podCustomerRec\\\", \\\"podMaster.today\\\", \\\"podMaster.balanceOverdueDays\\\",\\r\\n  \\\"podMaster.toBeCollectedAmount\\\"\\r\\n];\\r\\n\\r\\n\\r\\nconst flattenObject = (obj, prefix = \\\"\\\") => {\\r\\n  let result = {};\\r\\n  for (const key in obj) {\\r\\n    const value = obj[key];\\r\\n    const fullKey = prefix ? `${prefix}.${key}` : key;\\r\\n    if (value && typeof value === \\\"object\\\" && !value.seconds) {\\r\\n      Object.assign(result, flattenObject(value, fullKey));\\r\\n    } else {\\r\\n      result[fullKey] = value;\\r\\n    }\\r\\n  }\\r\\n  return result;\\r\\n};\\r\\n\\r\\n\\r\\nfunction App() {\\r\\n  const [user, setUser] = useState(null);\\r\\n  const [authLoading, setAuthLoading] = useState(true);\\r\\n  const [records, setRecords] = useState([]);\\r\\n  const [history, setHistory] = useState([]);\\r\\n  const [searchKey, setSearchKey] = useState(\\\"\\\");\\r\\n  const [searchField, setSearchField] = useState(\\\"indentNumber\\\");\\r\\n  const [startDate, setStartDate] = useState(\\\"\\\");\\r\\n  const [endDate, setEndDate] = useState(\\\"\\\");\\r\\n  const [originalRecords, setOriginalRecords] = useState({});\\r\\n  const [isSearching, setIsSearching] = useState(false);\\r\\n  const [isExporting, setIsExporting] = useState(false);\\r\\n  const [searchAttempted, setSearchAttempted] = useState(false);\\r\\n  const [activeOnly, setActiveOnly] = useState(false);\\r\\n  const [includeCustomer, setIncludeCustomer] = useState(false);\\r\\n  const [includeVendor, setIncludeVendor] = useState(false);\\r\\n  const [includePOD, setIncludePOD] = useState(false);\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n  useEffect(() => {\\r\\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\\r\\n      setUser(currentUser);\\r\\n      setAuthLoading(false);\\r\\n    });\\r\\n    return () => unsubscribe();\\r\\n  }, []);\\r\\n\\r\\n  const handleExportToExcel = () => {\\r\\n  if (history.length === 0) {\\r\\n    toast.info(\\\"‚ùå No history data to export.\\\");\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  // Define columns to include\\r\\n  const fixedCols = finalColumnOrder.slice(0, 17); // First 17 are fixed\\r\\n  const customerCols = finalColumnOrder.slice(17, 32);\\r\\n  const vendorCols = finalColumnOrder.slice(32, 36);\\r\\n  const podCols = finalColumnOrder.slice(36);\\r\\n\\r\\n  const selectedCols = [\\r\\n    ...fixedCols,\\r\\n    ...(includeCustomer ? customerCols : []),\\r\\n    ...(includeVendor ? vendorCols : []),\\r\\n    ...(includePOD ? podCols : [])\\r\\n  ];\\r\\n\\r\\n  const exportData = history.map((row) => {\\r\\n    const flatRow = {};\\r\\n    selectedCols.forEach((col) => {\\r\\n      const val = row[col];\\r\\n      flatRow[col] = val?.seconds\\r\\n        ? new Date(val.seconds * 1000).toLocaleString()\\r\\n        : val ?? \\\"\\\";\\r\\n    });\\r\\n    return flatRow;\\r\\n  });\\r\\n\\r\\n  const worksheet = XLSX.utils.json_to_sheet(exportData);\\r\\n  const workbook = XLSX.utils.book_new();\\r\\n  XLSX.utils.book_append_sheet(workbook, worksheet, \\\"Filtered Export\\\");\\r\\n\\r\\n  const fileName = `FilteredExport_${new Date().toISOString().split(\\\"T\\\")[0]}.xlsx`;\\r\\n  XLSX.writeFile(workbook, fileName);\\r\\n};\\r\\n\\r\\n\\r\\n  const handleSearch = async () => {\\r\\n    setIsSearching(true);\\r\\n    try {\\r\\n      const fleetRef = collection(db, \\\"fleet_records\\\");\\r\\n      let q;\\r\\n\\r\\n          if (searchField === \\\"Date\\\") {\\r\\n  const fromDate = new Date(startDate);\\r\\n  const toDate = new Date(endDate + \\\"T23:59:59\\\");\\r\\n\\r\\n  if (fromDate > toDate) {\\r\\n    toast.warn(\\\"‚ö†Ô∏è 'From' date cannot be after 'To' date.\\\");\\r\\n    setIsSearching(false);\\r\\n    return;\\r\\n  }\\r\\n\\r\\n  q = query(\\r\\n    fleetRef,\\r\\n    ...(activeOnly ? [where(\\\"isCurrent\\\", \\\"==\\\", true)] : []),\\r\\n    where(\\\"createdAt\\\", \\\">=\\\", fromDate),\\r\\n    where(\\\"createdAt\\\", \\\"<=\\\", toDate)\\r\\n  );\\r\\n}\\r\\n else if (searchKey) {\\r\\n  const key = searchField === \\\"indentNumber\\\" ? Number(searchKey) : searchKey;\\r\\n  q = query(\\r\\n    fleetRef,\\r\\n    where(searchField, \\\"==\\\", key),\\r\\n    ...(activeOnly ? [where(\\\"isCurrent\\\", \\\"==\\\", true)] : [])\\r\\n  );\\r\\n}\\r\\n\\r\\n else {\\r\\n        toast.warn(\\\"üîç Please enter a search value.\\\");\\r\\n        setIsSearching(false);\\r\\n        return;\\r\\n      }\\r\\n\\r\\n      setSearchAttempted(true);\\r\\n      const snapshot = await getDocs(q);\\r\\n      const allVersions = [];\\r\\n      const currentOnly = [];\\r\\n\\r\\n      snapshot.forEach((docSnap) => {\\r\\n        const rawData = { id: docSnap.id, ...docSnap.data() };\\r\\n        const row = flattenObject(rawData);\\r\\n\\r\\n        allVersions.push(row);\\r\\n        if (row.isCurrent) currentOnly.push(row);\\r\\n      });\\r\\n      allVersions.sort((a, b) => {\\r\\n  if (a.isCurrent && !b.isCurrent) return -1;\\r\\n  if (!a.isCurrent && b.isCurrent) return 1;\\r\\n  return b.indentNumber - a.indentNumber;\\r\\n});\\r\\n\\r\\n// ‚úÖ Sort currentOnly also by indentNumber descending\\r\\ncurrentOnly.sort((a, b) => b.indentNumber - a.indentNumber);\\r\\n\\r\\n      if (searchField === \\\"indentNumber\\\") {\\r\\n        setRecords(currentOnly);\\r\\n        setHistory(allVersions);\\r\\n      } else {\\r\\n        setRecords([]);\\r\\n        setHistory(allVersions);\\r\\n      }\\r\\n\\r\\n      if (snapshot.empty || allVersions.length === 0) {\\r\\n        toast.info(\\\"‚ùå No records found.\\\");\\r\\n      }\\r\\n    } catch (error) {\\r\\n  console.error(\\\"üî• Full Firestore Error:\\\", error); // ‚úÖ This will print full error in browser console\\r\\n  toast.error(\\\"‚ùå Search failed: \\\" + error.message);\\r\\n\\r\\n    } finally {\\r\\n      setIsSearching(false);\\r\\n    }\\r\\n  };\\r\\n\\r\\n    const normalize = (val) => {\\r\\n    if (val === null || val === undefined) return \\\"\\\";\\r\\n    return typeof val === \\\"object\\\" && val.seconds\\r\\n      ? new Date(val.seconds * 1000).toISOString()\\r\\n      : String(val).trim();\\r\\n  };\\r\\n\\r\\n const getChangedFields = (current, original) => {\\r\\n  const ignored = [\\\"versionDate\\\", \\\"expiredAt\\\", \\\"isCurrent\\\", \\\"updateDescription\\\", \\\"createdAt\\\", \\\"createdBy\\\"];\\r\\n  const changed = [];\\r\\n\\r\\n  const flatCurrent = flattenObject(current);\\r\\n  const flatOriginal = flattenObject(original);\\r\\n\\r\\n  for (const key in flatCurrent) {\\r\\n    if (ignored.includes(key)) continue;\\r\\n    const currVal = normalize(flatCurrent[key]);\\r\\n    const origVal = normalize(flatOriginal?.[key]);\\r\\n    if (currVal !== origVal) changed.push(key);\\r\\n  }\\r\\n\\r\\n  return changed;\\r\\n};\\r\\n\\r\\n\\r\\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\\r\\n\\r\\n\\r\\n    const handleUpdate = async (row) => {\\r\\n    try {\\r\\n      const { id, indentNumber, ...updatedData } = row;\\r\\n\\r\\n      const currentDocSnap = await getDocs(\\r\\n        query(collection(db, \\\"fleet_records\\\"), where(\\\"indentNumber\\\", \\\"==\\\", indentNumber), where(\\\"isCurrent\\\", \\\"==\\\", true))\\r\\n      );\\r\\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\\r\\n      const oldData = flattenObject(oldDoc?.data() || {});\\r\\n\\r\\n\\r\\n      const cleanData = {};\\r\\n      const updateLog = [];\\r\\n      for (const key in updatedData) {\\r\\n        if ([\\\"id\\\", \\\"isCurrent\\\", \\\"createdAt\\\", \\\"createdBy\\\", \\\"versionDate\\\", \\\"updateDescription\\\", \\\"expiredAt\\\"].includes(key))\\r\\n          continue;\\r\\n        const newVal = updatedData[key] ?? \\\"\\\";\\r\\n        const oldVal = oldData[key] ?? \\\"\\\";\\r\\n        cleanData[key] = newVal;\\r\\n\\r\\n        if (String(newVal).trim() !== String(oldVal).trim()) {\\r\\n          updateLog.push(`Updated ${key}`);\\r\\n        }\\r\\n      }\\r\\n\\r\\n      if (updateLog.length === 0) {\\r\\n        toast.info(\\\"‚ÑπÔ∏è No changes to update.\\\");\\r\\n        return;\\r\\n      }\\r\\n\\r\\n      const confirm = window.confirm(`Update changes: ${updateLog.join(\\\", \\\")}?`);\\r\\n      if (!confirm) return;\\r\\n\\r\\n      await updateDoc(doc(db, \\\"fleet_records\\\", id), {\\r\\n        isCurrent: false,\\r\\n        expiredAt: new Date(),\\r\\n        modifiedBy: user.email\\r\\n      });\\r\\n\\r\\n      const newVersion = {\\r\\n        ...cleanData,\\r\\n        indentNumber,\\r\\n        createdAt: new Date(),\\r\\n        createdBy: user.email,\\r\\n        isCurrent: true,\\r\\n        versionDate: new Date(),\\r\\n        updateDescription: updateLog.join(\\\", \\\")\\r\\n      };\\r\\n\\r\\n      await addDoc(collection(db, \\\"fleet_records\\\"), newVersion);\\r\\n\\r\\n      toast.success(\\\"‚úÖ Record updated.\\\");\\r\\n      handleSearch();\\r\\n    } catch (error) {\\r\\n      toast.error(\\\"‚ùå Update failed: \\\" + error.message);\\r\\n    }\\r\\n  };\\r\\n\\r\\n  const handleDelete = async (fleetNumberToDelete) => {\\r\\n    try {\\r\\n      const q = query(collection(db, \\\"fleet_records\\\"), where(\\\"indentNumber\\\", \\\"==\\\", fleetNumberToDelete));\\r\\n      const snapshot = await getDocs(q);\\r\\n      if (snapshot.empty) return alert(\\\"‚ùå No records found.\\\");\\r\\n\\r\\n      const confirmDelete = window.confirm(`Delete all versions of Indent No. ${fleetNumberToDelete}?`);\\r\\n      if (!confirmDelete) return;\\r\\n\\r\\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \\\"fleet_records\\\", docSnap.id))));\\r\\n      setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\\r\\n      setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\\r\\n      toast.success(\\\"‚úÖ Deleted all versions.\\\");\\r\\n    } catch (err) {\\r\\n      toast.error(\\\"‚ùå Delete failed: \\\" + err.message);\\r\\n    }\\r\\n  };\\r\\n  if (authLoading) return <p style={{ textAlign: \\\"center\\\" }}>Checking authentication...</p>;\\r\\nif (!user) return <Auth />;\\r\\n\\r\\n\\r\\n  return (\\r\\n    <div style={{ maxWidth: \\\"100vw\\\", overflowX: \\\"hidden\\\", padding: \\\"40px 20px\\\" }}>\\r\\n      <div className=\\\"header\\\">\\r\\n        <h2>Fleet Billing Dashboard</h2>\\r\\n        <div style={{ display: \\\"flex\\\", alignItems: \\\"center\\\" }}>\\r\\n          <span className=\\\"user-email\\\">Welcome, {user.email}</span>\\r\\n          <img src=\\\"/logo.png\\\" alt=\\\"Logo\\\" style={{ height: \\\"50px\\\" }} />\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <button\\r\\n  onClick={() => {\\r\\n    // ‚úÖ Clear localStorage before logout\\r\\n    localStorage.removeItem(\\\"inProgressFleetNumber\\\");\\r\\n    localStorage.removeItem(\\\"docId\\\");\\r\\n    localStorage.removeItem(\\\"fixedFields\\\");\\r\\n    localStorage.removeItem(\\\"customerFields\\\");\\r\\n    localStorage.removeItem(\\\"vendorFields\\\");\\r\\n    localStorage.removeItem(\\\"podFields\\\");\\r\\n\\r\\n    signOut(auth);\\r\\n  }}\\r\\n>\\r\\n  Logout\\r\\n</button>\\r\\n\\r\\n      <hr />\\r\\n\\r\\n      {/* <UploadForm /> */}\\r\\n\\r\\n      <ManualEntryForm\\r\\n        onAddRow={(row, addToHistory) => {\\r\\n          setRecords([row]);\\r\\n          if (addToHistory) setHistory([row]);\\r\\n        }}\\r\\n      />\\r\\n\\r\\n      <hr />\\r\\n      <h4>Search Existing Records</h4>\\r\\n<div className=\\\"search-bar\\\" style={{ display: \\\"flex\\\", alignItems: \\\"center\\\", gap: \\\"10px\\\", flexWrap: \\\"wrap\\\" }}>\\r\\n  <select value={searchField} onChange={(e) => {\\r\\n    setSearchField(e.target.value);\\r\\n    setSearchKey(\\\"\\\");\\r\\n    setStartDate(\\\"\\\");\\r\\n    setEndDate(\\\"\\\");\\r\\n  }}>\\r\\n    <option value=\\\"indentNumber\\\">Fleet Number</option>\\r\\n    <option value=\\\"Broker\\\">Broker</option>\\r\\n    <option value=\\\"Date\\\">Date</option>\\r\\n  </select>\\r\\n\\r\\n  {searchField === \\\"Date\\\" ? (\\r\\n    <>\\r\\n      <label>From:</label>\\r\\n      <input type=\\\"date\\\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\\r\\n      <label>To:</label>\\r\\n      <input type=\\\"date\\\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\\r\\n    </>\\r\\n  ) : (\\r\\n    <input\\r\\n      type=\\\"text\\\"\\r\\n      value={searchKey}\\r\\n      onChange={(e) => setSearchKey(e.target.value)}\\r\\n      placeholder=\\\"Search key\\\"\\r\\n      style={{ width: \\\"200px\\\" }}\\r\\n    />\\r\\n  )}\\r\\n\\r\\n  {/* ‚úÖ Add checkbox here */}\\r\\n  <label style={{ display: \\\"flex\\\", alignItems: \\\"center\\\", fontSize: \\\"14px\\\" }}>\\r\\n    <input\\r\\n      type=\\\"checkbox\\\"\\r\\n      checked={activeOnly}\\r\\n      onChange={(e) => setActiveOnly(e.target.checked)}\\r\\n      style={{ marginRight: \\\"5px\\\" }}\\r\\n    />\\r\\n    Show only active\\r\\n  </label>\\r\\n\\r\\n  <button onClick={handleSearch} disabled={isSearching}>\\r\\n    {isSearching ? \\\"Searching...\\\" : \\\"Search\\\"}\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n\\r\\n      <hr />\\r\\n\\r\\n      {searchField === \\\"indentNumber\\\" && records.length > 0 && (\\r\\n        <>\\r\\n          <h4>Editable Current Records</h4>\\r\\n          <div className=\\\"table-scroll-x\\\">\\r\\n            <table>\\r\\n              <thead>\\r\\n                <tr>\\r\\n                  {finalColumnOrder.map((col) => (\\r\\n                    <th key={col}>{col.replaceAll(\\\".\\\", \\\" ‚Üí \\\")}</th>\\r\\n                  ))}\\r\\n                  <th>Action</th>\\r\\n                </tr>\\r\\n              </thead>\\r\\n              <tbody>\\r\\n                {records.map((row, rowIndex) => (\\r\\n                  <tr key={rowIndex}>\\r\\n                    {finalColumnOrder.map((col, j) => (\\r\\n                      <td key={j}>\\r\\n                        <input\\r\\n                          type=\\\"text\\\"\\r\\n                          value={\\r\\n                            typeof row[col] === \\\"object\\\" && row[col]?.seconds\\r\\n                              ? (col === \\\"date\\\"\\r\\n            ? new Date(row[col].seconds * 1000).toLocaleDateString(\\\"en-GB\\\")\\r\\n            : new Date(row[col].seconds * 1000).toLocaleString()\\r\\n          )\\r\\n        : String(row[col] ?? \\\"\\\")\\r\\n    }\\r\\n                          onChange={(e) => {\\r\\n                            const updated = [...records];\\r\\n                            updated[rowIndex][col] = e.target.value;\\r\\n                            setRecords(updated);\\r\\n                          }}\\r\\n                          readOnly={[\\\"indentNumber\\\", \\\"createdAt\\\", \\\"createdBy\\\", \\\"isCurrent\\\", \\\"updateDescription\\\"].includes(col)}\\r\\n                          style={{ width: \\\"140px\\\" }}\\r\\n                        />\\r\\n                      </td>\\r\\n                    ))}\\r\\n                    <td>\\r\\n                      <button className=\\\"save\\\" onClick={() => handleUpdate(row)}>\\r\\n                        Save\\r\\n                      </button>\\r\\n                      <button className=\\\"delete\\\" onClick={() => handleDelete(row.indentNumber)}>\\r\\n                        Delete\\r\\n                      </button>\\r\\n                    </td>\\r\\n                  </tr>\\r\\n                ))}\\r\\n              </tbody>\\r\\n\\r\\n            </table>\\r\\n          </div>\\r\\n        </>\\r\\n      )}\\r\\n\\r\\n      {history.length > 0 && (\\r\\n        <>\\r\\n          <hr />\\r\\n        <div style={{ display: \\\"flex\\\", justifyContent: \\\"space-between\\\", alignItems: \\\"center\\\" }}>\\r\\n  <h4>üîç Full Version History</h4>\\r\\n  <div style={{ display: \\\"flex\\\", gap: \\\"20px\\\", alignItems: \\\"center\\\" }}>\\r\\n  <label>\\r\\n    <input type=\\\"checkbox\\\" checked={includeCustomer} onChange={(e) => setIncludeCustomer(e.target.checked)} />\\r\\n    Include Customer\\r\\n  </label>\\r\\n  <label>\\r\\n    <input type=\\\"checkbox\\\" checked={includeVendor} onChange={(e) => setIncludeVendor(e.target.checked)} />\\r\\n    Include Vendor\\r\\n  </label>\\r\\n  <label>\\r\\n    <input type=\\\"checkbox\\\" checked={includePOD} onChange={(e) => setIncludePOD(e.target.checked)} />\\r\\n    Include POD\\r\\n  </label>\\r\\n  <button onClick={handleExportToExcel} disabled={history.length === 0} className=\\\"export-button\\\">\\r\\n    ‚¨áÔ∏è Export Selected\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n</div>\\r\\n        <div className=\\\"table-scroll-x\\\">\\r\\n          <table>\\r\\n            <thead>\\r\\n              <tr>\\r\\n                {finalColumnOrder.map((col) => (\\r\\n                  <th key={col}>{col.replaceAll(\\\".\\\", \\\" ‚Üí \\\")}</th>\\r\\n                ))}\\r\\n              </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n              {[...history]\\r\\n                .sort((a, b) => {\\r\\n                  if (a.isCurrent) return -1;\\r\\n                  if (b.isCurrent) return 1;\\r\\n                  const aTime = a.expiredAt?.seconds || 0;\\r\\n                  const bTime = b.expiredAt?.seconds || 0;\\r\\n                  return bTime - aTime;\\r\\n                })\\r\\n                .map((row, i) => (\\r\\n                  <tr key={i}>\\r\\n                    {finalColumnOrder.map((col, j) => (\\r\\n                      <td key={j}>\\r\\n                        {typeof row[col] === \\\"object\\\" && row[col]?.seconds\\r\\n              ? (col === \\\"date\\\"\\r\\n                  ? new Date(row[col].seconds * 1000).toLocaleDateString(\\\"en-GB\\\")\\r\\n                  : new Date(row[col].seconds * 1000).toLocaleString())\\r\\n              : String(row[col] ?? \\\"\\\")}\\r\\n                      </td>\\r\\n                    ))}\\r\\n                  </tr>\\r\\n                ))}\\r\\n            </tbody>\\r\\n          </table>\\r\\n        </div>\\r\\n\\r\\n        </>\\r\\n      )}\\r\\n\\r\\n      {searchAttempted && !isSearching && records.length === 0 && history.length === 0 && (\\r\\n        <p style={{ textAlign: \\\"center\\\", color: \\\"#888\\\", marginTop: \\\"30px\\\" }}>No records to display.</p>\\r\\n      )}\\r\\n\\r\\n      <ToastContainer position=\\\"bottom-right\\\" autoClose={3000} />\\r\\n      <p style={{ textAlign: \\\"center\\\", marginTop: \\\"30px\\\", color: \\\"#666\\\" }}>¬© 2025 Fleet Billing System</p>\\r\\n    </div>\\r\\n  );\\r\\n}\\r\\n\\r\\nexport default App;\\r\\n\",\"const reportWebVitals = onPerfEntry => {\\n  if (onPerfEntry && onPerfEntry instanceof Function) {\\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\\n      getCLS(onPerfEntry);\\n      getFID(onPerfEntry);\\n      getFCP(onPerfEntry);\\n      getLCP(onPerfEntry);\\n      getTTFB(onPerfEntry);\\n    });\\n  }\\n};\\n\\nexport default reportWebVitals;\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom/client';\\nimport './index.css';\\nimport App from './App';\\nimport reportWebVitals from './reportWebVitals';\\n\\nconst root = ReactDOM.createRoot(document.getElementById('root'));\\nroot.render(\\n  <React.StrictMode>\\n    <App />\\n  </React.StrictMode>\\n);\\n\\n// If you want to start measuring performance in your app, pass a function\\n// to log results (for example: reportWebVitals(console.log))\\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\\nreportWebVitals();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){\"use strict\";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=(a(28),a(19)),s=a(4),d=a(11),i=a(3),u=a(18);const m=Object(u.a)({apiKey:\"AIzaSyAOcDXL1kQsi_MoLJ33GWn9-57qhQ0CWro\",authDomain:\"fleet-9805b.firebaseapp.com\",projectId:\"fleet-9805b\",storageBucket:\"fleet-9805b.appspot.com\",messagingSenderId:\"682529821046\",appId:\"1:682529821046:web:cbb00f5dcbac062304aa57\",measurementId:\"G-T4PZQZGWZ9\"}),b=Object(d.b)(m),p=Object(i.h)(m),g={container:{minHeight:\"100vh\",background:\"linear-gradient(135deg, #1c2541, #3a506b)\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",padding:\"30px\"},card:{width:\"100%\",maxWidth:\"400px\",background:\"#0b132b\",padding:\"40px 30px\",borderRadius:\"16px\",boxShadow:\"0 0 25px rgba(0,0,0,0.3)\",textAlign:\"center\"},logo:{width:\"80%\",maxWidth:\"280px\",margin:\"0 auto 20px\",display:\"block\"},title:{marginBottom:\"20px\",color:\"#ffffff\"},form:{display:\"flex\",flexDirection:\"column\",gap:\"15px\"},input:{padding:\"12px\",borderRadius:\"8px\",border:\"1px solid #ccc\",fontSize:\"16px\",outline:\"none\"},submitBtn:{padding:\"12px\",backgroundColor:\"#1c7ed6\",color:\"#fff\",border:\"none\",borderRadius:\"8px\",fontSize:\"16px\",cursor:\"pointer\"},toggleBtn:{marginTop:\"20px\",background:\"none\",border:\"none\",color:\"#74c0fc\",cursor:\"pointer\",fontSize:\"14px\",textDecoration:\"underline\"}};var v=()=>{const[e,t]=Object(n.useState)(\"\"),[a,c]=Object(n.useState)(\"\"),[o,l]=Object(n.useState)(!0),[s,i]=Object(n.useState)(!1);return r.a.createElement(\"div\",{style:g.container},r.a.createElement(\"div\",{style:g.card},r.a.createElement(\"img\",{src:\"/logo.png\",alt:\"Logo\",style:g.logo}),r.a.createElement(\"h2\",{style:g.title},o?\"Login\":\"Sign Up\"),r.a.createElement(\"form\",{onSubmit:async t=>{t.preventDefault(),i(!0);try{o?(await Object(d.d)(b,e,a),alert(\"\\u2705 Login successful!\")):(await Object(d.a)(b,e,a),alert(\"\\u2705 Account created successfully!\"))}catch(n){alert(\"\\u274c \"+n.message)}finally{i(!1)}},style:g.form},r.a.createElement(\"input\",{type:\"email\",placeholder:\"Email Address\",value:e,onChange:e=>t(e.target.value),required:!0,style:g.input}),r.a.createElement(\"input\",{type:\"password\",placeholder:\"Password\",value:a,onChange:e=>c(e.target.value),required:!0,style:g.input}),r.a.createElement(\"button\",{type:\"submit\",disabled:s,style:g.submitBtn},s?\"Please wait...\":o?\"Login\":\"Sign Up\")),r.a.createElement(\"button\",{onClick:()=>l(!o),style:g.toggleBtn},o?\"New here? Create an account\":\"Already registered? Login\")))};const y={date:\"\",months:\"\",origin:\"\",destination:\"\",customer:\"\",customerType:\"\",vehicleNo:\"\",vendor:\"\",salesRate:\"\",buyRate:\"\"},h={toBeAdvance:\"\",advanceReceived:\"\",advDeviation:\"\",advanceRecDate:\"\",validatedAdvanceUTRDescription:\"\",validatedAdvanceAmount:\"\",balance:\"\",processingCharges:\"\",inwardMisCharges:\"\",outwardMisCharges:\"\",balanceReceived:\"\",remainingBalance:\"\",balanceRecDate:\"\",validatedBalanceUTR:\"\",validatedBalanceUTRAmount:\"\"},f={vendorOutwardPayment:\"\",paidAmount:\"\",balancePending:\"\",vendorRemark:\"\"},E={podVendorDate:\"\",podSendToCustomerDate:\"\",docNo:\"\",podCustomerRec:\"\",today:\"\",balanceOverdueDays:\"\",toBeCollectedAmount:\"\"},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",a={};for(const n in e){const r=e[n],c=t?\"\".concat(t,\".\").concat(n):n;r&&\"object\"===typeof r&&!r.seconds?Object.assign(a,S(r,c)):a[c]=r}return a};var O=e=>{let{onAddRow:t}=e;const[a,c]=Object(n.useState)(y),[o,l]=Object(n.useState)(h),[d,u]=Object(n.useState)(f),[m,g]=Object(n.useState)(E),[v,O]=Object(n.useState)(null),[j,x]=Object(n.useState)(null),[C,w]=Object(n.useState)(!1),[D,k]=Object(n.useState)(!1),[N,I]=Object(n.useState)(!1),[F,M]=Object(n.useState)(!1),[R,A]=Object(n.useState)(!1),[B,T]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=localStorage.getItem(\"inProgressIndentNumber\"),t=localStorage.getItem(\"fixedFields\"),a=localStorage.getItem(\"customerFields\"),n=localStorage.getItem(\"vendorFields\"),r=localStorage.getItem(\"podFields\"),o=localStorage.getItem(\"docId\");o&&x(o),e&&O(Number(e)),t&&c(JSON.parse(t)),a&&l(JSON.parse(a)),n&&u(JSON.parse(n)),r&&g(JSON.parse(r))},[]);const P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a={};return Object.entries(e).forEach(e=>{let[n,r]=e;if(t.includes(n)&&r){const e=new Date(r);a[n]=isNaN(e)?r:i.a.fromDate(e)}else a[n]=r}),a},L=e=>{const t=Object(s.a)(Object(s.a)({},a),{},{[e.target.name]:e.target.value});c(t),localStorage.setItem(\"fixedFields\",JSON.stringify(t))},_=(e,t)=>{const{name:a,value:n}=e.target;if(\"customer\"===t){const e=Object(s.a)(Object(s.a)({},o),{},{[a]:n});l(e),localStorage.setItem(\"customerFields\",JSON.stringify(e))}if(\"vendor\"===t){const e=Object(s.a)(Object(s.a)({},d),{},{[a]:n});u(e),localStorage.setItem(\"vendorFields\",JSON.stringify(e))}if(\"pod\"===t){const e=Object(s.a)(Object(s.a)({},m),{},{[a]:n});g(e),localStorage.setItem(\"podFields\",JSON.stringify(e))}},U=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(j)try{const r=Object(i.e)(p,\"fleet_records\",j);await Object(i.k)(r,{[\"\".concat(e)]:P(t,a)}),\"customerMaster\"===e&&M(!0),\"vendorMaster\"===e&&A(!0),\"podMaster\"===e&&T(!0),alert(\"\\u2705 \".concat(e,\" saved.\"))}catch(n){alert(\"\\u274c Save error: \"+n.message)}else alert(\"\\u26a0\\ufe0f Save fixed fields first.\")};return r.a.createElement(\"div\",{style:{marginTop:20}},r.a.createElement(\"h4\",null,\"Step 1: Fixed Fields\"),Object.keys(y).map(e=>{const t=e.toLowerCase().includes(\"date\")?\"\".concat(e,\" (dd/mm/yyyy)\"):\"months\"===e?\"months (e.g. Jul-2025)\":e;return r.a.createElement(\"input\",{key:e,name:e,placeholder:t,value:a[e],onChange:L,disabled:!!v,style:{margin:4,width:\"220px\"}})}),!v&&r.a.createElement(\"button\",{onClick:async()=>{try{const t=b.currentUser,n=await(async()=>{const e=Object(i.e)(p,\"Counters\",\"fleet_counter\");return await Object(i.j)(p,async t=>{const a=await t.get(e);if(!a.exists())throw new Error(\"Counter doc missing\");const n=a.data().nextFleetNo||1;return t.update(e,{nextFleetNo:n+1}),n})})(),r=Object(s.a)(Object(s.a)({indentNumber:n},P(a,[\"date\"])),{},{createdAt:new Date,createdBy:(null===t||void 0===t?void 0:t.email)||\"anonymous\",isCurrent:!0,versionDate:new Date,updateDescription:\"\"}),c=await Object(i.b)(Object(i.c)(p,\"fleet_records\"),r);O(n),x(c.id),localStorage.setItem(\"docId\",c.id),localStorage.setItem(\"inProgressIndentNumber\",n),await navigator.clipboard.writeText(String(n)),alert(\"\\u2705 Fixed fields saved. Indent Number copied: \".concat(n))}catch(e){alert(\"\\u274c Error saving fixed fields: \"+e.message)}}},\"\\ud83d\\udcbe Save & Continue\"),v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"p\",{style:{color:\"green\"}},\"\\u2705 Saved. Indent No: \",v),r.a.createElement(\"h4\",null,\"Step 2: Select Master Sections\"),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"checkbox\",checked:C,onChange:()=>w(!C),disabled:F}),\" Customer Master\"),r.a.createElement(\"label\",{style:{marginLeft:15}},r.a.createElement(\"input\",{type:\"checkbox\",checked:D,onChange:()=>k(!D),disabled:R}),\" Vendor Master\"),r.a.createElement(\"label\",{style:{marginLeft:15}},r.a.createElement(\"input\",{type:\"checkbox\",checked:N,onChange:()=>I(!N),disabled:B}),\" POD Master\"),C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"h5\",null,\"Customer Master\"),Object.keys(h).map(e=>{const t=[\"advanceRecDate\",\"balanceRecDate\"].includes(e)?\"\".concat(e,\" (dd/mm/yyyy)\"):e;return r.a.createElement(\"input\",{key:e,name:e,placeholder:t,value:o[e],onChange:e=>_(e,\"customer\"),style:{margin:4,width:\"220px\"},disabled:F})}),!F&&r.a.createElement(\"button\",{onClick:()=>U(\"customerMaster\",o,[\"advanceRecDate\",\"balanceRecDate\"])},\"Save Customer\")),D&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"h5\",null,\"Vendor Master\"),Object.keys(f).map(e=>r.a.createElement(\"input\",{key:e,name:e,placeholder:e,value:d[e],onChange:e=>_(e,\"vendor\"),style:{margin:4,width:\"220px\"},disabled:R})),!R&&r.a.createElement(\"button\",{onClick:()=>U(\"vendorMaster\",d)},\"Save Vendor\")),N&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"h5\",null,\"POD Master\"),Object.keys(E).map(e=>{const t=[\"podVendorDate\",\"podSendToCustomerDate\",\"podCustomerRec\",\"today\"].includes(e)?\"\".concat(e,\" (dd/mm/yyyy)\"):e;return r.a.createElement(\"input\",{key:e,name:e,placeholder:t,value:m[e],onChange:e=>_(e,\"pod\"),style:{margin:4,width:\"220px\"},disabled:B})}),!B&&r.a.createElement(\"button\",{onClick:()=>U(\"podMaster\",m,[\"podVendorDate\",\"podSendToCustomerDate\",\"podCustomerRec\",\"today\"])},\"Save POD\")),r.a.createElement(\"br\",null),r.a.createElement(\"div\",{style:{marginTop:10}},r.a.createElement(\"button\",{onClick:async()=>{if(!j)return alert(\"Fleet data not ready.\");C&&!F&&await U(\"customerMaster\",o,[\"advanceRecDate\",\"balanceRecDate\"]),D&&!R&&await U(\"vendorMaster\",d),N&&!B&&await U(\"podMaster\",m,[\"podVendorDate\",\"podSendToCustomerDate\",\"podCustomerRec\",\"today\"]);const e=await Object(i.f)(Object(i.e)(p,\"fleet_records\",j));if(!e.exists())return alert(\"Data not found.\");const a=Object(s.a)({id:e.id},e.data());t(S(a),!0),c(y),l(h),u(f),g(E),O(null),x(null),w(!1),k(!1),I(!1),M(!1),A(!1),T(!1),localStorage.removeItem(\"fixedFields\"),localStorage.removeItem(\"customerFields\"),localStorage.removeItem(\"vendorFields\"),localStorage.removeItem(\"podFields\"),localStorage.removeItem(\"inProgressIndentNumber\"),localStorage.removeItem(\"docId\"),alert(\"\\u2705 Record submitted and ready in editable table.\")},style:{backgroundColor:\"#4caf50\",marginRight:10}},\"\\u2705 Submit Record\"),r.a.createElement(\"button\",{onClick:()=>{window.confirm(\"Start a new entry? Unsaved data will be lost.\")&&(c(y),l(h),u(f),g(E),O(null),x(null),w(!1),k(!1),I(!1),M(!1),A(!1),T(!1),localStorage.removeItem(\"fixedFields\"),localStorage.removeItem(\"customerFields\"),localStorage.removeItem(\"vendorFields\"),localStorage.removeItem(\"podFields\"),localStorage.removeItem(\"inProgressIndentNumber\"),localStorage.removeItem(\"docId\"),alert(\"\\ud83c\\udd95 Ready to start a new record.\"))},style:{backgroundColor:\"#2196f3\"}},\"\\u2795 Add New Record\"))))},j=a(9);a(33);var x=a(8);a(34);const C=[\"id\",\"indentNumber\"],w=[\"indentNumber\",\"date\",\"months\",\"origin\",\"destination\",\"customer\",\"customerType\",\"vehicleNo\",\"vendor\",\"salesRate\",\"buyRate\",\"createdAt\",\"createdBy\",\"versionDate\",\"isCurrent\",\"updateDescription\",\"expiredAt\",\"customerMaster.toBeAdvance\",\"customerMaster.advanceReceived\",\"customerMaster.advDeviation\",\"customerMaster.advanceRecDate\",\"customerMaster.validatedAdvanceUTRDescription\",\"customerMaster.validatedAdvanceAmount\",\"customerMaster.balance\",\"customerMaster.processingCharges\",\"customerMaster.inwardMisCharges\",\"customerMaster.outwardMisCharges\",\"customerMaster.balanceReceived\",\"customerMaster.remainingBalance\",\"customerMaster.balanceRecDate\",\"customerMaster.validatedBalanceUTR\",\"customerMaster.validatedBalanceUTRAmount\",\"vendorMaster.vendorOutwardPayment\",\"vendorMaster.paidAmount\",\"vendorMaster.balancePending\",\"vendorMaster.vendorRemark\",\"podMaster.podVendorDate\",\"podMaster.podSendToCustomerDate\",\"podMaster.docNo\",\"podMaster.podCustomerRec\",\"podMaster.today\",\"podMaster.balanceOverdueDays\",\"podMaster.toBeCollectedAmount\"],D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",a={};for(const n in e){const r=e[n],c=t?\"\".concat(t,\".\").concat(n):n;r&&\"object\"===typeof r&&!r.seconds?Object.assign(a,D(r,c)):a[c]=r}return a};var k=function(){const[e,t]=Object(n.useState)(null),[a,c]=Object(n.useState)(!0),[o,u]=Object(n.useState)([]),[m,g]=Object(n.useState)([]),[y,h]=Object(n.useState)(\"\"),[f,E]=Object(n.useState)(\"indentNumber\"),[S,k]=Object(n.useState)(\"\"),[N,I]=Object(n.useState)(\"\"),[F,M]=Object(n.useState)({}),[R,A]=Object(n.useState)(!1),[B,T]=Object(n.useState)(!1),[P,L]=Object(n.useState)(!1),[_,U]=Object(n.useState)(!1),[J,V]=Object(n.useState)(!1),[W,z]=Object(n.useState)(!1),[G,q]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=Object(d.c)(b,e=>{t(e),c(!1)});return()=>e()},[]);const Q=async()=>{A(!0);try{const t=Object(i.c)(p,\"fleet_records\");let a;if(\"Date\"===f){const e=new Date(S),n=new Date(N+\"T23:59:59\");if(e>n)return x.b.warn(\"\\u26a0\\ufe0f 'From' date cannot be after 'To' date.\"),void A(!1);a=Object(i.i)(t,..._?[Object(i.l)(\"isCurrent\",\"==\",!0)]:[],Object(i.l)(\"createdAt\",\">=\",e),Object(i.l)(\"createdAt\",\"<=\",n))}else{if(!y)return x.b.warn(\"\\ud83d\\udd0d Please enter a search value.\"),void A(!1);{const e=\"indentNumber\"===f?Number(y):y;a=Object(i.i)(t,Object(i.l)(f,\"==\",e),..._?[Object(i.l)(\"isCurrent\",\"==\",!0)]:[])}}L(!0);const n=await Object(i.g)(a),r=[],c=[];n.forEach(e=>{const t=Object(s.a)({id:e.id},e.data()),a=D(t);r.push(a),a.isCurrent&&c.push(a)}),r.sort((e,t)=>e.isCurrent&&!t.isCurrent?-1:!e.isCurrent&&t.isCurrent?1:t.indentNumber-e.indentNumber),c.sort((e,t)=>t.indentNumber-e.indentNumber),\"indentNumber\"===f?(u(c),g(r)):(u([]),g(r)),(n.empty||0===r.length)&&x.b.info(\"\\u274c No records found.\")}catch(e){console.error(\"\\ud83d\\udd25 Full Firestore Error:\",e),x.b.error(\"\\u274c Search failed: \"+e.message)}finally{A(!1)}};return a?r.a.createElement(\"p\",{style:{textAlign:\"center\"}},\"Checking authentication...\"):e?r.a.createElement(\"div\",{style:{maxWidth:\"100vw\",overflowX:\"hidden\",padding:\"40px 20px\"}},r.a.createElement(\"div\",{className:\"header\"},r.a.createElement(\"h2\",null,\"Fleet Billing Dashboard\"),r.a.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\"}},r.a.createElement(\"span\",{className:\"user-email\"},\"Welcome, \",e.email),r.a.createElement(\"img\",{src:\"/logo.png\",alt:\"Logo\",style:{height:\"50px\"}}))),r.a.createElement(\"button\",{onClick:()=>{localStorage.removeItem(\"inProgressFleetNumber\"),localStorage.removeItem(\"docId\"),localStorage.removeItem(\"fixedFields\"),localStorage.removeItem(\"customerFields\"),localStorage.removeItem(\"vendorFields\"),localStorage.removeItem(\"podFields\"),Object(d.e)(b)}},\"Logout\"),r.a.createElement(\"hr\",null),r.a.createElement(O,{onAddRow:(e,t)=>{u([e]),t&&g([e])}}),r.a.createElement(\"hr\",null),r.a.createElement(\"h4\",null,\"Search Existing Records\"),r.a.createElement(\"div\",{className:\"search-bar\",style:{display:\"flex\",alignItems:\"center\",gap:\"10px\",flexWrap:\"wrap\"}},r.a.createElement(\"select\",{value:f,onChange:e=>{E(e.target.value),h(\"\"),k(\"\"),I(\"\")}},r.a.createElement(\"option\",{value:\"indentNumber\"},\"Fleet Number\"),r.a.createElement(\"option\",{value:\"Broker\"},\"Broker\"),r.a.createElement(\"option\",{value:\"Date\"},\"Date\")),\"Date\"===f?r.a.createElement(r.a.Fragment,null,r.a.createElement(\"label\",null,\"From:\"),r.a.createElement(\"input\",{type:\"date\",value:S,onChange:e=>k(e.target.value)}),r.a.createElement(\"label\",null,\"To:\"),r.a.createElement(\"input\",{type:\"date\",value:N,onChange:e=>I(e.target.value)})):r.a.createElement(\"input\",{type:\"text\",value:y,onChange:e=>h(e.target.value),placeholder:\"Search key\",style:{width:\"200px\"}}),r.a.createElement(\"label\",{style:{display:\"flex\",alignItems:\"center\",fontSize:\"14px\"}},r.a.createElement(\"input\",{type:\"checkbox\",checked:_,onChange:e=>U(e.target.checked),style:{marginRight:\"5px\"}}),\"Show only active\"),r.a.createElement(\"button\",{onClick:Q,disabled:R},R?\"Searching...\":\"Search\")),r.a.createElement(\"hr\",null),\"indentNumber\"===f&&o.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"h4\",null,\"Editable Current Records\"),r.a.createElement(\"div\",{className:\"table-scroll-x\"},r.a.createElement(\"table\",null,r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,w.map(e=>r.a.createElement(\"th\",{key:e},e.replaceAll(\".\",\" \\u2192 \"))),r.a.createElement(\"th\",null,\"Action\"))),r.a.createElement(\"tbody\",null,o.map((t,a)=>r.a.createElement(\"tr\",{key:a},w.map((e,n)=>{var c,l;return r.a.createElement(\"td\",{key:n},r.a.createElement(\"input\",{type:\"text\",value:\"object\"===typeof t[e]&&(null===(c=t[e])||void 0===c?void 0:c.seconds)?\"date\"===e?new Date(1e3*t[e].seconds).toLocaleDateString(\"en-GB\"):new Date(1e3*t[e].seconds).toLocaleString():String(null!==(l=t[e])&&void 0!==l?l:\"\"),onChange:t=>{const n=[...o];n[a][e]=t.target.value,u(n)},readOnly:[\"indentNumber\",\"createdAt\",\"createdBy\",\"isCurrent\",\"updateDescription\"].includes(e),style:{width:\"140px\"}}))}),r.a.createElement(\"td\",null,r.a.createElement(\"button\",{className:\"save\",onClick:()=>(async t=>{try{const{id:c,indentNumber:o}=t,d=Object(l.a)(t,C),u=(await Object(i.g)(Object(i.i)(Object(i.c)(p,\"fleet_records\"),Object(i.l)(\"indentNumber\",\"==\",o),Object(i.l)(\"isCurrent\",\"==\",!0)))).docs.find(e=>e.id===c),m=D((null===u||void 0===u?void 0:u.data())||{}),b={},g=[];for(const e in d){var a,n;if([\"id\",\"isCurrent\",\"createdAt\",\"createdBy\",\"versionDate\",\"updateDescription\",\"expiredAt\"].includes(e))continue;const t=null!==(a=d[e])&&void 0!==a?a:\"\",r=null!==(n=m[e])&&void 0!==n?n:\"\";b[e]=t,String(t).trim()!==String(r).trim()&&g.push(\"Updated \".concat(e))}if(0===g.length)return void x.b.info(\"\\u2139\\ufe0f No changes to update.\");if(!window.confirm(\"Update changes: \".concat(g.join(\", \"),\"?\")))return;await Object(i.k)(Object(i.e)(p,\"fleet_records\",c),{isCurrent:!1,expiredAt:new Date,modifiedBy:e.email});const v=Object(s.a)(Object(s.a)({},b),{},{indentNumber:o,createdAt:new Date,createdBy:e.email,isCurrent:!0,versionDate:new Date,updateDescription:g.join(\", \")});await Object(i.b)(Object(i.c)(p,\"fleet_records\"),v),x.b.success(\"\\u2705 Record updated.\"),Q()}catch(r){x.b.error(\"\\u274c Update failed: \"+r.message)}})(t)},\"Save\"),r.a.createElement(\"button\",{className:\"delete\",onClick:()=>(async e=>{try{const a=Object(i.i)(Object(i.c)(p,\"fleet_records\"),Object(i.l)(\"indentNumber\",\"==\",e)),n=await Object(i.g)(a);if(n.empty)return alert(\"\\u274c No records found.\");if(!window.confirm(\"Delete all versions of Indent No. \".concat(e,\"?\")))return;await Promise.all(n.docs.map(e=>Object(i.d)(Object(i.e)(p,\"fleet_records\",e.id)))),u(t=>t.filter(t=>t.indentNumber!==e)),g(t=>t.filter(t=>t.indentNumber!==e)),x.b.success(\"\\u2705 Deleted all versions.\")}catch(t){x.b.error(\"\\u274c Delete failed: \"+t.message)}})(t.indentNumber)},\"Delete\")))))))),m.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(\"hr\",null),r.a.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"}},r.a.createElement(\"h4\",null,\"\\ud83d\\udd0d Full Version History\"),r.a.createElement(\"div\",{style:{display:\"flex\",gap:\"20px\",alignItems:\"center\"}},r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"checkbox\",checked:J,onChange:e=>V(e.target.checked)}),\"Include Customer\"),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"checkbox\",checked:W,onChange:e=>z(e.target.checked)}),\"Include Vendor\"),r.a.createElement(\"label\",null,r.a.createElement(\"input\",{type:\"checkbox\",checked:G,onChange:e=>q(e.target.checked)}),\"Include POD\"),r.a.createElement(\"button\",{onClick:()=>{if(0===m.length)return void x.b.info(\"\\u274c No history data to export.\");const e=w.slice(0,17),t=w.slice(17,32),a=w.slice(32,36),n=w.slice(36),r=[...e,...J?t:[],...W?a:[],...G?n:[]],c=m.map(e=>{const t={};return r.forEach(a=>{const n=e[a];t[a]=(null===n||void 0===n?void 0:n.seconds)?new Date(1e3*n.seconds).toLocaleString():null!==n&&void 0!==n?n:\"\"}),t}),o=j.c.json_to_sheet(c),l=j.c.book_new();j.c.book_append_sheet(l,o,\"Filtered Export\");const s=\"FilteredExport_\".concat((new Date).toISOString().split(\"T\")[0],\".xlsx\");j.d(l,s)},disabled:0===m.length,className:\"export-button\"},\"\\u2b07\\ufe0f Export Selected\"))),r.a.createElement(\"div\",{className:\"table-scroll-x\"},r.a.createElement(\"table\",null,r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,w.map(e=>r.a.createElement(\"th\",{key:e},e.replaceAll(\".\",\" \\u2192 \"))))),r.a.createElement(\"tbody\",null,[...m].sort((e,t)=>{var a,n;if(e.isCurrent)return-1;if(t.isCurrent)return 1;const r=(null===(a=e.expiredAt)||void 0===a?void 0:a.seconds)||0;return((null===(n=t.expiredAt)||void 0===n?void 0:n.seconds)||0)-r}).map((e,t)=>r.a.createElement(\"tr\",{key:t},w.map((t,a)=>{var n,c;return r.a.createElement(\"td\",{key:a},\"object\"===typeof e[t]&&(null===(n=e[t])||void 0===n?void 0:n.seconds)?\"date\"===t?new Date(1e3*e[t].seconds).toLocaleDateString(\"en-GB\"):new Date(1e3*e[t].seconds).toLocaleString():String(null!==(c=e[t])&&void 0!==c?c:\"\"))}))))))),P&&!R&&0===o.length&&0===m.length&&r.a.createElement(\"p\",{style:{textAlign:\"center\",color:\"#888\",marginTop:\"30px\"}},\"No records to display.\"),r.a.createElement(x.a,{position:\"bottom-right\",autoClose:3e3}),r.a.createElement(\"p\",{style:{textAlign:\"center\",marginTop:\"30px\",color:\"#666\"}},\"\\xa9 2025 Fleet Billing System\")):r.a.createElement(v,null)};var N=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,36)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:c,getTTFB:o}=t;a(e),n(e),r(e),c(e),o(e)})};o.a.createRoot(document.getElementById(\"root\")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null))),N()}},[[20,1,2]]]);","extractedComments":[]}