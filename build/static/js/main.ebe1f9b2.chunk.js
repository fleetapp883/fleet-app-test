(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(40)},30:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(15),o=a.n(l),c=(a(30),a(21)),s=a(4),i=a(12),d=a(3),m=a(20);const u=Object(m.a)({apiKey:"AIzaSyAOcDXL1kQsi_MoLJ33GWn9-57qhQ0CWro",authDomain:"fleet-9805b.firebaseapp.com",projectId:"fleet-9805b",storageBucket:"fleet-9805b.appspot.com",messagingSenderId:"682529821046",appId:"1:682529821046:web:cbb00f5dcbac062304aa57",measurementId:"G-T4PZQZGWZ9"}),b=Object(i.b)(u),p=Object(d.h)(u),g={container:{minHeight:"100vh",background:"linear-gradient(135deg, #1c2541, #3a506b)",display:"flex",justifyContent:"center",alignItems:"center",padding:"30px"},card:{width:"100%",maxWidth:"400px",background:"#0b132b",padding:"40px 30px",borderRadius:"16px",boxShadow:"0 0 25px rgba(0,0,0,0.3)",textAlign:"center"},logo:{width:"80%",maxWidth:"280px",margin:"0 auto 20px",display:"block"},title:{marginBottom:"20px",color:"#ffffff"},form:{display:"flex",flexDirection:"column",gap:"15px"},input:{padding:"12px",borderRadius:"8px",border:"1px solid #ccc",fontSize:"16px",outline:"none"},submitBtn:{padding:"12px",backgroundColor:"#1c7ed6",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},toggleBtn:{marginTop:"20px",background:"none",border:"none",color:"#74c0fc",cursor:"pointer",fontSize:"14px",textDecoration:"underline"}};var v=()=>{const[e,t]=Object(r.useState)(""),[a,l]=Object(r.useState)(""),[o,c]=Object(r.useState)(!0),[s,d]=Object(r.useState)(!1);return n.a.createElement("div",{style:g.container},n.a.createElement("div",{style:g.card},n.a.createElement("img",{src:"/logo.png",alt:"Logo",style:g.logo}),n.a.createElement("h2",{style:g.title},o?"Login":"Sign Up"),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),d(!0);try{o?(await Object(i.d)(b,e,a),alert("\u2705 Login successful!")):(await Object(i.a)(b,e,a),alert("\u2705 Account created successfully!"))}catch(r){alert("\u274c "+r.message)}finally{d(!1)}},style:g.form},n.a.createElement("input",{type:"email",placeholder:"Email Address",value:e,onChange:e=>t(e.target.value),required:!0,style:g.input}),n.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0,style:g.input}),n.a.createElement("button",{type:"submit",disabled:s,style:g.submitBtn},s?"Please wait...":o?"Login":"Sign Up")),n.a.createElement("button",{onClick:()=>c(!o),style:g.toggleBtn},o?"New here? Create an account":"Already registered? Login")))},y=(a(18),a(6));const f={date:"",months:"",origin:"",destination:"",customer:"",customerType:"",vehicleNo:"",vendor:"",salesRate:"",buyRate:""},h={toBeAdvance:"",advanceReceived:"",advDeviation:"",advanceRecDate:"",validatedAdvanceUTRDescription:"",validatedAdvanceAmount:"",balance:"",processingCharges:"",inwardMisCharges:"",outwardMisCharges:"",balanceReceived:"",remainingBalance:"",balanceRecDate:"",validatedBalanceUTR:"",validatedBalanceUTRAmount:""},O={vendorOutwardPayment:"",paidAmount:"",balancePending:"",vendorRemark:""},E={podVendorDate:"",podSendToCustomerDate:"",docNo:"",podCustomerRec:"",today:"",balanceOverdueDays:"",toBeCollectedAmount:""},C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={};for(const r in e){const n=e[r],l=t?"".concat(t,".").concat(r):r;n&&"object"===typeof n&&!n.seconds?Object.assign(a,C(n,l)):a[l]=n}return a};var S=e=>{let{onAddRow:t}=e;const[a,l]=Object(r.useState)(f),[o,c]=Object(r.useState)(h),[i,m]=Object(r.useState)(O),[u,g]=Object(r.useState)(E),[v,S]=Object(r.useState)(null),[j,x]=Object(r.useState)(null),[D,M]=Object(r.useState)(!1),[N,w]=Object(r.useState)(!1),[A,R]=Object(r.useState)(!1),[k,I]=Object(r.useState)(!1),[B,T]=Object(r.useState)(!1),[F,P]=Object(r.useState)(!1);Object(r.useEffect)(()=>{const e=localStorage.getItem("inProgressIndentNumber"),t=localStorage.getItem("fixedFields"),a=localStorage.getItem("customerFields"),r=localStorage.getItem("vendorFields"),n=localStorage.getItem("podFields"),o=localStorage.getItem("docId");o&&x(o),e&&S(Number(e)),t&&l(JSON.parse(t)),a&&c(JSON.parse(a)),r&&m(JSON.parse(r)),n&&g(JSON.parse(n))},[]);const V=e=>e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/^./,e=>e.toUpperCase()),U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a={};return Object.entries(e).forEach(e=>{let[r,n]=e;if(t.includes(r)&&n){const e=new Date(n);a[r]=isNaN(e)?n:d.a.fromDate(e)}else a[r]=n}),a},L=e=>{const t=Object(s.a)(Object(s.a)({},a),{},{[e.target.name]:e.target.value});l(t),localStorage.setItem("fixedFields",JSON.stringify(t))},_=(e,t)=>{const{name:a,value:r}=e.target;if("customer"===t){const e=Object(s.a)(Object(s.a)({},o),{},{[a]:r});c(e),localStorage.setItem("customerFields",JSON.stringify(e))}if("vendor"===t){const e=Object(s.a)(Object(s.a)({},i),{},{[a]:r});m(e),localStorage.setItem("vendorFields",JSON.stringify(e))}if("pod"===t){const e=Object(s.a)(Object(s.a)({},u),{},{[a]:r});g(e),localStorage.setItem("podFields",JSON.stringify(e))}},W=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(j)try{const n=Object(d.e)(p,"fleet_records",j);await Object(d.k)(n,{["".concat(e)]:U(t,a)}),"customerMaster"===e&&I(!0),"vendorMaster"===e&&T(!0),"podMaster"===e&&P(!0),Object(y.confirmAlert)({title:"Saved",message:"\u2705 ".concat(e," saved."),buttons:[{label:"OK"}]})}catch(r){Object(y.confirmAlert)({title:"Error",message:"\u274c Save error: "+r.message,buttons:[{label:"OK"}]})}else Object(y.confirmAlert)({title:"Missing Info",message:"\u26a0\ufe0f Save fixed fields first.",buttons:[{label:"OK"}]})};return n.a.createElement("div",{style:{marginTop:20}},n.a.createElement("h4",null,"Step 1: Fixed Fields"),n.a.createElement("div",{className:"card p-4 mb-4"},n.a.createElement("div",{className:"fixed-fields-grid",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"16px"}},Object.keys(f).map(e=>(e.toLowerCase().includes("date")&&"".concat(e," (dd/mm/yyyy)"),n.a.createElement("div",{key:e},n.a.createElement("label",{className:"form-label",style:{fontWeight:"500"}},V(e)),n.a.createElement("input",{name:e,className:"form-control",placeholder:"",value:a[e],onChange:L,disabled:!!v,type:"text"}))))),!v&&n.a.createElement("div",{style:{marginTop:"20px",width:"100%",textAlign:"right"}},n.a.createElement("button",{className:"btn btn-primary",onClick:async()=>{if(Object.values(a).some(e=>""!==String(null!==e&&void 0!==e?e:"").trim()))try{const t=b.currentUser,r=await(async()=>{const e=Object(d.e)(p,"Counters","fleet_counter");return await Object(d.j)(p,async t=>{const a=await t.get(e);if(!a.exists())throw new Error("Counter doc missing");const r=a.data().nextFleetNo||1;return t.update(e,{nextFleetNo:r+1}),r})})(),n=Object(s.a)(Object(s.a)({indentNumber:r},U(a,["date"])),{},{createdAt:new Date,createdBy:(null===t||void 0===t?void 0:t.email)||"anonymous",isCurrent:!0,versionDate:new Date,updateDescription:""}),l=await Object(d.b)(Object(d.c)(p,"fleet_records"),n);S(r),x(l.id),localStorage.setItem("docId",l.id),localStorage.setItem("inProgressIndentNumber",r),await navigator.clipboard.writeText(String(r)),Object(y.confirmAlert)({title:"Success",message:"\u2705 Fixed fields saved. Indent Number copied: ".concat(r),buttons:[{label:"OK"}]})}catch(e){Object(y.confirmAlert)({title:"Error",message:"\u274c Error saving fixed fields: "+e.message,buttons:[{label:"OK"}]})}else Object(y.confirmAlert)({title:"Validation Error",message:"\u26a0\ufe0f Please fill at least one field before continuing.",buttons:[{label:"OK"}]})}},"\ud83d\udcbe Save & Continue"))),v&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{style:{color:"green"}},"\u2705 Saved. Indent No: ",v),n.a.createElement("h4",null,"Step 2: Select Master Sections"),n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:D,onChange:()=>M(!D),disabled:k})," Customer Master"),n.a.createElement("label",{style:{marginLeft:15}},n.a.createElement("input",{type:"checkbox",checked:N,onChange:()=>w(!N),disabled:B})," Vendor Master"),n.a.createElement("label",{style:{marginLeft:15}},n.a.createElement("input",{type:"checkbox",checked:A,onChange:()=>R(!A),disabled:F})," POD Master"),D&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",null,"Customer Master"),n.a.createElement("div",{className:"card p-3 mb-3"},n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"16px"}},Object.keys(h).map(e=>(["advanceRecDate","balanceRecDate"].includes(e)&&"".concat(e," (dd/mm/yyyy)"),n.a.createElement("div",{key:e},n.a.createElement("label",{className:"form-label",style:{fontWeight:"500"}},V(e)),n.a.createElement("input",{name:e,className:"form-control",placeholder:"",value:o[e],onChange:e=>_(e,"customer"),disabled:k,type:"text"}))))),!k&&n.a.createElement("div",{style:{textAlign:"right",marginTop:"16px"}},n.a.createElement("button",{className:"btn btn-primary",onClick:()=>W("customerMaster",o,["advanceRecDate","balanceRecDate"])},"Save Customer")))),N&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",null,"Vendor Master"),n.a.createElement("div",{className:"card p-3 mb-3"},n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"16px"}},Object.keys(O).map(e=>n.a.createElement("div",{key:e},n.a.createElement("label",{className:"form-label",style:{fontWeight:"500"}},V(e)),n.a.createElement("input",{name:e,className:"form-control",placeholder:"",value:i[e],onChange:e=>_(e,"vendor"),disabled:B,type:"text"})))),!B&&n.a.createElement("div",{style:{textAlign:"right",marginTop:"16px"}},n.a.createElement("button",{className:"btn btn-primary mt-3",onClick:()=>W("vendorMaster",i)},"Save Vendor")))),A&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h5",null,"POD Master"),n.a.createElement("div",{className:"card p-3 mb-3"},n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"16px"}},Object.keys(E).map(e=>(["podVendorDate","podSendToCustomerDate","podCustomerRec","today"].includes(e)&&"".concat(e," (dd/mm/yyyy)"),n.a.createElement("div",{key:e},n.a.createElement("label",{className:"form-label",style:{fontWeight:"500"}},V(e)),n.a.createElement("input",{name:e,className:"form-control",placeholder:"",value:u[e],onChange:e=>_(e,"pod"),disabled:F,type:"text"}))))),!F&&n.a.createElement("div",{style:{textAlign:"right",marginTop:"16px"}},n.a.createElement("button",{className:"btn btn-primary mt-3",onClick:()=>W("podMaster",u,["podVendorDate","podSendToCustomerDate","podCustomerRec","today"])},"Save POD")))),n.a.createElement("br",null),n.a.createElement("div",{style:{marginTop:10,width:"100%",textAlign:"right"}},n.a.createElement("button",{onClick:async()=>{if(!j)return void Object(y.confirmAlert)({title:"Error",message:"Fleet data not ready.",buttons:[{label:"OK"}]});D&&!k&&await W("customerMaster",o,["advanceRecDate","balanceRecDate"]),N&&!B&&await W("vendorMaster",i),A&&!F&&await W("podMaster",u,["podVendorDate","podSendToCustomerDate","podCustomerRec","today"]);const e=await Object(d.f)(Object(d.e)(p,"fleet_records",j));if(!e.exists())return void Object(y.confirmAlert)({title:"Error",message:"Data not found.",buttons:[{label:"OK"}]});const a=Object(s.a)({id:e.id},e.data());t(C(a),!0),l(f),c(h),m(O),g(E),S(null),x(null),M(!1),w(!1),R(!1),I(!1),T(!1),P(!1),localStorage.removeItem("fixedFields"),localStorage.removeItem("customerFields"),localStorage.removeItem("vendorFields"),localStorage.removeItem("podFields"),localStorage.removeItem("inProgressIndentNumber"),localStorage.removeItem("docId"),Object(y.confirmAlert)({title:"Done",message:"\u2705 Record submitted and ready in editable table.",buttons:[{label:"OK"}]})},className:"btn btn-success me-2"},"\u2705 Submit Record"),n.a.createElement("button",{onClick:()=>{Object(y.confirmAlert)({title:"Confirm New Entry",message:"Start a new entry? Unsaved data will be lost.",buttons:[{label:"Yes",onClick:()=>{l(f),c(h),m(O),g(E),S(null),x(null),M(!1),w(!1),R(!1),I(!1),T(!1),P(!1),localStorage.removeItem("fixedFields"),localStorage.removeItem("customerFields"),localStorage.removeItem("vendorFields"),localStorage.removeItem("podFields"),localStorage.removeItem("inProgressIndentNumber"),localStorage.removeItem("docId"),Object(y.confirmAlert)({title:"Ready",message:"\ud83c\udd95 Ready to start a new record.",buttons:[{label:"OK"}]})}},{label:"No"}]})},className:"btn btn-primary"},"\u2795 Add New Record"))))},j=a(10);a(38);var x=a(8);a(39);const D=["id","indentNumber"],M=["indentNumber","date","months","origin","destination","customer","customerType","vehicleNo","vendor","salesRate","buyRate","createdAt","createdBy","versionDate","isCurrent","updateDescription","expiredAt","customerMaster.toBeAdvance","customerMaster.advanceReceived","customerMaster.advDeviation","customerMaster.advanceRecDate","customerMaster.validatedAdvanceUTRDescription","customerMaster.validatedAdvanceAmount","customerMaster.balance","customerMaster.processingCharges","customerMaster.inwardMisCharges","customerMaster.outwardMisCharges","customerMaster.balanceReceived","customerMaster.remainingBalance","customerMaster.balanceRecDate","customerMaster.validatedBalanceUTR","customerMaster.validatedBalanceUTRAmount","vendorMaster.vendorOutwardPayment","vendorMaster.paidAmount","vendorMaster.balancePending","vendorMaster.vendorRemark","podMaster.podVendorDate","podMaster.podSendToCustomerDate","podMaster.docNo","podMaster.podCustomerRec","podMaster.today","podMaster.balanceOverdueDays","podMaster.toBeCollectedAmount"],N={indentNumber:"Indent Number",date:"Date",months:"Month",origin:"Origin",destination:"Destination",customer:"Customer",customerType:"Customer Type",vehicleNo:"Vehicle Number",vendor:"Vendor",salesRate:"Sales Rate",buyRate:"Buy Rate",createdAt:"Created At",createdBy:"Created By",versionDate:"Version Date",isCurrent:"Is Current",updateDescription:"Update Description",expiredAt:"Expired At","customerMaster.toBeAdvance":"Customer Master -> To be Advance (Sales)","customerMaster.advanceReceived":"Customer Master -> Advance / Payment Received","customerMaster.advDeviation":"Customer Master -> Adv Deviation (as on Date)","customerMaster.advanceRecDate":"Customer Master -> Advance Rec Date","customerMaster.validatedAdvanceUTRDescription":"Customer Master -> Validated-Advance UTR Description","customerMaster.validatedAdvanceAmount":"Customer Master -> Validated UTR - Advance Amount","customerMaster.balance":"Customer Master -> Balance","customerMaster.processingCharges":"Customer Master -> Processing Charges","customerMaster.inwardMisCharges":"Customer Master -> Inward-Mis Charges","customerMaster.outwardMisCharges":"Customer Master -> Outward-Mis Charges","customerMaster.balanceReceived":"Customer Master -> Bal Received","customerMaster.remainingBalance":"Customer Master -> Remaining Balance","customerMaster.balanceRecDate":"Customer Master -> Balance Rec Date","customerMaster.validatedBalanceUTR":"Customer Master -> Validated-Balance UTR","customerMaster.validatedBalanceUTRAmount":"Customer Master -> Validate Balance UTR-Amount","vendorMaster.vendorOutwardPayment":"Vendor Master -> Outward Payment","vendorMaster.paidAmount":"Vendor Master -> Paid Amount","vendorMaster.balancePending":"Vendor Master -> Balance Pending","vendorMaster.vendorRemark":"Vendor Master -> Vendor Remark","podMaster.podVendorDate":"POD Master -> POD Vendor-Date","podMaster.podSendToCustomerDate":"POD Master -> POD-Send to Customer Date","podMaster.docNo":"POD Master -> Doc No","podMaster.podCustomerRec":"POD Master -> POD-Customer Rec","podMaster.today":"POD Master -> Today","podMaster.balanceOverdueDays":"POD Master -> Balance Overdue Days","podMaster.toBeCollectedAmount":"POD Master -> To be Collected Amount"},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={};for(const r in e){const n=e[r],l=t?"".concat(t,".").concat(r):r;n&&"object"===typeof n&&!n.seconds?Object.assign(a,w(n,l)):a[l]=n}return a};var A=function(){const[e,t]=Object(r.useState)(null),[a,l]=Object(r.useState)(!0),[o,m]=Object(r.useState)([]),[u,g]=Object(r.useState)([]),[f,h]=Object(r.useState)(""),[O,E]=Object(r.useState)("indentNumber"),[C,A]=Object(r.useState)(""),[R,k]=Object(r.useState)(""),[I,B]=Object(r.useState)({}),[T,F]=Object(r.useState)(!1),[P,V]=Object(r.useState)(!1),[U,L]=Object(r.useState)(!1),[_,W]=Object(r.useState)(!1),[J,K]=Object(r.useState)(!1),[z,G]=Object(r.useState)(!1),[Z,q]=Object(r.useState)(!1);Object(r.useEffect)(()=>{const e=Object(i.c)(b,e=>{t(e),l(!1)});return()=>e()},[]);const Q=async()=>{F(!0);try{const t=Object(d.c)(p,"fleet_records");let a;if("Date"===O){const e=new Date(C),r=new Date(R+"T23:59:59");if(e>r)return x.b.warn("\u26a0\ufe0f 'From' date cannot be after 'To' date."),void F(!1);a=Object(d.i)(t,..._?[Object(d.l)("isCurrent","==",!0)]:[],Object(d.l)("createdAt",">=",e),Object(d.l)("createdAt","<=",r))}else{if(!f)return x.b.warn("\ud83d\udd0d Please enter a search value."),void F(!1);{const e="indentNumber"===O?Number(f):f;a=Object(d.i)(t,Object(d.l)(O,"==",e),..._?[Object(d.l)("isCurrent","==",!0)]:[])}}L(!0);const r=await Object(d.g)(a),n=[],l=[];r.forEach(e=>{const t=Object(s.a)({id:e.id},e.data()),a=w(t);n.push(a),a.isCurrent&&l.push(a)}),n.sort((e,t)=>e.isCurrent&&!t.isCurrent?-1:!e.isCurrent&&t.isCurrent?1:t.indentNumber-e.indentNumber),l.sort((e,t)=>t.indentNumber-e.indentNumber),"indentNumber"===O?(m(l),g(n)):(m([]),g(n)),(r.empty||0===n.length)&&x.b.info("\u274c No records found.")}catch(e){x.b.error("\u274c Search failed: "+e.message)}finally{F(!1)}};return a?n.a.createElement("p",{style:{textAlign:"center"}},"Checking authentication..."):e?n.a.createElement("div",{style:{maxWidth:"100vw",overflowX:"hidden",padding:"40px 20px"}},n.a.createElement("div",{className:"header"},n.a.createElement("h2",null,"Fleet Billing Dashboard"),n.a.createElement("div",{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{className:"user-email"},"Welcome, ",e.email),n.a.createElement("img",{src:"/logo.png",alt:"Logo",style:{height:"50px"}}))),n.a.createElement("button",{onClick:()=>{localStorage.removeItem("inProgressFleetNumber"),localStorage.removeItem("docId"),localStorage.removeItem("fixedFields"),localStorage.removeItem("customerFields"),localStorage.removeItem("vendorFields"),localStorage.removeItem("podFields"),Object(i.e)(b)}},"Logout"),n.a.createElement("hr",null),n.a.createElement(S,{onAddRow:(e,t)=>{m([e]),t&&g([e])}}),n.a.createElement("hr",null),n.a.createElement("h4",null,"Search Existing Records"),n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",alignItems:"center",justifyContent:"space-between",width:"100%"}},n.a.createElement("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",alignItems:"center"}},n.a.createElement("select",{value:O,onChange:e=>{E(e.target.value),h(""),A(""),k("")}},n.a.createElement("option",{value:"indentNumber"},"Fleet Number"),n.a.createElement("option",{value:"Broker"},"Broker"),n.a.createElement("option",{value:"Date"},"Date")),"Date"===O?n.a.createElement(n.a.Fragment,null,n.a.createElement("label",null,"From:"),n.a.createElement("input",{type:"date",value:C,onChange:e=>A(e.target.value)}),n.a.createElement("label",null,"To:"),n.a.createElement("input",{type:"date",value:R,onChange:e=>k(e.target.value)})):n.a.createElement("input",{type:"text",value:f,onChange:e=>h(e.target.value),placeholder:"Search key",style:{flex:1,width:"250px"}}),n.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},n.a.createElement("label",{style:{display:"flex",alignItems:"center",fontSize:"14px",marginBottom:0}},n.a.createElement("input",{type:"checkbox",checked:_,onChange:e=>W(e.target.checked),style:{marginRight:"5px"}}),"Show only active")),n.a.createElement("button",{className:"btn btn-primary",onClick:Q,disabled:T},T?"Searching...":"Search"))),n.a.createElement("hr",null),"indentNumber"===O&&o.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Editable Current Records"),n.a.createElement("div",{className:"table-scroll-x"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,M.map(e=>n.a.createElement("th",{key:e},N[e]||e)),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,o.map((t,a)=>n.a.createElement("tr",{key:a},M.map((e,r)=>{var l,c;return n.a.createElement("td",{key:r},n.a.createElement("input",{type:"text",value:"object"===typeof t[e]&&(null===(l=t[e])||void 0===l?void 0:l.seconds)?"date"===e?new Date(1e3*t[e].seconds).toLocaleDateString("en-GB"):new Date(1e3*t[e].seconds).toLocaleString():String(null!==(c=t[e])&&void 0!==c?c:""),onChange:t=>{const r=[...o];r[a][e]=t.target.value,m(r)},readOnly:["indentNumber","createdAt","createdBy","isCurrent","updateDescription"].includes(e),style:{width:"140px"}}))}),n.a.createElement("td",null,n.a.createElement("button",{className:"save",onClick:()=>(async t=>{try{const{id:l,indentNumber:o}=t,i=Object(c.a)(t,D),m=(await Object(d.g)(Object(d.i)(Object(d.c)(p,"fleet_records"),Object(d.l)("indentNumber","==",o),Object(d.l)("isCurrent","==",!0)))).docs.find(e=>e.id===l),u=w((null===m||void 0===m?void 0:m.data())||{}),b={},g=[];for(const e in i){var a,r;if(["id","isCurrent","createdAt","createdBy","versionDate","updateDescription","expiredAt"].includes(e))continue;const t=null!==(a=i[e])&&void 0!==a?a:"",n=null!==(r=u[e])&&void 0!==r?r:"";b[e]=t,String(t).trim()!==String(n).trim()&&g.push("Updated ".concat(e))}return 0===g.length?void x.b.info("\u2139\ufe0f No changes to update."):void Object(y.confirmAlert)({title:"Confirm Update",message:"Do you want to update changes: ".concat(g.join(", "),"?"),buttons:[{label:"Yes",onClick:async()=>{await Object(d.k)(Object(d.e)(p,"fleet_records",l),{isCurrent:!1,expiredAt:new Date,modifiedBy:e.email});const t=Object(s.a)(Object(s.a)({},b),{},{indentNumber:o,createdAt:new Date,createdBy:e.email,isCurrent:!0,versionDate:new Date,updateDescription:g.join(", ")});await Object(d.b)(Object(d.c)(p,"fleet_records"),t),x.b.success("\u2705 Record updated."),Q()}},{label:"No"}]})}catch(n){x.b.error("\u274c Update failed: "+n.message)}})(t)},"Save"),n.a.createElement("button",{className:"delete",onClick:()=>(async e=>{try{const a=Object(d.i)(Object(d.c)(p,"fleet_records"),Object(d.l)("indentNumber","==",e)),r=await Object(d.g)(a);return r.empty?void x.b.error("\u274c No records found for deletion."):void Object(y.confirmAlert)({title:"Confirm Deletion",message:"Delete all versions of Indent No. ".concat(e,"?"),buttons:[{label:"Yes",onClick:async()=>{await Promise.all(r.docs.map(e=>Object(d.d)(Object(d.e)(p,"fleet_records",e.id)))),m(t=>t.filter(t=>t.indentNumber!==e)),g(t=>t.filter(t=>t.indentNumber!==e)),x.b.success("\u2705 Deleted all versions.")}},{label:"No"}]})}catch(t){x.b.error("\u274c Delete failed: "+t.message)}})(t.indentNumber)},"Delete")))))))),u.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("hr",null),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.a.createElement("h4",null,"\ud83d\udd0d Full Version History"),n.a.createElement("div",{style:{display:"flex",gap:"20px",alignItems:"center"}},n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:J,onChange:e=>K(e.target.checked)}),"Include Customer"),n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:z,onChange:e=>G(e.target.checked)}),"Include Vendor"),n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",checked:Z,onChange:e=>q(e.target.checked)}),"Include POD"),n.a.createElement("button",{onClick:()=>{if(0===u.length)return void x.b.info("\u274c No history data to export.");const e=M.slice(0,17),t=M.slice(17,32),a=M.slice(32,36),r=M.slice(36),n=[...e,...J?t:[],...z?a:[],...Z?r:[]],l=u.map(e=>{const t={};return n.forEach(a=>{const r=e[a];t[a]=(null===r||void 0===r?void 0:r.seconds)?new Date(1e3*r.seconds).toLocaleString():null!==r&&void 0!==r?r:""}),t}),o=j.c.json_to_sheet(l),c=j.c.book_new();j.c.book_append_sheet(c,o,"Filtered Export");const s="FilteredExport_".concat((new Date).toISOString().split("T")[0],".xlsx");j.d(c,s)},disabled:0===u.length,className:"export-button"},"\u2b07\ufe0f Export Selected"))),n.a.createElement("div",{className:"table-scroll-x"},n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,M.map(e=>n.a.createElement("th",{key:e,className:"tight-header"},N[e]||e)))),n.a.createElement("tbody",null,[...u].sort((e,t)=>{var a,r;if(e.isCurrent)return-1;if(t.isCurrent)return 1;const n=(null===(a=e.expiredAt)||void 0===a?void 0:a.seconds)||0;return((null===(r=t.expiredAt)||void 0===r?void 0:r.seconds)||0)-n}).map((e,t)=>n.a.createElement("tr",{key:t},M.map((t,a)=>{var r,l;return n.a.createElement("td",{key:a},"object"===typeof e[t]&&(null===(r=e[t])||void 0===r?void 0:r.seconds)?"date"===t?new Date(1e3*e[t].seconds).toLocaleDateString("en-GB"):new Date(1e3*e[t].seconds).toLocaleString():String(null!==(l=e[t])&&void 0!==l?l:""))}))))))),U&&!T&&0===o.length&&0===u.length&&n.a.createElement("p",{style:{textAlign:"center",color:"#888",marginTop:"30px"}},"No records to display."),n.a.createElement(x.a,{position:"bottom-right",autoClose:3e3}),n.a.createElement("p",{style:{textAlign:"center",marginTop:"30px",color:"#666"}},"\xa9 2025 Fleet Billing System")):n.a.createElement(v,null)};var R=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,41)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:l,getTTFB:o}=t;a(e),r(e),n(e),l(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(A,null))),R()}},[[22,1,2]]]);
//# sourceMappingURL=main.ebe1f9b2.chunk.js.map