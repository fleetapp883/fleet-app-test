{"version":3,"sources":["firebase.js","components/Auth.js","components/ManualEntryForm.js","components/UploadForm.js","App.js","reportWebVitals.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAuth","db","getFirestore","styles","container","minHeight","background","display","justifyContent","alignItems","padding","card","width","maxWidth","borderRadius","boxShadow","textAlign","logo","margin","title","marginBottom","color","form","flexDirection","gap","input","border","fontSize","outline","submitBtn","backgroundColor","cursor","toggleBtn","marginTop","textDecoration","Auth","email","setEmail","useState","password","setPassword","isLogin","setIsLogin","loading","setLoading","React","createElement","style","src","alt","onSubmit","async","e","preventDefault","signInWithEmailAndPassword","alert","createUserWithEmailAndPassword","err","message","type","placeholder","value","onChange","target","required","disabled","onClick","fixedFieldsInitial","date","months","origin","destination","customer","customerType","vehicleNo","vendor","salesRate","buyRate","customerFields","toBeAdvance","advanceReceived","advDeviation","advanceRecDate","validatedAdvanceUTRDescription","validatedAdvanceAmount","balance","processingCharges","inwardMisCharges","outwardMisCharges","balanceReceived","remainingBalance","balanceRecDate","validatedBalanceUTR","validatedBalanceUTRAmount","vendorFields","vendorOutwardPayment","paidAmount","balancePending","vendorRemark","podFields","podVendorDate","podSendToCustomerDate","docNo","podCustomerRec","today","balanceOverdueDays","toBeCollectedAmount","flattenObject","obj","prefix","arguments","length","undefined","result","key","fullKey","concat","seconds","Object","assign","ManualEntryForm","_ref","onAddRow","fixedFields","setFixedFields","customerData","setCustomerData","vendorData","setVendorData","podData","setPodData","indentNumber","setIndentNumber","docId","setDocId","showCustomer","setShowCustomer","showVendor","setShowVendor","showPod","setShowPod","customerSaved","setCustomerSaved","vendorSaved","setVendorSaved","podSaved","setPodSaved","useEffect","storedIndentNo","localStorage","getItem","storedFixed","storedCustomer","storedVendor","storedPod","storedDocId","Number","JSON","parse","convertDateFields","data","allowedKeys","entries","forEach","_ref2","includes","parsed","Date","isNaN","Timestamp","fromDate","handleFixedChange","updated","_objectSpread","[object Object]","name","setItem","stringify","handleSectionChange","section","saveSection","sectionName","sectionData","dateFields","docRef","doc","updateDoc","keys","map","label","toLowerCase","user","currentUser","indentNo","counterRef","runTransaction","docSnap","transaction","get","exists","Error","current","nextFleetNo","update","getNextIndentNumber","enrichedData","createdAt","createdBy","isCurrent","versionDate","updateDescription","addDoc","collection","id","navigator","clipboard","writeText","String","Fragment","checked","marginLeft","getDoc","removeItem","marginRight","handleNewRecord","window","confirm","UploadForm","finalColumnOrder","App","setUser","authLoading","setAuthLoading","records","setRecords","history","setHistory","searchKey","setSearchKey","searchField","setSearchField","startDate","setStartDate","endDate","setEndDate","originalRecords","setOriginalRecords","isSearching","setIsSearching","isExporting","setIsExporting","searchAttempted","setSearchAttempted","activeOnly","setActiveOnly","includeCustomer","setIncludeCustomer","includeVendor","setIncludeVendor","includePOD","setIncludePOD","unsubscribe","onAuthStateChanged","handleSearch","fleetRef","q","toDate","toast","warn","query","where","snapshot","getDocs","allVersions","currentOnly","rawData","row","push","sort","a","b","empty","info","error","console","overflowX","className","height","signOut","addToHistory","flexWrap","col","replaceAll","rowIndex","j","_row$col","_row$col2","toLocaleDateString","toLocaleString","readOnly","updatedData","_objectWithoutProperties","_excluded","oldDoc","docs","find","oldData","cleanData","updateLog","_updatedData$key","_oldData$key","newVal","oldVal","trim","join","expiredAt","modifiedBy","newVersion","success","handleUpdate","fleetNumberToDelete","Promise","all","deleteDoc","prev","filter","r","handleDelete","handleExportToExcel","fixedCols","slice","customerCols","vendorCols","podCols","selectedCols","exportData","flatRow","val","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","fileName","toISOString","split","_a$expiredAt","_b$expiredAt","aTime","i","_row$col3","_row$col4","ToastContainer","position","autoClose","reportWebVitals","onPerfEntry","Function","__webpack_require__","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.6d1953ff.chunk.js","sourcesContent":["\r\n// // src/firebase.js\r\n\r\n// import { initializeApp } from \"firebase/app\";\r\n// import { getAuth } from \"firebase/auth\";\r\n// import { getFirestore } from \"firebase/firestore\";\r\n\r\n// // ‚úÖ Your Firebase configuration\r\n// const firebaseConfig = {\r\n//   apiKey: \"AIzaSyCWw-I6mxAkJ1Q0Gt_wP1Bge-N0o-7MePU\",\r\n//   authDomain: \"sample-firebase-ai-app-c8afb.firebaseapp.com\",\r\n//   projectId: \"sample-firebase-ai-app-c8afb\",\r\n//   storageBucket: \"sample-firebase-ai-app-c8afb.appspot.com\", // üîß fixed from .app to .appspot.com\r\n//   messagingSenderId: \"221369775323\",\r\n//   appId: \"1:221369775323:web:c05d3eb4f88d1278d348fe\"\r\n// };\r\n\r\n// // ‚úÖ Initialize Firebase app\r\n// const app = initializeApp(firebaseConfig);\r\n\r\n// // ‚úÖ Export auth and firestore\r\n// export const auth = getAuth(app);\r\n// export const db = getFirestore(app);\r\n// src/firebase.js\r\n\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\n// ‚úÖ Your Firebase configuration (copied from Firebase Console)\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAOcDXL1kQsi_MoLJ33GWn9-57qhQ0CWro\",\r\n  authDomain: \"fleet-9805b.firebaseapp.com\",\r\n  projectId: \"fleet-9805b\",\r\n  storageBucket: \"fleet-9805b.appspot.com\", // ‚úÖ fixed: was \"firebasestorage.app\", should be \"appspot.com\"\r\n  messagingSenderId: \"682529821046\",\r\n  appId: \"1:682529821046:web:cbb00f5dcbac062304aa57\",\r\n  measurementId: \"G-T4PZQZGWZ9\"\r\n};\r\n\r\n// ‚úÖ Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// ‚úÖ Export Firebase services\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);","import React, { useState } from \"react\";\r\nimport { auth } from \"../firebase\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword\r\n} from \"firebase/auth\";\r\n\r\nconst Auth = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      if (isLogin) {\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n        alert(\"‚úÖ Login successful!\");\r\n      } else {\r\n        await createUserWithEmailAndPassword(auth, email, password);\r\n        alert(\"‚úÖ Account created successfully!\");\r\n      }\r\n    } catch (err) {\r\n      alert(\"‚ùå \" + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <img src=\"/logo.png\" alt=\"Logo\" style={styles.logo} />\r\n        <h2 style={styles.title}>{isLogin ? \"Login\" : \"Sign Up\"}</h2>\r\n        <form onSubmit={handleSubmit} style={styles.form}>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email Address\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n            style={styles.input}\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n            style={styles.input}\r\n          />\r\n          <button type=\"submit\" disabled={loading} style={styles.submitBtn}>\r\n            {loading ? \"Please wait...\" : isLogin ? \"Login\" : \"Sign Up\"}\r\n          </button>\r\n        </form>\r\n        <button onClick={() => setIsLogin(!isLogin)} style={styles.toggleBtn}>\r\n          {isLogin\r\n            ? \"New here? Create an account\"\r\n            : \"Already registered? Login\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    minHeight: \"100vh\",\r\n    background: \"linear-gradient(135deg, #1c2541, #3a506b)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: \"30px\"\r\n  },\r\n  card: {\r\n    width: \"100%\",\r\n    maxWidth: \"400px\",\r\n    background: \"#0b132b\",\r\n    padding: \"40px 30px\",\r\n    borderRadius: \"16px\",\r\n    boxShadow: \"0 0 25px rgba(0,0,0,0.3)\",\r\n    textAlign: \"center\"\r\n  },\r\n  logo: {\r\n    width: \"80%\",     // ‚úÖ fit horizontally without overflowing\r\n    maxWidth: \"280px\",\r\n    margin: \"0 auto 20px\",\r\n    display: \"block\"\r\n  },\r\n  title: {\r\n    marginBottom: \"20px\",\r\n    color: \"#ffffff\"\r\n  },\r\n  form: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: \"15px\"\r\n  },\r\n  input: {\r\n    padding: \"12px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid #ccc\",\r\n    fontSize: \"16px\",\r\n    outline: \"none\"\r\n  },\r\n  submitBtn: {\r\n    padding: \"12px\",\r\n    backgroundColor: \"#1c7ed6\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    fontSize: \"16px\",\r\n    cursor: \"pointer\"\r\n  },\r\n  toggleBtn: {\r\n    marginTop: \"20px\",\r\n    background: \"none\",\r\n    border: \"none\",\r\n    color: \"#74c0fc\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"14px\",\r\n    textDecoration: \"underline\"\r\n  }\r\n};\r\n\r\nexport default Auth;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  collection,\r\n  addDoc,\r\n  updateDoc,\r\n  doc,\r\n  runTransaction,\r\n  Timestamp,\r\n  getDoc\r\n} from \"firebase/firestore\";\r\nimport { db, auth } from \"../firebase\";\r\n\r\n\r\n\r\n\r\n\r\nconst fixedFieldsInitial = {\r\n  date: \"\",\r\n  months: \"\",\r\n  origin: \"\",\r\n  destination: \"\",\r\n  customer: \"\",\r\n  customerType: \"\",\r\n  vehicleNo: \"\",\r\n  vendor: \"\",\r\n  salesRate: \"\",\r\n  buyRate: \"\"\r\n};\r\n\r\nconst customerFields = {\r\n  toBeAdvance: \"\",\r\n  advanceReceived: \"\",\r\n  advDeviation: \"\",\r\n  advanceRecDate: \"\",\r\n  validatedAdvanceUTRDescription: \"\",\r\n  validatedAdvanceAmount: \"\",\r\n  balance: \"\",\r\n  processingCharges: \"\",\r\n  inwardMisCharges: \"\",\r\n  outwardMisCharges: \"\",\r\n  balanceReceived: \"\",\r\n  remainingBalance: \"\",\r\n  balanceRecDate: \"\",\r\n  validatedBalanceUTR: \"\",\r\n  validatedBalanceUTRAmount: \"\"\r\n};\r\n\r\nconst vendorFields = {\r\n  vendorOutwardPayment: \"\",\r\n  paidAmount: \"\",\r\n  balancePending: \"\",\r\n  vendorRemark: \"\"\r\n};\r\n\r\nconst podFields = {\r\n  podVendorDate: \"\",\r\n  podSendToCustomerDate: \"\",\r\n  docNo: \"\",\r\n  podCustomerRec: \"\",\r\n  today: \"\",\r\n  balanceOverdueDays: \"\",\r\n  toBeCollectedAmount: \"\"\r\n};\r\nconst flattenObject = (obj, prefix = \"\") => {\r\n  let result = {};\r\n  for (const key in obj) {\r\n    const value = obj[key];\r\n    const fullKey = prefix ? `${prefix}.${key}` : key;\r\n    if (value && typeof value === \"object\" && !value.seconds) {\r\n      Object.assign(result, flattenObject(value, fullKey));\r\n    } else {\r\n      result[fullKey] = value;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\nconst ManualEntryForm = ({ onAddRow }) => {\r\n  const [fixedFields, setFixedFields] = useState(fixedFieldsInitial);\r\n  const [customerData, setCustomerData] = useState(customerFields);\r\n  const [vendorData, setVendorData] = useState(vendorFields);\r\n  const [podData, setPodData] = useState(podFields);\r\n  const [indentNumber, setIndentNumber] = useState(null);\r\n  const [docId, setDocId] = useState(null);\r\n\r\n  const [showCustomer, setShowCustomer] = useState(false);\r\n  const [showVendor, setShowVendor] = useState(false);\r\n  const [showPod, setShowPod] = useState(false);\r\n\r\n  const [customerSaved, setCustomerSaved] = useState(false);\r\n  const [vendorSaved, setVendorSaved] = useState(false);\r\n  const [podSaved, setPodSaved] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const storedIndentNo = localStorage.getItem(\"inProgressIndentNumber\");\r\n    const storedFixed = localStorage.getItem(\"fixedFields\");\r\n    const storedCustomer = localStorage.getItem(\"customerFields\");\r\n    const storedVendor = localStorage.getItem(\"vendorFields\");\r\n    const storedPod = localStorage.getItem(\"podFields\");\r\n    const storedDocId = localStorage.getItem(\"docId\");\r\n    \r\n    \r\n    if (storedDocId) setDocId(storedDocId);\r\n    if (storedIndentNo) setIndentNumber(Number(storedIndentNo));\r\n    if (storedFixed) setFixedFields(JSON.parse(storedFixed));\r\n    if (storedCustomer) setCustomerData(JSON.parse(storedCustomer));\r\n    if (storedVendor) setVendorData(JSON.parse(storedVendor));\r\n    if (storedPod) setPodData(JSON.parse(storedPod));\r\n  }, []);\r\n\r\n  const convertDateFields = (data, allowedKeys = []) => {\r\n    const result = {};\r\n    Object.entries(data).forEach(([key, value]) => {\r\n      if (allowedKeys.includes(key) && value) {\r\n        const parsed = new Date(value);\r\n        result[key] = isNaN(parsed) ? value : Timestamp.fromDate(parsed);\r\n      } else {\r\n        result[key] = value;\r\n      }\r\n    });\r\n    return result;\r\n  };\r\n\r\n  const handleFixedChange = (e) => {\r\n  const updated = { ...fixedFields, [e.target.name]: e.target.value };\r\n  setFixedFields(updated);\r\n  localStorage.setItem(\"fixedFields\", JSON.stringify(updated));  // ‚úÖ Save\r\n};\r\n\r\n\r\n  const handleSectionChange = (e, section) => {\r\n  const { name, value } = e.target;\r\n  if (section === \"customer\") {\r\n    const updated = { ...customerData, [name]: value };\r\n    setCustomerData(updated);\r\n    localStorage.setItem(\"customerFields\", JSON.stringify(updated));\r\n  }\r\n  if (section === \"vendor\") {\r\n    const updated = { ...vendorData, [name]: value };\r\n    setVendorData(updated);\r\n    localStorage.setItem(\"vendorFields\", JSON.stringify(updated));\r\n  }\r\n  if (section === \"pod\") {\r\n    const updated = { ...podData, [name]: value };\r\n    setPodData(updated);\r\n    localStorage.setItem(\"podFields\", JSON.stringify(updated));\r\n  }\r\n};\r\n\r\n\r\n  const getNextIndentNumber = async () => {\r\n  const counterRef = doc(db, \"Counters\", \"fleet_counter\");\r\n  const newIndentNo = await runTransaction(db, async (transaction) => {\r\n    const docSnap = await transaction.get(counterRef);\r\n    if (!docSnap.exists()) throw new Error(\"Counter doc missing\");\r\n    const current = docSnap.data().nextFleetNo || 1;\r\n    transaction.update(counterRef, { nextFleetNo: current + 1 });\r\n    return current;\r\n  });\r\n  return newIndentNo;\r\n};\r\n\r\n\r\n  const handleFixedSave = async () => {\r\n    try {\r\n      const user = auth.currentUser;\r\n      const indentNo  = await getNextIndentNumber();\r\n      const enrichedData = {\r\n        indentNumber: indentNo,\r\n        ...convertDateFields(fixedFields, [\"date\"]),\r\n        createdAt: new Date(),\r\n        createdBy: user?.email || \"anonymous\",\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n        updateDescription: \"\"\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, \"fleet_records\"), enrichedData);\r\n      setIndentNumber(indentNo);\r\n      setDocId(docRef.id);\r\n      localStorage.setItem(\"docId\", docRef.id);\r\n      localStorage.setItem(\"inProgressIndentNumber\", indentNo);\r\n      await navigator.clipboard.writeText(String(indentNo));\r\n      alert(`‚úÖ Fixed fields saved. Indent Number copied: ${indentNo}`);\r\n    } catch (err) {\r\n      alert(\"‚ùå Error saving fixed fields: \" + err.message);\r\n    }\r\n  };\r\n\r\n  const saveSection = async (sectionName, sectionData, dateFields = []) => {\r\n    if (!docId) {\r\n      alert(\"‚ö†Ô∏è Save fixed fields first.\");\r\n      return;\r\n    }\r\n    try {\r\n      const docRef = doc(db, \"fleet_records\", docId);\r\n      await updateDoc(docRef, {\r\n        [`${sectionName}`]: convertDateFields(sectionData, dateFields)\r\n      });\r\n      if (sectionName === \"customerMaster\") setCustomerSaved(true);\r\n      if (sectionName === \"vendorMaster\") setVendorSaved(true);\r\n      if (sectionName === \"podMaster\") setPodSaved(true);\r\n      alert(`‚úÖ ${sectionName} saved.`);\r\n    } catch (err) {\r\n      alert(\"‚ùå Save error: \" + err.message);\r\n    }\r\n  };\r\n\r\n const handleFinalSubmit = async () => {\r\n  if (!docId) return alert(\"Fleet data not ready.\");\r\n\r\n  // Save any unsaved sections first\r\n  if (showCustomer && !customerSaved) {\r\n    await saveSection(\"customerMaster\", customerData, [\"advanceRecDate\", \"balanceRecDate\"]);\r\n  }\r\n  if (showVendor && !vendorSaved) {\r\n    await saveSection(\"vendorMaster\", vendorData);\r\n  }\r\n  if (showPod && !podSaved) {\r\n    await saveSection(\"podMaster\", podData, [\"podVendorDate\", \"podSendToCustomerDate\", \"podCustomerRec\", \"today\"]);\r\n  }\r\n\r\n  const docSnap = await getDoc(doc(db, \"fleet_records\", docId));\r\n  if (!docSnap.exists()) return alert(\"Data not found.\");\r\n  const data = { id: docSnap.id, ...docSnap.data() };\r\n  onAddRow(flattenObject(data), true);\r\n\r\n\r\n  // Reset all state\r\n  setFixedFields(fixedFieldsInitial);\r\n  setCustomerData(customerFields);\r\n  setVendorData(vendorFields);\r\n  setPodData(podFields);\r\n  setIndentNumber(null);\r\n  setDocId(null);\r\n  setShowCustomer(false);\r\n  setShowVendor(false);\r\n  setShowPod(false);\r\n  setCustomerSaved(false);\r\n  setVendorSaved(false);\r\n  setPodSaved(false);\r\n\r\n  localStorage.removeItem(\"fixedFields\");\r\n  localStorage.removeItem(\"customerFields\");\r\n  localStorage.removeItem(\"vendorFields\");\r\n  localStorage.removeItem(\"podFields\");\r\n  localStorage.removeItem(\"inProgressIndentNumber\");\r\n  localStorage.removeItem(\"docId\");\r\n\r\n\r\n\r\n  alert(\"‚úÖ Record submitted and ready in editable table.\");\r\n};\r\n\r\nconst handleNewRecord = () => {\r\n  if (!window.confirm(\"Start a new entry? Unsaved data will be lost.\")) return;\r\n\r\n  setFixedFields(fixedFieldsInitial);\r\n  setCustomerData(customerFields);\r\n  setVendorData(vendorFields);\r\n  setPodData(podFields);\r\n  setIndentNumber(null);\r\n  setDocId(null);\r\n  setShowCustomer(false);\r\n  setShowVendor(false);\r\n  setShowPod(false);\r\n  setCustomerSaved(false);\r\n  setVendorSaved(false);\r\n  setPodSaved(false);\r\n\r\n  localStorage.removeItem(\"fixedFields\");\r\n  localStorage.removeItem(\"customerFields\");\r\n  localStorage.removeItem(\"vendorFields\");\r\n  localStorage.removeItem(\"podFields\");\r\n  localStorage.removeItem(\"inProgressIndentNumber\");\r\n  localStorage.removeItem(\"docId\");\r\n\r\n  alert(\"üÜï Ready to start a new record.\");\r\n};\r\n\r\n\r\n\r\n  return (\r\n    <div style={{ marginTop: 20 }}>\r\n      <h4>Step 1: Fixed Fields</h4>\r\n      {Object.keys(fixedFieldsInitial).map((key) => {\r\n        const isDate = key.toLowerCase().includes(\"date\");\r\n        const label = isDate ? `${key} (dd/mm/yyyy)` : key === \"months\" ? \"months (e.g. Jul-2025)\" : key;\r\n        return (\r\n          <input\r\n            key={key}\r\n            name={key}\r\n            placeholder={label}\r\n            value={fixedFields[key]}\r\n            onChange={handleFixedChange}\r\n            disabled={!!indentNumber}\r\n            style={{ margin: 4, width: \"220px\" }}\r\n          />\r\n        );\r\n      })}\r\n      {!indentNumber && (\r\n        <button onClick={handleFixedSave}>üíæ Save & Continue</button>\r\n      )}\r\n      {indentNumber  && (\r\n        <>\r\n          <p style={{ color: \"green\" }}>‚úÖ Saved. Indent No: {indentNumber}</p>\r\n\r\n          <h4>Step 2: Select Master Sections</h4>\r\n          <label>\r\n            <input type=\"checkbox\" checked={showCustomer} onChange={() => setShowCustomer(!showCustomer)} disabled={customerSaved} /> Customer Master\r\n          </label>\r\n          <label style={{ marginLeft: 15 }}>\r\n            <input type=\"checkbox\" checked={showVendor} onChange={() => setShowVendor(!showVendor)} disabled={vendorSaved} /> Vendor Master\r\n          </label>\r\n          <label style={{ marginLeft: 15 }}>\r\n            <input type=\"checkbox\" checked={showPod} onChange={() => setShowPod(!showPod)} disabled={podSaved} /> POD Master\r\n          </label>\r\n\r\n          {showCustomer && (\r\n            <>\r\n              <h5>Customer Master</h5>\r\n              {Object.keys(customerFields).map((key) => {\r\n                const isDate = [\"advanceRecDate\", \"balanceRecDate\"].includes(key);\r\n                const label = isDate ? `${key} (dd/mm/yyyy)` : key;\r\n                return (\r\n                  <input\r\n                    key={key}\r\n                    name={key}\r\n                    placeholder={label}\r\n                    value={customerData[key]}\r\n                    onChange={(e) => handleSectionChange(e, \"customer\")}\r\n                    style={{ margin: 4, width: \"220px\" }}\r\n                    disabled={customerSaved}\r\n                  />\r\n                );\r\n              })}\r\n              {!customerSaved && (\r\n                <button onClick={() => saveSection(\"customerMaster\", customerData, [\"advanceRecDate\", \"balanceRecDate\"])}>Save Customer</button>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {showVendor && (\r\n            <>\r\n              <h5>Vendor Master</h5>\r\n              {Object.keys(vendorFields).map((key) => (\r\n                <input\r\n                  key={key}\r\n                  name={key}\r\n                  placeholder={key}\r\n                  value={vendorData[key]}\r\n                  onChange={(e) => handleSectionChange(e, \"vendor\")}\r\n                  style={{ margin: 4, width: \"220px\" }}\r\n                  disabled={vendorSaved}\r\n                />\r\n              ))}\r\n              {!vendorSaved && (\r\n                <button onClick={() => saveSection(\"vendorMaster\", vendorData)}>Save Vendor</button>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {showPod && (\r\n            <>\r\n              <h5>POD Master</h5>\r\n              {Object.keys(podFields).map((key) => {\r\n                const isDate = [\"podVendorDate\", \"podSendToCustomerDate\", \"podCustomerRec\", \"today\"].includes(key);\r\n                const label = isDate ? `${key} (dd/mm/yyyy)` : key;\r\n                return (\r\n                  <input\r\n                    key={key}\r\n                    name={key}\r\n                    placeholder={label}\r\n                    value={podData[key]}\r\n                    onChange={(e) => handleSectionChange(e, \"pod\")}\r\n                    style={{ margin: 4, width: \"220px\" }}\r\n                    disabled={podSaved}\r\n                  />\r\n                );\r\n              })}\r\n              {!podSaved && (\r\n                <button onClick={() => saveSection(\"podMaster\", podData, [\"podVendorDate\", \"podSendToCustomerDate\", \"podCustomerRec\", \"today\"])}>Save POD</button>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          <br />\r\n          <div style={{ marginTop: 10 }}>\r\n  <button onClick={handleFinalSubmit} style={{ backgroundColor: \"#4caf50\", marginRight: 10 }}>\r\n    ‚úÖ Submit Record\r\n  </button>\r\n\r\n  <button onClick={handleNewRecord} style={{ backgroundColor: \"#2196f3\" }}>\r\n    ‚ûï Add New Record\r\n  </button>\r\n</div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManualEntryForm;\r\n","import React, { useState } from \"react\";\r\nimport { addDoc, collection, doc, runTransaction } from \"firebase/firestore\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { db, auth } from \"../firebase\";\r\n\r\nconst labelToKey = {\r\n  \"Indent No\": \"IndentNo\", \"Indent Date\": \"IndentDate\", \"Placement Date\": \"PlacementDate\",\r\n  \"Customer\": \"Customer\", \"Customer Type\": \"CustomerType\", \"Customer Billing Type\": \"CustomerBillingType\",\r\n  \"Sourcing (Vendor)\": \"SourcingVendor\", \"Vendor Type\": \"VendorType\", \"Vendor Billing Type\": \"VendorBillingType\",\r\n  \"Origin\": \"Origin\", \"Destination\": \"Destination\", \"Vehicle No\": \"VehicleNo\", \"Vehicle type\": \"VehicleType\",\r\n  \"Driver No\": \"DriverNo\", \"Dispatch Date\": \"DispatchDate\", \"Deliver Date\": \"DeliverDate\",\r\n  \"Offloading Date\": \"OffloadingDate\", \"E-way Bill\": \"EwayBill\", \"LR No.\": \"LRNo\",\r\n  \"Soft Copy POD Rec\": \"SoftCopyPODRec\", \"Hard Copy POD Rec\": \"HardCopyPODRec\",\r\n  \"Customer -Sale rate\": \"CustomerSaleRate\", \"Advance to be Paid\": \"AdvanceToBePaid\",\r\n  \"Advance Rec\": \"AdvanceRec\", \"Advance UTR\": \"AdvanceUTR\", \"Advance Rec-Date\": \"AdvanceRecDate\",\r\n  \"Balance Pending\": \"BalancePending\", \"Detention Charges\": \"DetentionCharges\",\r\n  \"Loading/Unloading Charges\": \"LoadingUnloadingCharges\", \"Miscellaneous Charges.\": \"MiscCharges\",\r\n  \"Processing Charges\": \"ProcessingCharges\", \"Net Balance\": \"NetBalance\",\r\n  \"Balance Rec Amount\": \"BalanceRecAmount\", \"Balance UTR\": \"BalanceUTR\", \"Balance Rec Date\": \"BalanceRecDate\",\r\n  \"Remaining Balance\": \"RemainingBalance\", \"Remaining Balance UTR\": \"RemainingBalanceUTR\",\r\n  \"Remaining Balance Date\": \"RemainingBalanceDate\", \"Supplier Buy Rate\": \"SupplierBuyRate\",\r\n  \"Supplier Advance Pay\": \"SupplierAdvancePay\", \"Supplier Advance Paid\": \"SupplierAdvancePaid\",\r\n  \"Supplier Mis Charges\": \"SupplierMisCharges\", \"Supplier Invoice No.\": \"SupplierInvoiceNo\",\r\n  \"Supplier Advance UTR\": \"SupplierAdvanceUTR\", \"Supplier Advance Pay-Date\": \"SupplierAdvancePayDate\",\r\n  \"Supplier Balance Pending\": \"SupplierBalancePending\", \"Supplier Balance Paid Amount\": \"SupplierBalancePaidAmount\",\r\n  \"Supplier Balance Paid UTR\": \"SupplierBalancePaidUTR\", \"Supplier Balance Paid Date\": \"SupplierBalancePaidDate\",\r\n  \"Remaining Supplier Amount\": \"RemainingSupplierAmount\", \"POD Rec Date\": \"PODRecDate\",\r\n  \"POD Send to Customer Date\": \"PODSendToCustomerDate\", \"POD Docket No.\": \"PODDocketNo\",\r\n  \"POD Rec By Customer\": \"PODRecByCustomer\", \"POD Deduction If any\": \"PODDeductionIfAny\",\r\n  \"Gross Profit\": \"GrossProfit\", \"Bad Debts\": \"BadDebts\", \"Net Profit\": \"NetProfit\"\r\n};\r\n\r\nconst dateFields = [\r\n  \"Indent Date\", \"Placement Date\", \"Dispatch Date\", \"Deliver Date\", \"Offloading Date\",\r\n  \"Soft Copy POD Rec\", \"Hard Copy POD Rec\", \"Advance Rec-Date\", \"Balance Rec Date\",\r\n  \"Remaining Balance Date\", \"Supplier Advance Pay-Date\", \"Supplier Balance Paid Date\",\r\n  \"POD Rec Date\", \"POD Send to Customer Date\", \"POD Rec By Customer\"\r\n];\r\n\r\nconst UploadForm = () => {\r\n  const [previewData, setPreviewData] = useState([]);\r\n  const [statusMap, setStatusMap] = useState({});\r\n  const [fleetNumbers, setFleetNumbers] = useState({});\r\n\r\n  const normalize = (label) => (label || \"\").replace(/[.\\s]+/g, \" \").trim().toLowerCase();\r\n\r\n  const getMappedKey = (label) => {\r\n    const normalizedLabel = normalize(label);\r\n    return Object.entries(labelToKey).find(\r\n      ([rawLabel]) => normalize(rawLabel) === normalizedLabel\r\n    )?.[1];\r\n  };\r\n\r\n  const parseExcel = (file) => {\r\n    if (!file) {\r\n      alert(\"No file selected\");\r\n      return;\r\n    }\r\n\r\n    alert(\"File selected: \" + file.name);\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      alert(\"File read started\");\r\n\r\n      const workbook = XLSX.read(e.target.result, { type: \"binary\" });\r\n      const sheetName = workbook.SheetNames[0];\r\n      alert(\"Reading sheet: \" + sheetName);\r\n      const sheet = workbook.Sheets[sheetName];\r\n\r\n      const raw = XLSX.utils.sheet_to_json(sheet, { header: 1, defval: \"\", blankrows: false });\r\n      if (raw.length < 3) {\r\n        alert(\"Not enough rows to parse.\");\r\n        return;\r\n      }\r\n\r\n      raw.splice(0, 1); // Remove useless top row\r\n      const headers = raw[0];\r\n      const rows = raw.slice(1).map((row, rowIndex) => {\r\n        const obj = {};\r\n        headers.forEach((h, j) => {\r\n          const key = getMappedKey(h);\r\n          if (!key) return;\r\n\r\n          const value = row[j];\r\n          const isDate = dateFields.some(df => normalize(df) === normalize(h));\r\n\r\n          if (typeof value === \"number\" && isDate) {\r\n            const d = XLSX.SSF.parse_date_code(value);\r\n            if (d) {\r\n              obj[key] = `${String(d.d).padStart(2, '0')}-${String(d.m).padStart(2, '0')}-${d.y}`;\r\n            }\r\n          } else {\r\n            obj[key] = String(value ?? \"\").trim();\r\n          }\r\n        });\r\n        return obj;\r\n      });\r\n\r\n      alert(\"Parsed rows: \" + rows.length);\r\n      setPreviewData(rows);\r\n      setStatusMap({});\r\n      setFleetNumbers({});\r\n    };\r\n\r\n    reader.onerror = (err) => {\r\n      alert(\"Failed to read file: \" + err);\r\n      console.error(\"FileReader error:\", err);\r\n    };\r\n\r\n    reader.readAsBinaryString(file);\r\n  };\r\n\r\n  const getNextFleetNumber = async () => {\r\n    const counterRef = doc(db, \"Counters\", \"fleet_counter\");\r\n    const newFleetNo = await runTransaction(db, async (transaction) => {\r\n      const docSnap = await transaction.get(counterRef);\r\n      if (!docSnap.exists()) throw new Error(\"Counter doc missing\");\r\n      const current = docSnap.data().nextFleetNo || 1;\r\n      transaction.update(counterRef, { nextFleetNo: current + 1 });\r\n      return current;\r\n    });\r\n    return newFleetNo;\r\n  };\r\n\r\n  const saveRow = async (row, i) => {\r\n    const user = auth.currentUser;\r\n    try {\r\n      const newFleetNo = await getNextFleetNumber();\r\n      const enriched = {\r\n        ...row,\r\n        fleetNumber: newFleetNo,\r\n        createdAt: new Date(),\r\n        createdBy: user?.email || \"anonymous\",\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n      };\r\n      await addDoc(collection(db, \"fleet_records\"), enriched);\r\n      setStatusMap(prev => ({ ...prev, [i]: \"‚úÖ Saved\" }));\r\n      setFleetNumbers(prev => ({ ...prev, [i]: newFleetNo }));\r\n    } catch (err) {\r\n      setStatusMap(prev => ({ ...prev, [i]: \"‚ùå Failed\" }));\r\n    }\r\n  };\r\n\r\n  const saveAll = async () => {\r\n    for (let i = 0; i < previewData.length; i++) {\r\n      if (!statusMap[i]) await saveRow(previewData[i], i);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (i, key, value) => {\r\n    const updated = [...previewData];\r\n    updated[i][key] = value;\r\n    setPreviewData(updated);\r\n  };\r\n\r\n  const deleteRow = (i) => {\r\n    setPreviewData(previewData.filter((_, idx) => idx !== i));\r\n    const s = { ...statusMap }; delete s[i];\r\n    const f = { ...fleetNumbers }; delete f[i];\r\n    setStatusMap(s);\r\n    setFleetNumbers(f);\r\n  };\r\n\r\n  const resetTable = () => {\r\n    setPreviewData([]);\r\n    setStatusMap({});\r\n    setFleetNumbers({});\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginBottom: 40 }}>\r\n      <h4>Upload Excel & Preview</h4>\r\n      <input\r\n        type=\"file\"\r\n        accept=\".xlsx, .xls\"\r\n        onChange={(e) => {\r\n          const file = e.target.files?.[0];\r\n          if (file) {\r\n            parseExcel(file);\r\n            setTimeout(() => {\r\n              e.target.value = \"\";\r\n            }, 100);\r\n          } else {\r\n            alert(\"No file selected.\");\r\n          }\r\n        }}\r\n      />\r\n      {previewData.length > 0 && (\r\n        <>\r\n          <h5 style={{ marginTop: 20 }}>üìÑ Preview Table (Excel Upload)</h5>\r\n          <button onClick={saveAll}>üíæ Save All</button>\r\n          <button onClick={resetTable} style={{ marginLeft: 10, color: \"red\" }}>üßπ Clear</button>\r\n          <div className=\"table-scroll-x\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Fleet Number</th>\r\n                  {Object.keys(previewData[0]).map(key => <th key={key}>{key}</th>)}\r\n                  <th>Status</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {previewData.map((row, i) => (\r\n                  <tr key={i}>\r\n                    <td>{fleetNumbers[i] || \"\"}</td>\r\n                    {Object.keys(row).map((key) => (\r\n                      <td key={key}>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={row[key]}\r\n                          onChange={(e) => handleEdit(i, key, e.target.value)}\r\n                          style={{ width: \"120px\" }}\r\n                        />\r\n                      </td>\r\n                    ))}\r\n                    <td>{statusMap[i] || \"‚è≥ Pending\"}</td>\r\n                    <td>\r\n                      <button onClick={() => saveRow(row, i)} disabled={statusMap[i] === \"‚úÖ Saved\"}>Save</button>\r\n                      <button onClick={() => deleteRow(i)} style={{ marginLeft: 6, color: \"red\" }}>Delete</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadForm;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  getDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  addDoc,\r\n} from \"firebase/firestore\";\r\nimport { auth, db } from \"./firebase\";\r\nimport Auth from \"./components/Auth\";\r\nimport ManualEntryForm from \"./components/ManualEntryForm\";\r\nimport UploadForm from \"./components/UploadForm\";\r\nimport \"./App.css\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst finalColumnOrder = [\r\n  \"indentNumber\", \"date\", \"months\", \"origin\", \"destination\", \"customer\", \"customerType\",\r\n  \"vehicleNo\", \"vendor\", \"salesRate\", \"buyRate\", \"createdAt\", \"createdBy\", \"versionDate\",\r\n  \"isCurrent\", \"updateDescription\", \"expiredAt\",\r\n  // Customer Master\r\n  \"customerMaster.toBeAdvance\", \"customerMaster.advanceReceived\", \"customerMaster.advDeviation\",\r\n  \"customerMaster.advanceRecDate\", \"customerMaster.validatedAdvanceUTRDescription\",\r\n  \"customerMaster.validatedAdvanceAmount\", \"customerMaster.balance\", \"customerMaster.processingCharges\",\r\n  \"customerMaster.inwardMisCharges\", \"customerMaster.outwardMisCharges\", \"customerMaster.balanceReceived\",\r\n  \"customerMaster.remainingBalance\", \"customerMaster.balanceRecDate\", \"customerMaster.validatedBalanceUTR\",\r\n  \"customerMaster.validatedBalanceUTRAmount\",\r\n  // Vendor Master\r\n  \"vendorMaster.vendorOutwardPayment\", \"vendorMaster.paidAmount\", \"vendorMaster.balancePending\",\r\n  \"vendorMaster.vendorRemark\",\r\n  // POD Master\r\n  \"podMaster.podVendorDate\", \"podMaster.podSendToCustomerDate\", \"podMaster.docNo\",\r\n  \"podMaster.podCustomerRec\", \"podMaster.today\", \"podMaster.balanceOverdueDays\",\r\n  \"podMaster.toBeCollectedAmount\"\r\n];\r\n\r\n\r\nconst flattenObject = (obj, prefix = \"\") => {\r\n  let result = {};\r\n  for (const key in obj) {\r\n    const value = obj[key];\r\n    const fullKey = prefix ? `${prefix}.${key}` : key;\r\n    if (value && typeof value === \"object\" && !value.seconds) {\r\n      Object.assign(result, flattenObject(value, fullKey));\r\n    } else {\r\n      result[fullKey] = value;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState(null);\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n  const [records, setRecords] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [searchKey, setSearchKey] = useState(\"\");\r\n  const [searchField, setSearchField] = useState(\"indentNumber\");\r\n  const [startDate, setStartDate] = useState(\"\");\r\n  const [endDate, setEndDate] = useState(\"\");\r\n  const [originalRecords, setOriginalRecords] = useState({});\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [isExporting, setIsExporting] = useState(false);\r\n  const [searchAttempted, setSearchAttempted] = useState(false);\r\n  const [activeOnly, setActiveOnly] = useState(false);\r\n  const [includeCustomer, setIncludeCustomer] = useState(false);\r\n  const [includeVendor, setIncludeVendor] = useState(false);\r\n  const [includePOD, setIncludePOD] = useState(false);\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n      setAuthLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleExportToExcel = () => {\r\n  if (history.length === 0) {\r\n    toast.info(\"‚ùå No history data to export.\");\r\n    return;\r\n  }\r\n\r\n  // Define columns to include\r\n  const fixedCols = finalColumnOrder.slice(0, 17); // First 17 are fixed\r\n  const customerCols = finalColumnOrder.slice(17, 32);\r\n  const vendorCols = finalColumnOrder.slice(32, 36);\r\n  const podCols = finalColumnOrder.slice(36);\r\n\r\n  const selectedCols = [\r\n    ...fixedCols,\r\n    ...(includeCustomer ? customerCols : []),\r\n    ...(includeVendor ? vendorCols : []),\r\n    ...(includePOD ? podCols : [])\r\n  ];\r\n\r\n  const exportData = history.map((row) => {\r\n    const flatRow = {};\r\n    selectedCols.forEach((col) => {\r\n      const val = row[col];\r\n      flatRow[col] = val?.seconds\r\n        ? new Date(val.seconds * 1000).toLocaleString()\r\n        : val ?? \"\";\r\n    });\r\n    return flatRow;\r\n  });\r\n\r\n  const worksheet = XLSX.utils.json_to_sheet(exportData);\r\n  const workbook = XLSX.utils.book_new();\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Filtered Export\");\r\n\r\n  const fileName = `FilteredExport_${new Date().toISOString().split(\"T\")[0]}.xlsx`;\r\n  XLSX.writeFile(workbook, fileName);\r\n};\r\n\r\n\r\n  const handleSearch = async () => {\r\n    setIsSearching(true);\r\n    try {\r\n      const fleetRef = collection(db, \"fleet_records\");\r\n      let q;\r\n\r\n          if (searchField === \"Date\") {\r\n  const fromDate = new Date(startDate);\r\n  const toDate = new Date(endDate + \"T23:59:59\");\r\n\r\n  if (fromDate > toDate) {\r\n    toast.warn(\"‚ö†Ô∏è 'From' date cannot be after 'To' date.\");\r\n    setIsSearching(false);\r\n    return;\r\n  }\r\n\r\n  q = query(\r\n    fleetRef,\r\n    ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : []),\r\n    where(\"createdAt\", \">=\", fromDate),\r\n    where(\"createdAt\", \"<=\", toDate)\r\n  );\r\n}\r\n else if (searchKey) {\r\n  const key = searchField === \"indentNumber\" ? Number(searchKey) : searchKey;\r\n  q = query(\r\n    fleetRef,\r\n    where(searchField, \"==\", key),\r\n    ...(activeOnly ? [where(\"isCurrent\", \"==\", true)] : [])\r\n  );\r\n}\r\n\r\n else {\r\n        toast.warn(\"üîç Please enter a search value.\");\r\n        setIsSearching(false);\r\n        return;\r\n      }\r\n\r\n      setSearchAttempted(true);\r\n      const snapshot = await getDocs(q);\r\n      const allVersions = [];\r\n      const currentOnly = [];\r\n\r\n      snapshot.forEach((docSnap) => {\r\n        const rawData = { id: docSnap.id, ...docSnap.data() };\r\n        const row = flattenObject(rawData);\r\n\r\n        allVersions.push(row);\r\n        if (row.isCurrent) currentOnly.push(row);\r\n      });\r\n      allVersions.sort((a, b) => {\r\n  if (a.isCurrent && !b.isCurrent) return -1;\r\n  if (!a.isCurrent && b.isCurrent) return 1;\r\n  return b.indentNumber - a.indentNumber;\r\n});\r\n\r\n// ‚úÖ Sort currentOnly also by indentNumber descending\r\ncurrentOnly.sort((a, b) => b.indentNumber - a.indentNumber);\r\n\r\n      if (searchField === \"indentNumber\") {\r\n        setRecords(currentOnly);\r\n        setHistory(allVersions);\r\n      } else {\r\n        setRecords([]);\r\n        setHistory(allVersions);\r\n      }\r\n\r\n      if (snapshot.empty || allVersions.length === 0) {\r\n        toast.info(\"‚ùå No records found.\");\r\n      }\r\n    } catch (error) {\r\n  console.error(\"üî• Full Firestore Error:\", error); // ‚úÖ This will print full error in browser console\r\n  toast.error(\"‚ùå Search failed: \" + error.message);\r\n\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n    const normalize = (val) => {\r\n    if (val === null || val === undefined) return \"\";\r\n    return typeof val === \"object\" && val.seconds\r\n      ? new Date(val.seconds * 1000).toISOString()\r\n      : String(val).trim();\r\n  };\r\n\r\n const getChangedFields = (current, original) => {\r\n  const ignored = [\"versionDate\", \"expiredAt\", \"isCurrent\", \"updateDescription\", \"createdAt\", \"createdBy\"];\r\n  const changed = [];\r\n\r\n  const flatCurrent = flattenObject(current);\r\n  const flatOriginal = flattenObject(original);\r\n\r\n  for (const key in flatCurrent) {\r\n    if (ignored.includes(key)) continue;\r\n    const currVal = normalize(flatCurrent[key]);\r\n    const origVal = normalize(flatOriginal?.[key]);\r\n    if (currVal !== origVal) changed.push(key);\r\n  }\r\n\r\n  return changed;\r\n};\r\n\r\n\r\n  const hasMeaningfulChanges = (curr, orig) => getChangedFields(curr, orig).length > 0;\r\n\r\n\r\n    const handleUpdate = async (row) => {\r\n    try {\r\n      const { id, indentNumber, ...updatedData } = row;\r\n\r\n      const currentDocSnap = await getDocs(\r\n        query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", indentNumber), where(\"isCurrent\", \"==\", true))\r\n      );\r\n      const oldDoc = currentDocSnap.docs.find(doc => doc.id === id);\r\n      const oldData = flattenObject(oldDoc?.data() || {});\r\n\r\n\r\n      const cleanData = {};\r\n      const updateLog = [];\r\n      for (const key in updatedData) {\r\n        if ([\"id\", \"isCurrent\", \"createdAt\", \"createdBy\", \"versionDate\", \"updateDescription\", \"expiredAt\"].includes(key))\r\n          continue;\r\n        const newVal = updatedData[key] ?? \"\";\r\n        const oldVal = oldData[key] ?? \"\";\r\n        cleanData[key] = newVal;\r\n\r\n        if (String(newVal).trim() !== String(oldVal).trim()) {\r\n          updateLog.push(`Updated ${key}`);\r\n        }\r\n      }\r\n\r\n      if (updateLog.length === 0) {\r\n        toast.info(\"‚ÑπÔ∏è No changes to update.\");\r\n        return;\r\n      }\r\n\r\n      const confirm = window.confirm(`Update changes: ${updateLog.join(\", \")}?`);\r\n      if (!confirm) return;\r\n\r\n      await updateDoc(doc(db, \"fleet_records\", id), {\r\n        isCurrent: false,\r\n        expiredAt: new Date(),\r\n        modifiedBy: user.email\r\n      });\r\n\r\n      const newVersion = {\r\n        ...cleanData,\r\n        indentNumber,\r\n        createdAt: new Date(),\r\n        createdBy: user.email,\r\n        isCurrent: true,\r\n        versionDate: new Date(),\r\n        updateDescription: updateLog.join(\", \")\r\n      };\r\n\r\n      await addDoc(collection(db, \"fleet_records\"), newVersion);\r\n\r\n      toast.success(\"‚úÖ Record updated.\");\r\n      handleSearch();\r\n    } catch (error) {\r\n      toast.error(\"‚ùå Update failed: \" + error.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fleetNumberToDelete) => {\r\n    try {\r\n      const q = query(collection(db, \"fleet_records\"), where(\"indentNumber\", \"==\", fleetNumberToDelete));\r\n      const snapshot = await getDocs(q);\r\n      if (snapshot.empty) return alert(\"‚ùå No records found.\");\r\n\r\n      const confirmDelete = window.confirm(`Delete all versions of Indent No. ${fleetNumberToDelete}?`);\r\n      if (!confirmDelete) return;\r\n\r\n      await Promise.all(snapshot.docs.map(docSnap => deleteDoc(doc(db, \"fleet_records\", docSnap.id))));\r\n      setRecords(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n      setHistory(prev => prev.filter(r => r.indentNumber !== fleetNumberToDelete));\r\n      toast.success(\"‚úÖ Deleted all versions.\");\r\n    } catch (err) {\r\n      toast.error(\"‚ùå Delete failed: \" + err.message);\r\n    }\r\n  };\r\n  if (authLoading) return <p style={{ textAlign: \"center\" }}>Checking authentication...</p>;\r\nif (!user) return <Auth />;\r\n\r\n\r\n  return (\r\n    <div style={{ maxWidth: \"100vw\", overflowX: \"hidden\", padding: \"40px 20px\" }}>\r\n      <div className=\"header\">\r\n        <h2>Fleet Billing Dashboard</h2>\r\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <span className=\"user-email\">Welcome, {user.email}</span>\r\n          <img src=\"/logo.png\" alt=\"Logo\" style={{ height: \"50px\" }} />\r\n        </div>\r\n      </div>\r\n\r\n      <button\r\n  onClick={() => {\r\n    // ‚úÖ Clear localStorage before logout\r\n    localStorage.removeItem(\"inProgressFleetNumber\");\r\n    localStorage.removeItem(\"docId\");\r\n    localStorage.removeItem(\"fixedFields\");\r\n    localStorage.removeItem(\"customerFields\");\r\n    localStorage.removeItem(\"vendorFields\");\r\n    localStorage.removeItem(\"podFields\");\r\n\r\n    signOut(auth);\r\n  }}\r\n>\r\n  Logout\r\n</button>\r\n\r\n      <hr />\r\n\r\n      {/* <UploadForm /> */}\r\n\r\n      <ManualEntryForm\r\n        onAddRow={(row, addToHistory) => {\r\n          setRecords([row]);\r\n          if (addToHistory) setHistory([row]);\r\n        }}\r\n      />\r\n\r\n      <hr />\r\n      <h4>Search Existing Records</h4>\r\n<div className=\"search-bar\" style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\", flexWrap: \"wrap\" }}>\r\n  <select value={searchField} onChange={(e) => {\r\n    setSearchField(e.target.value);\r\n    setSearchKey(\"\");\r\n    setStartDate(\"\");\r\n    setEndDate(\"\");\r\n  }}>\r\n    <option value=\"indentNumber\">Fleet Number</option>\r\n    <option value=\"Broker\">Broker</option>\r\n    <option value=\"Date\">Date</option>\r\n  </select>\r\n\r\n  {searchField === \"Date\" ? (\r\n    <>\r\n      <label>From:</label>\r\n      <input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} />\r\n      <label>To:</label>\r\n      <input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} />\r\n    </>\r\n  ) : (\r\n    <input\r\n      type=\"text\"\r\n      value={searchKey}\r\n      onChange={(e) => setSearchKey(e.target.value)}\r\n      placeholder=\"Search key\"\r\n      style={{ width: \"200px\" }}\r\n    />\r\n  )}\r\n\r\n  {/* ‚úÖ Add checkbox here */}\r\n  <label style={{ display: \"flex\", alignItems: \"center\", fontSize: \"14px\" }}>\r\n    <input\r\n      type=\"checkbox\"\r\n      checked={activeOnly}\r\n      onChange={(e) => setActiveOnly(e.target.checked)}\r\n      style={{ marginRight: \"5px\" }}\r\n    />\r\n    Show only active\r\n  </label>\r\n\r\n  <button onClick={handleSearch} disabled={isSearching}>\r\n    {isSearching ? \"Searching...\" : \"Search\"}\r\n  </button>\r\n</div>\r\n\r\n\r\n      <hr />\r\n\r\n      {searchField === \"indentNumber\" && records.length > 0 && (\r\n        <>\r\n          <h4>Editable Current Records</h4>\r\n          <div className=\"table-scroll-x\">\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  {finalColumnOrder.map((col) => (\r\n                    <th key={col}>{col.replaceAll(\".\", \" ‚Üí \")}</th>\r\n                  ))}\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {records.map((row, rowIndex) => (\r\n                  <tr key={rowIndex}>\r\n                    {finalColumnOrder.map((col, j) => (\r\n                      <td key={j}>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={\r\n                            typeof row[col] === \"object\" && row[col]?.seconds\r\n                              ? (col === \"date\"\r\n            ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\")\r\n            : new Date(row[col].seconds * 1000).toLocaleString()\r\n          )\r\n        : String(row[col] ?? \"\")\r\n    }\r\n                          onChange={(e) => {\r\n                            const updated = [...records];\r\n                            updated[rowIndex][col] = e.target.value;\r\n                            setRecords(updated);\r\n                          }}\r\n                          readOnly={[\"indentNumber\", \"createdAt\", \"createdBy\", \"isCurrent\", \"updateDescription\"].includes(col)}\r\n                          style={{ width: \"140px\" }}\r\n                        />\r\n                      </td>\r\n                    ))}\r\n                    <td>\r\n                      <button className=\"save\" onClick={() => handleUpdate(row)}>\r\n                        Save\r\n                      </button>\r\n                      <button className=\"delete\" onClick={() => handleDelete(row.indentNumber)}>\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n\r\n            </table>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {history.length > 0 && (\r\n        <>\r\n          <hr />\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n  <h4>üîç Full Version History</h4>\r\n  <div style={{ display: \"flex\", gap: \"20px\", alignItems: \"center\" }}>\r\n  <label>\r\n    <input type=\"checkbox\" checked={includeCustomer} onChange={(e) => setIncludeCustomer(e.target.checked)} />\r\n    Include Customer\r\n  </label>\r\n  <label>\r\n    <input type=\"checkbox\" checked={includeVendor} onChange={(e) => setIncludeVendor(e.target.checked)} />\r\n    Include Vendor\r\n  </label>\r\n  <label>\r\n    <input type=\"checkbox\" checked={includePOD} onChange={(e) => setIncludePOD(e.target.checked)} />\r\n    Include POD\r\n  </label>\r\n  <button onClick={handleExportToExcel} disabled={history.length === 0} className=\"export-button\">\r\n    ‚¨áÔ∏è Export Selected\r\n  </button>\r\n</div>\r\n\r\n</div>\r\n        <div className=\"table-scroll-x\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                {finalColumnOrder.map((col) => (\r\n                  <th key={col}>{col.replaceAll(\".\", \" ‚Üí \")}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {[...history]\r\n                .sort((a, b) => {\r\n                  if (a.isCurrent) return -1;\r\n                  if (b.isCurrent) return 1;\r\n                  const aTime = a.expiredAt?.seconds || 0;\r\n                  const bTime = b.expiredAt?.seconds || 0;\r\n                  return bTime - aTime;\r\n                })\r\n                .map((row, i) => (\r\n                  <tr key={i}>\r\n                    {finalColumnOrder.map((col, j) => (\r\n                      <td key={j}>\r\n                        {typeof row[col] === \"object\" && row[col]?.seconds\r\n              ? (col === \"date\"\r\n                  ? new Date(row[col].seconds * 1000).toLocaleDateString(\"en-GB\")\r\n                  : new Date(row[col].seconds * 1000).toLocaleString())\r\n              : String(row[col] ?? \"\")}\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        </>\r\n      )}\r\n\r\n      {searchAttempted && !isSearching && records.length === 0 && history.length === 0 && (\r\n        <p style={{ textAlign: \"center\", color: \"#888\", marginTop: \"30px\" }}>No records to display.</p>\r\n      )}\r\n\r\n      <ToastContainer position=\"bottom-right\" autoClose={3000} />\r\n      <p style={{ textAlign: \"center\", marginTop: \"30px\", color: \"#666\" }}>¬© 2025 Fleet Billing System</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}