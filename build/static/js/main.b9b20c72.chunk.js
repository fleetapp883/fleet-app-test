(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),i=(a(28),a(19)),o=a(4),s=a(10),d=a(3),u=a(18);const m=Object(u.a)({apiKey:"AIzaSyAOcDXL1kQsi_MoLJ33GWn9-57qhQ0CWro",authDomain:"fleet-9805b.firebaseapp.com",projectId:"fleet-9805b",storageBucket:"fleet-9805b.appspot.com",messagingSenderId:"682529821046",appId:"1:682529821046:web:cbb00f5dcbac062304aa57",measurementId:"G-T4PZQZGWZ9"}),p=Object(s.b)(m),g=Object(d.f)(m);var b=()=>{const[e,t]=Object(n.useState)(""),[a,l]=Object(n.useState)(""),[c,i]=Object(n.useState)(!0),[o,d]=Object(n.useState)(!1);return r.a.createElement("div",{style:{padding:40,maxWidth:400,margin:"auto",border:"1px solid #ccc",borderRadius:10}},r.a.createElement("h2",{style:{textAlign:"center"}},c?"Login":"Sign Up"),r.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),d(!0);try{c?(await Object(s.d)(p,e,a),alert("\u2705 Login successful!")):(await Object(s.a)(p,e,a),alert("\u2705 Account created successfully!"))}catch(n){alert("\u274c "+n.message)}finally{d(!1)}}},r.a.createElement("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:8,marginBottom:10}}),r.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0,style:{width:"100%",padding:8,marginBottom:10}}),r.a.createElement("button",{type:"submit",disabled:o,style:{width:"100%",padding:10,backgroundColor:"#007BFF",color:"white",border:"none",cursor:"pointer"}},o?"Please wait...":c?"Login":"Sign Up")),r.a.createElement("button",{onClick:()=>i(!c),style:{marginTop:15,background:"none",border:"none",color:"#007BFF",cursor:"pointer",textDecoration:"underline"}},c?"New user? Create an account":"Already have an account? Login"))},D=a(13);const y={"Indent No":"IndentNo","Indent Date":"IndentDate","Placement Date":"PlacementDate",Customer:"Customer","Customer Type":"CustomerType","Customer Billing Type":"CustomerBillingType","Sourcing (Vendor)":"SourcingVendor","Vendor Type":"VendorType","Vendor Billing Type":"VendorBillingType",Origin:"Origin",Destination:"Destination","Vehicle No":"VehicleNo","Vehicle type":"VehicleType","Driver No":"DriverNo","Dispatch Date":"DispatchDate","Deliver Date":"DeliverDate","Offloading Date":"OffloadingDate","E-way Bill":"EwayBill","LR No.":"LRNo","Soft Copy POD Rec":"SoftCopyPODRec","Hard Copy POD Rec":"HardCopyPODRec","Customer -Sale rate":"CustomerSaleRate","Advance to be Paid":"AdvanceToBePaid","Advance Rec":"AdvanceRec","Advance UTR":"AdvanceUTR","Advance Rec-Date":"AdvanceRecDate","Balance Pending":"BalancePending","Detention Charges":"DetentionCharges","Loading/Unloading Charges":"LoadingUnloadingCharges","Miscellaneous Charges.":"MiscCharges","Processing Charges":"ProcessingCharges","Net Balance":"NetBalance","Balance Rec Amount":"BalanceRecAmount","Balance UTR":"BalanceUTR","Balance Rec Date":"BalanceRecDate","Remaining Balance":"RemainingBalance","Remaining Balance UTR":"RemainingBalanceUTR","Remaining Balance Date":"RemainingBalanceDate","Supplier Buy Rate":"SupplierBuyRate","Supplier Advance Pay":"SupplierAdvancePay","Supplier Advance Paid":"SupplierAdvancePaid","Supplier Mis Charges":"SupplierMisCharges","Supplier Invoice No.":"SupplierInvoiceNo","Supplier Advance UTR":"SupplierAdvanceUTR","Supplier Advance Pay-Date":"SupplierAdvancePayDate","Supplier Balance Pending":"SupplierBalancePending","Supplier Balance Paid Amount":"SupplierBalancePaidAmount","Supplier Balance Paid UTR":"SupplierBalancePaidUTR","Supplier Balance Paid Date":"SupplierBalancePaidDate","Remaining Supplier Amount":"RemainingSupplierAmount","POD Rec Date":"PODRecDate","POD Send to Customer Date":"PODSendToCustomerDate","POD Docket No.":"PODDocketNo","POD Rec By Customer":"PODRecByCustomer","POD Deduction If any":"PODDeductionIfAny","Gross Profit":"GrossProfit","Bad Debts":"BadDebts","Net Profit":"NetProfit"},f=["Indent Date","Placement Date","Dispatch Date","Deliver Date","Offloading Date","Soft Copy POD Rec","Hard Copy POD Rec","Advance Rec-Date","Balance Rec Date","Remaining Balance Date","Supplier Advance Pay-Date","Supplier Balance Paid Date","POD Rec Date","POD Send to Customer Date","POD Rec By Customer"];var v=()=>{const[e,t]=Object(n.useState)([]),[a,l]=Object(n.useState)({}),[c,i]=Object(n.useState)({}),s=e=>(e||"").replace(/[.\s]+/g," ").trim().toLowerCase(),u=e=>{if(!e)return void alert("No file selected");alert("File selected: "+e.name);const a=new FileReader;a.onload=(e=>{alert("File read started");const a=D.read(e.target.result,{type:"binary"}),n=a.SheetNames[0];alert("Reading sheet: "+n);const r=a.Sheets[n],c=D.utils.sheet_to_json(r,{header:1,defval:"",blankrows:!1});if(c.length<3)return void alert("Not enough rows to parse.");c.splice(0,1);const o=c[0],d=c.slice(1).map((e,t)=>{const a={};return o.forEach((t,n)=>{const r=(e=>{var t;const a=s(e);return null===(t=Object.entries(y).find(e=>{let[t]=e;return s(t)===a}))||void 0===t?void 0:t[1]})(t);if(!r)return;const l=e[n],c=f.some(e=>s(e)===s(t));if("number"===typeof l&&c){const e=D.SSF.parse_date_code(l);e&&(a[r]="".concat(String(e.d).padStart(2,"0"),"-").concat(String(e.m).padStart(2,"0"),"-").concat(e.y))}else a[r]=String(null!==l&&void 0!==l?l:"").trim()}),a});alert("Parsed rows: "+d.length),t(d),l({}),i({})}),a.onerror=(e=>{alert("Failed to read file: "+e),console.error("FileReader error:",e)}),a.readAsBinaryString(e)},m=async(e,t)=>{const a=p.currentUser;try{const r=await(async()=>{const e=Object(d.d)(g,"Counters","fleet_counter");return await Object(d.h)(g,async t=>{const a=await t.get(e);if(!a.exists())throw new Error("Counter doc missing");const n=a.data().nextFleetNo||1;return t.update(e,{nextFleetNo:n+1}),n})})(),c=Object(o.a)(Object(o.a)({},e),{},{fleetNumber:r,createdAt:new Date,createdBy:(null===a||void 0===a?void 0:a.email)||"anonymous",isCurrent:!0,versionDate:new Date});await Object(d.a)(Object(d.b)(g,"fleet_records"),c),l(e=>Object(o.a)(Object(o.a)({},e),{},{[t]:"\u2705 Saved"})),i(e=>Object(o.a)(Object(o.a)({},e),{},{[t]:r}))}catch(n){l(e=>Object(o.a)(Object(o.a)({},e),{},{[t]:"\u274c Failed"}))}};return r.a.createElement("div",{style:{marginBottom:40}},r.a.createElement("h4",null,"Upload Excel & Preview"),r.a.createElement("input",{type:"file",accept:".xlsx, .xls",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a?(u(a),setTimeout(()=>{e.target.value=""},100)):alert("No file selected.")}}),e.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{style:{marginTop:20}},"\ud83d\udcc4 Preview Table (Excel Upload)"),r.a.createElement("button",{onClick:async()=>{for(let t=0;t<e.length;t++)a[t]||await m(e[t],t)}},"\ud83d\udcbe Save All"),r.a.createElement("button",{onClick:()=>{t([]),l({}),i({})},style:{marginLeft:10,color:"red"}},"\ud83e\uddf9 Clear"),r.a.createElement("div",{className:"table-scroll-x"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Fleet Number"),Object.keys(e[0]).map(e=>r.a.createElement("th",{key:e},e)),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,e.map((n,s)=>r.a.createElement("tr",{key:s},r.a.createElement("td",null,c[s]||""),Object.keys(n).map(a=>r.a.createElement("td",{key:a},r.a.createElement("input",{type:"text",value:n[a],onChange:n=>((a,n,r)=>{const l=[...e];l[a][n]=r,t(l)})(s,a,n.target.value),style:{width:"120px"}}))),r.a.createElement("td",null,a[s]||"\u23f3 Pending"),r.a.createElement("td",null,r.a.createElement("button",{onClick:()=>m(n,s),disabled:"\u2705 Saved"===a[s]},"Save"),r.a.createElement("button",{onClick:()=>(n=>{t(e.filter((e,t)=>t!==n));const r=Object(o.a)({},a);delete r[n];const s=Object(o.a)({},c);delete s[n],l(r),i(s)})(s),style:{marginLeft:6,color:"red"}},"Delete")))))))))};const h={IndentNo:"",IndentDate:"",PlacementDate:"",Customer:"",CustomerType:"",CustomerBillingType:"",SourcingVendor:"",VendorType:"",VendorBillingType:"",Origin:"",Destination:"",VehicleNo:"",VehicleType:"",DriverNo:"",DispatchDate:"",DeliverDate:"",OffloadingDate:"",EwayBill:"",LRNo:"",SoftCopyPODRec:"",HardCopyPODRec:"",CustomerSaleRate:"",AdvanceToBePaid:"",AdvanceRec:"",AdvanceUTR:"",AdvanceRecDate:"",BalancePending:"",DetentionCharges:"",LoadingUnloadingCharges:"",MiscCharges:"",ProcessingCharges:"",NetBalance:"",BalanceRecAmount:"",BalanceUTR:"",BalanceRecDate:"",RemainingBalance:"",RemainingBalanceUTR:"",RemainingBalanceDate:"",SupplierBuyRate:"",SupplierAdvancePay:"",SupplierAdvancePaid:"",SupplierMisCharges:"",SupplierInvoiceNo:"",SupplierAdvanceUTR:"",SupplierAdvancePayDate:"",SupplierBalancePending:"",SupplierBalancePaidAmount:"",SupplierBalancePaidUTR:"",SupplierBalancePaidDate:"",RemainingSupplierAmount:"",PODRecDate:"",PODSendToCustomerDate:"",PODDocketNo:"",PODRecByCustomer:"",PODDeductionIfAny:"",GrossProfit:"",BadDebts:"",NetProfit:""};var S=e=>{let{onAddRow:t}=e;const[a,l]=Object(n.useState)(h),[c,i]=Object(n.useState)(!1),s=e=>{l(Object(o.a)(Object(o.a)({},a),{},{[e.target.name]:e.target.value}))};return r.a.createElement("div",{style:{marginTop:20}},r.a.createElement("h4",null,"Manual Entry"),r.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),!c){i(!0);try{const e=p.currentUser,r=await(async()=>{const e=Object(d.d)(g,"Counters","fleet_counter");return await Object(d.h)(g,async t=>{const a=await t.get(e);if(!a.exists())throw new Error("Counter document does not exist.");const n=a.data().nextFleetNo||1;return t.update(e,{nextFleetNo:n+1}),n})})(),c=Object(o.a)(Object(o.a)({},a),{},{fleetNumber:r,createdAt:new Date,createdBy:(null===e||void 0===e?void 0:e.email)||"anonymous",isCurrent:!0,versionDate:new Date}),s=await Object(d.a)(Object(d.b)(g,"fleet_records"),c);t(Object(o.a)({id:s.id},c),!0),l(h),await navigator.clipboard.writeText(String(r)),alert("\u2705 Row saved!\nFleet Number copied: ".concat(r))}catch(n){alert("\u274c Error saving row: "+n.message)}finally{i(!1)}}}},Object.keys(h).map(e=>r.a.createElement("input",{key:e,name:e,placeholder:e,value:a[e],onChange:s,style:{margin:4,width:"220px"},required:!1})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",disabled:c},c?r.a.createElement(r.a.Fragment,null,"Saving... ",r.a.createElement("span",{className:"loader-spinner"})):"Add Row")))},O=(a(33),a(8));a(34);const E=["id","fleetNumber"],B={"Fleet Number":"fleetNumber","Indent No":"IndentNo","Indent Date":"IndentDate","Placement Date":"PlacementDate",Customer:"Customer","Customer Type":"CustomerType","Customer Billing Type":"CustomerBillingType","Sourcing (Vendor)":"SourcingVendor","Vendor Type":"VendorType","Vendor Billing Type":"VendorBillingType",Origin:"Origin",Destination:"Destination","Vehicle No":"VehicleNo","Vehicle type":"VehicleType","Driver No":"DriverNo","Dispatch Date":"DispatchDate","Deliver Date":"DeliverDate","Offloading Date":"OffloadingDate","E-way Bill":"EwayBill","LR No.":"LRNo","Soft Copy POD Rec":"SoftCopyPODRec","Hard Copy POD Rec":"HardCopyPODRec","Customer -Sale rate":"CustomerSaleRate","Advance to be Paid":"AdvanceToBePaid","Advance Rec":"AdvanceRec","Advance UTR":"AdvanceUTR","Advance Rec-Date":"AdvanceRecDate","Balance Pending":"BalancePending","Detention Charges":"DetentionCharges","Loading/Unloading Charges":"LoadingUnloadingCharges","Miscellaneous Charges.":"MiscCharges","Processing Charges":"ProcessingCharges","Net Balance":"NetBalance","Balance Rec Amount":"BalanceRecAmount","Balance UTR":"BalanceUTR","Balance Rec Date":"BalanceRecDate","Remaining Balance":"RemainingBalance","Remaining Balance UTR":"RemainingBalanceUTR","Remaining Balance Date":"RemainingBalanceDate","Supplier Buy Rate":"SupplierBuyRate","Supplier Advance Pay":"SupplierAdvancePay","Supplier Advance Paid":"SupplierAdvancePaid","Supplier Mis Charges":"SupplierMisCharges","Supplier Invoice No.":"SupplierInvoiceNo","Supplier Advance UTR":"SupplierAdvanceUTR","Supplier Advance Pay-Date":"SupplierAdvancePayDate","Supplier Balance Pending":"SupplierBalancePending","Supplier Balance Paid Amount":"SupplierBalancePaidAmount","Supplier Balance Paid UTR":"SupplierBalancePaidUTR","Supplier Balance Paid Date":"SupplierBalancePaidDate","Remaining Supplier Amount":"RemainingSupplierAmount","POD Rec Date":"PODRecDate","POD Send to Customer Date":"PODSendToCustomerDate","POD Docket No.":"PODDocketNo","POD Rec By Customer":"PODRecByCustomer","POD Deduction If any":"PODDeductionIfAny","Gross Profit":"GrossProfit","Bad Debts":"BadDebts","Net Profit":"NetProfit",isCurrent:"isCurrent",createdBy:"createdBy",createdAt:"createdAt","Update Description":"updateDescription"},P=Object.fromEntries(Object.entries(B).map(e=>{let[t,a]=e;return[a,t]}));var C=function(){const[e,t]=Object(n.useState)(null),[l,c]=Object(n.useState)([]),[u,m]=Object(n.useState)([]),[D,y]=Object(n.useState)(""),[f,h]=Object(n.useState)("fleetNumber"),[C,R]=Object(n.useState)(""),[j,N]=Object(n.useState)(""),[A,w]=Object(n.useState)({}),[T,x]=Object(n.useState)(!1),[k,F]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=Object(s.c)(p,e=>{t(e)});return()=>e()},[]);const U=["versionDate","expiredAt","isCurrent","updateDescription","createdAt","createdBy"],L=e=>null===e||void 0===e?"":"object"===typeof e&&e.seconds?new Date(1e3*e.seconds).toISOString():String(e).trim(),I=(e,t)=>((e,t)=>{const a=[];for(const n in e)U.includes(n)||L(e[n])!==L(null===t||void 0===t?void 0:t[n])&&a.push(n);return a})(e,t).length>0;return e?r.a.createElement("div",{style:{maxWidth:"100vw",overflowX:"hidden",padding:"40px 20px"}},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Fleet Billing Dashboard"),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("span",{className:"user-email"},"Welcome, ",e.email),r.a.createElement("img",{src:"/logo.png",alt:"Logo",style:{height:"50px"}}))),r.a.createElement("button",{onClick:()=>Object(s.e)(p)},"Logout"),r.a.createElement("hr",null),r.a.createElement(v,null),r.a.createElement(S,{onAddRow:(e,t)=>{c([e]),t&&m([e])}}),r.a.createElement("hr",null),r.a.createElement("h4",null,"Search Existing Records"),r.a.createElement("div",{className:"search-bar"},r.a.createElement("select",{value:f,onChange:e=>{h(e.target.value),y(""),R(""),N("")}},r.a.createElement("option",{value:"fleetNumber"},"Fleet Number"),r.a.createElement("option",{value:"Broker"},"Broker"),r.a.createElement("option",{value:"Date"},"Date")),"Date"===f?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{style:{marginLeft:10}},"From:"),r.a.createElement("input",{type:"date",value:C,onChange:e=>R(e.target.value)}),r.a.createElement("label",{style:{marginLeft:10}},"To:"),r.a.createElement("input",{type:"date",value:j,onChange:e=>N(e.target.value)})):r.a.createElement("input",{type:"text",value:D,onChange:e=>y(e.target.value),placeholder:"Search key",style:{margin:"0 10px"}}),r.a.createElement("button",{onClick:async()=>{x(!0);try{const t=Object(d.b)(g,"fleet_records");let a;if("Date"===f){if(!C||!j)return O.b.warn("\ud83d\udcc5 Please select both From and To dates."),void x(!1);const e=new Date(C),n=new Date(j+"T23:59:59");if(e>n)return O.b.warn("\u26a0\ufe0f 'From' date cannot be after 'To' date."),void x(!1);a=Object(d.g)(t,Object(d.j)("createdAt",">=",e),Object(d.j)("createdAt","<=",n))}else{if(!D)return O.b.warn("\ud83d\udd0d Please enter a search value."),void x(!1);{const e="fleetNumber"===f?Number(D):D;a=Object(d.g)(t,Object(d.j)(f,"==",e))}}const n=await Object(d.e)(a),r=[],l=[];if(n.forEach(e=>{const t=Object(o.a)({id:e.id},e.data());r.push(t),t.isCurrent&&l.push(t)}),"fleetNumber"===f||"Broker"===f?(c(l),m(r)):"Date"===f&&(c([]),m(r)),n.empty||0===r.length){let e="\u274c No data found.";"Date"===f?e="\u274c No data available between ".concat(C," and ").concat(j):"fleetNumber"===f?e="\u274c No record found for Fleet Number: ".concat(D):"Broker"===f&&(e="\u274c No record found for Broker: ".concat(D)),O.b.info(e)}}catch(e){O.b.error("\u274c Search failed: "+e.message)}finally{x(!1)}},style:{marginLeft:10},disabled:T},T?r.a.createElement(r.a.Fragment,null,"Searching... ",r.a.createElement("span",{className:"loader-spinner"})):"Search")),r.a.createElement("hr",null),"fleetNumber"===f&&l.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Editable Current Records"),r.a.createElement("div",{className:"table-scroll-x"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,["Fleet Number",...Object.keys(B).filter(e=>"Fleet Number"!==e).sort()].map(e=>r.a.createElement("th",{key:e},e)),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.map((t,a)=>r.a.createElement("tr",{key:a},["Fleet Number",...Object.keys(B).filter(e=>"Fleet Number"!==e).sort()].map(e=>{var n,i;const o=B[e];return r.a.createElement("td",{key:o},r.a.createElement("input",{type:"text",value:"object"===typeof t[o]&&(null===(n=t[o])||void 0===n?void 0:n.seconds)?new Date(1e3*t[o].seconds).toLocaleString():String(null!==(i=t[o])&&void 0!==i?i:""),onChange:e=>{const t=[...l];t[a][o]=e.target.value,c(t)},readOnly:["fleetNumber","createdAt","createdBy","isCurrent","updateDescription"].includes(o),style:{width:"120px"}}))}),r.a.createElement("td",null,r.a.createElement("button",{className:"save",disabled:!I(t,A[t.id]),onClick:()=>(async t=>{try{const{id:l,fleetNumber:s}=t,u=Object(i.a)(t,E),p=(await Object(d.e)(Object(d.g)(Object(d.b)(g,"fleet_records"),Object(d.j)("fleetNumber","==",s),Object(d.j)("isCurrent","==",!0)))).docs.find(e=>e.id===l),b=(null===p||void 0===p?void 0:p.data())||{},D={},y=[],f=["id","isCurrent","createdAt","createdBy","versionDate","updateDescription","expiredAt","modifiedBy"];let v=!1;for(const e in u){var a,n;if(f.includes(e))continue;const t=null!==(a=u[e])&&void 0!==a?a:"",r=null!==(n=b[e])&&void 0!==n?n:"";D[e]=t,String(t).trim()!==String(r).trim()&&P[e]&&(y.push("Updated ".concat(P[e])),v=!0)}if(!v)return void O.b.info("\u2139\ufe0f No changes detected \u2014 update skipped.");if(!window.confirm("Are you sure you want to update this record?\nChanges: ".concat(y.join(", "))))return;const h=y.join(", ");await Object(d.i)(Object(d.d)(g,"fleet_records",l),{isCurrent:!1,expiredAt:new Date,modifiedBy:e.email});const S=Object(o.a)(Object(o.a)({},D),{},{fleetNumber:s,createdAt:new Date,createdBy:e.email,isCurrent:!0,versionDate:new Date,updateDescription:h}),B=(await Object(d.a)(Object(d.b)(g,"fleet_records"),S),Object(d.g)(Object(d.b)(g,"fleet_records"),Object(d.j)("fleetNumber","==",s))),C=await Object(d.e)(B),R=[],j=[];C.forEach(e=>{const t=Object(o.a)({id:e.id},e.data());R.push(t),t.isCurrent&&j.push(t)}),m(R),c(j);const N={};j.forEach(e=>N[e.id]=Object(o.a)({},e)),w(N),O.b.success("\u2705 Record updated (SCD Type 2)")}catch(r){O.b.error("\u274c Update failed: "+r.message)}})(t)},"Save"),r.a.createElement("button",{className:"delete",onClick:()=>(async e=>{try{const a=Object(d.g)(Object(d.b)(g,"fleet_records"),Object(d.j)("fleetNumber","==",e)),n=await Object(d.e)(a);if(n.empty)return void alert("\u274c No records found for this fleet number.");if(!window.confirm("Delete ALL versions for fleet number ".concat(e,"?")))return;const r=n.docs.map(e=>Object(d.c)(Object(d.d)(g,"fleet_records",e.id)));await Promise.all(r),c(t=>t.filter(t=>t.fleetNumber!==e)),m(t=>t.filter(t=>t.fleetNumber!==e)),alert("\u2705 All versions of Fleet Number ".concat(e," deleted."))}catch(t){alert("\u274c Delete error: "+t.message)}})(t.fleetNumber)},"Delete")))))))),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h4",null,"\ud83d\udd0d Full Version History"),r.a.createElement("button",{onClick:()=>{F(!0),O.b.info("\u23f3 Preparing Excel export..."),Promise.resolve().then(a.bind(null,13)).then(e=>{const t=u.map(e=>{const t={};return Object.keys(e).forEach(a=>{const n=e[a];t[a]="object"===typeof n&&(null===n||void 0===n?void 0:n.seconds)?new Date(1e3*n.seconds).toLocaleString():String(null!==n&&void 0!==n?n:"")}),t}),a=e.utils.json_to_sheet(t),n=e.utils.book_new();e.utils.book_append_sheet(n,a,"History"),e.writeFile(n,"Fleet_Full_Version_History.xlsx"),O.b.success("\u2705 Export complete.")}).catch(e=>{O.b.error("\u274c Export failed: "+e.message)}).finally(()=>{F(!1)})},disabled:k},"\ud83d\udcc4 Export to Excel",k&&r.a.createElement("span",{className:"loader-spinner"})),r.a.createElement("div",{className:"table-scroll-x"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,["fleetNumber",...[...new Set(u.flatMap(Object.keys))].filter(e=>"fleetNumber"!==e).sort()].map(e=>r.a.createElement("th",{key:e},e)))),r.a.createElement("tbody",null,[...u].sort((e,t)=>{var a,n;if(e.isCurrent)return-1;if(t.isCurrent)return 1;const r=(null===(a=e.expiredAt)||void 0===a?void 0:a.seconds)||0;return((null===(n=t.expiredAt)||void 0===n?void 0:n.seconds)||0)-r}).map((e,t)=>r.a.createElement("tr",{key:t},["fleetNumber",...[...new Set(u.flatMap(Object.keys))].filter(e=>"fleetNumber"!==e).sort()].map((t,a)=>{var n,l;return r.a.createElement("td",{key:a},"object"===typeof e[t]&&(null===(n=e[t])||void 0===n?void 0:n.seconds)?new Date(1e3*e[t].seconds).toLocaleString():String(null!==(l=e[t])&&void 0!==l?l:""))}))))))),0===l.length&&0===u.length&&r.a.createElement("p",{style:{textAlign:"center",color:"#888",marginTop:"30px"}},"No records to display."),r.a.createElement(O.a,{position:"bottom-right",autoClose:3e3}),r.a.createElement("p",{style:{textAlign:"center",marginTop:"30px",color:"#666"}},"\xa9 2025 Fleet Billing System")):r.a.createElement(b,null)};var R=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,36)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:l,getTTFB:c}=t;a(e),n(e),r(e),l(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null))),R()}},[[20,1,2]]]);
//# sourceMappingURL=main.b9b20c72.chunk.js.map